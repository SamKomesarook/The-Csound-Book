<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>A Survey of &quot;Classic&quot; Synthesis Techniques Implemented in Csound</title>	</head>	<body bgcolor="white">		<h1><font face="Times New Roman"><b>11. A Survey of &quot;Classic&quot; Synthesis Techniques Implemented in Csound</b></font></h1>		<h2><font face="Times New Roman"><b>Rajmil Fischman</b></font></h2>		<p><font face="Times New Roman">Click <a href="chapter11.zip">HERE</a> to download chapter instruments.</font></p>		<div align="justify">			<p><font face="Times New Roman">The development of digital synthesis and processing owes a great deal to the &#145;classic&#146; techniques employed in the early years of electroacoustic music. These involved processes which, in most cases, were based on the capabilities of analog devices. Even today, when the flexibility offered by digital systems allows tighter control of spectral characteristics and application of sophisticated mathematical models, the theoretical principles underpinning the &#145;classic&#146; processes still offer a powerful set of tools for the achievement of complex morphologies, which is greatly enhanced by the versatility of the new technology.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">&#145;Classic&#146; techniques may be categorized according to the principles involved in their realization, as shown in the figure 11.1.<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="555">			<tr>				<td width="24%" valign="top"></td>				<td width="19%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2">					<div align="justify">						<font face="Courier New">Additive synthesis</font></div>				</td>			</tr>			<tr>				<td width="24%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="3">					<div align="justify">						<font face="Courier New">Linear</font></div>				</td>			</tr>			<tr>				<td width="24%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="19%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2">					<div align="justify">						<font face="Courier New">Subtractive synthesis</font></div>				</td>			</tr>			<tr>				<td width="24%" valign="top">					<div align="justify">						<font face="Courier New">Frequency-domain</font></div>				</td>				<td width="19%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="32%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="25%" valign="top">					<div align="justify">						<font face="Courier New">Ring modulation</font></div>				</td>			</tr>			<tr>				<td width="24%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="19%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2">					<div align="justify">						<font face="Courier New">Amplitude modulation</font></div>				</td>			</tr>			<tr>				<td width="24%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="19%" valign="top">					<div align="justify">						<font face="Courier New">Non-linear</font></div>				</td>				<td width="32%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="25%" valign="top">					<div align="justify">						<font face="Courier New">Waveshaping</font></div>				</td>			</tr>			<tr>				<td width="24%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="19%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2">					<div align="justify">						<font face="Courier New">Frequency modulation</font></div>				</td>			</tr>			<tr>				<td valign="top" colspan="4"><font face="Courier New">&nbsp;</font></td>			</tr>			<tr>				<td width="24%" valign="top">					<div align="justify">						<font face="Courier New">Time-domain</font></div>				</td>				<td width="19%" valign="top">					<div align="justify">						<font face="Courier New">(Non-linear)</font></div>				</td>				<td valign="top" colspan="2">					<div align="justify">						<font face="Courier New">Granular synthesis</font></div>				</td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.1 </b></font><font face="Times New Roman" size="2">Classic synthesis techniques classified according to their principles of realization.</font></p>		<div align="justify">			<p><font face="Times New Roman"><i>Frequency-domain techniques</i> are based on the assumption that any signal can be considered to be the sum of sines or cosines &#151; each with its own amplitude, frequency and phase &#151; according to theoretical principles developed by Fourier (1768-1830). Mathematically, this may be expressed as follows:</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq01.jpg" width="373" height="36"> (11.1)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">where <i>A<sub>i</sub></i>, <i>f<sub>i</sub></i> and j <sub><i>i</i></sub> are, respectively, the amplitude, frequency and phase of the <i>ith</i> sinewave.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">On the other hand, <i>granular synthesis</i> is a <i>time-domain technique</i> based on the construction of signals from the combination of very short sounds, called grains.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman"><i>Linear techniques</i> are processes that do not distort the input and, as a consequence, do not create new frequencies that were not already contained in the input before it was processed. Linear procedures process signals in three possible ways: <i>delay</i> of samples, <i>scaling</i> (which is equivalent to multiplying a sample by a constant) and <i>addition</i> or <i>subtraction</i> of scaled samples (which may or may not have been delayed).</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman"><i>Non-linear techniques</i> consist of the controlled distortion of a signal, which results in the creation of frequencies not found before the latter was processed. This can be achieved in various ways. For example, it is possible to use a signal in order to modify the amplitude of another (amplitude modulation) by multiplying the former by the latter. Alternatively, a signal may be used to modify the frequency of another (frequency modulation).</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">We will now proceed to examine the various techniques in more detail.</font></p>		</div>		<h2><font face="Times New Roman"><b>Additive Synthesis</b></font></h2>		<div align="justify">			<p><font face="Times New Roman">Additive processes consist of synthesis by means of a direct implementation of equation 11.1 above. Sinewaves of various frequencies and amplitudes are added together (mixed) in order to produce complex sounds. This is illustrated in</font></p>			<p><font face="Times New Roman"><i>.orc</i> and <i>1101.sco.</i> The former consists of the following instrument:</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/02.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.2 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1101</i>, a simple oscillator instrument with an amplitude envelope.</font><font face="Times New Roman"><br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="477">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1101/1101.html"><font face="Courier New">1101</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; simple oscillator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, 0.1, p3, 0.2</font></td>				<td width="42%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv, p5, p6</font></td>				<td width="42%" valign="top"><font face="Courier New">; oscillator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">asig</font></td>				<td width="42%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.3</b> Orchestra code for <i>instr 1101</i>, a simple oscillator instrument.</font></p>		<div align="justify">			<p><font face="Times New Roman"><i>Instr 1101</i> contains a simple oscillator that may produce a single sinewave or a combination of components, depending on the type of waveform defined by the f-table <i>(p6).</i> The maximum amplitude, determined by <i>p4</i>, is fed to an envelope generator <i>(kenv</i>), which controls the amplitude of the oscillator. The frequency of the oscillator is given by <i>p5</i>. The attack is 0.1 beats and the decay is 0.2 beats.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The score produces the following sounds. First, the individual components of a bassoon-like sound, based on data presented by Backus (1977, p 116), are played separately. These are then superimposed in ascending frequency order. At this point it is possible to appreciate how the overall timbre changes as components are added. Finally, they are all mixed together in order to produce the synthetic &#145;bassoon&#146;, which is used in a short musical passage from <i>The Sorcerer&#146;s Apprentice</i>, by Dukas.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The individual components are generated by <i>f 1</i> using GEN10:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="8%" valign="top"><font face="Courier New">f 1</font></td>				<td width="3%" valign="top"><font face="Courier New">0</font></td>				<td width="7%" valign="top"><font face="Courier New">8192</font></td>				<td width="7%" valign="top"><font face="Courier New">10</font></td>				<td width="74%" valign="top"><font face="Courier New">1</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The waveform in the &#145;bassoon&#146; passage of the final section of this example is generated with <i>f </i>2, which uses GEN10 to produce a waveform resulting from combining eight components, each with its own relative amplitude:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="8%" valign="top"><font face="Courier New">f 2</font></td>				<td width="4%" valign="top"><font face="Courier New">0</font></td>				<td width="9%" valign="top"><font face="Courier New">8192</font></td>				<td width="6%" valign="top"><font face="Courier New">10</font></td>				<td width="74%" valign="top"><font face="Courier New">.24 .64 .88 .76 .06 .5 .24 .08</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">In its simplest form, additive synthesis may be used to produce a <i>static spectrum</i>. This is a combination of sines and cosines in which the amplitude and frequency of each component remain unchanged throughout the duration of the sound. Within these constraints, timbral identity is determined by the particular set of relative amplitudes, frequencies and &#151; to a lesser extent &#151; phases of the components. For example, consider the following sounds:</font></p>		</div>		<p><font face="Times New Roman">		<table border="0" cellspacing="1" width="389">			<tr>				<td valign="top" colspan="2"><font face="Courier New"><b>Sound 1</b></font></td>				<td width="24" valign="top"></td>				<td valign="top" colspan="2"><font face="Courier New"><b>Sound 2</b></font></td>				<td width="24" valign="top"></td>				<td valign="top" colspan="2"><font face="Courier New"><b>Sound 3</b></font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New"><i>Amp.</i></font></td>				<td width="15%" valign="top"><font face="Courier New"><i>Freq.(Hz)</i></font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New"><i>Amp.</i></font></td>				<td valign="top"><font face="Courier New"><i>Freq.(Hz)</i></font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New"><i>Amp.</i></font></td>				<td width="34%" valign="top"><font face="Courier New"><i>Freq.(Hz)</i></font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">500</font></td>				<td width="15%" valign="top"><font face="Courier New">100</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">1000</font></td>				<td valign="top"><font face="Courier New">110</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">3500</font></td>				<td width="34%" valign="top"><font face="Courier New">110</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">750</font></td>				<td width="15%" valign="top"><font face="Courier New">200</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">1500</font></td>				<td valign="top"><font face="Courier New">220</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">3000</font></td>				<td width="34%" valign="top"><font face="Courier New">330</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">1000</font></td>				<td width="15%" valign="top"><font face="Courier New">300</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">2000</font></td>				<td valign="top"><font face="Courier New">330</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">2500</font></td>				<td width="34%" valign="top"><font face="Courier New">550</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">1250</font></td>				<td width="15%" valign="top"><font face="Courier New">400</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">2500</font></td>				<td valign="top"><font face="Courier New">440</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">2000</font></td>				<td width="34%" valign="top"><font face="Courier New">770</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">1000</font></td>				<td width="15%" valign="top"><font face="Courier New">500</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">2000</font></td>				<td valign="top"><font face="Courier New">550</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">1500</font></td>				<td width="34%" valign="top"><font face="Courier New">990</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">750</font></td>				<td width="15%" valign="top"><font face="Courier New">600</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">1500</font></td>				<td valign="top"><font face="Courier New">660</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">1000</font></td>				<td width="34%" valign="top"><font face="Courier New">1210</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">500</font></td>				<td width="15%" valign="top"><font face="Courier New">700</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">1000</font></td>				<td valign="top"><font face="Courier New">770</font></td>				<td width="24" valign="top"></td>				<td width="12%" valign="top"><font face="Courier New">500</font></td>				<td width="34%" valign="top"><font face="Courier New">1430</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.4</b></font><font face="Times New Roman" size="2"> The static spectra of three additive synthesis sounds.</font></p>		<div align="justify">			<p><font face="Times New Roman">Close inspection of sounds 1 and 2 reveals that their frequency components have relative ratios 1, 2, 3, 4, 5, 6 and 7, namely:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="479">			<tr>				<td width="10%" valign="top"><font face="Courier New">200</font></td>				<td width="6%" valign="top"><font face="Courier New">=</font></td>				<td width="21%" valign="top"><font face="Courier New">2 x 100</font></td>				<td width="10%" valign="top"><font face="Courier New">and</font></td>				<td width="9%" valign="top"><font face="Courier New">220</font></td>				<td width="7%" valign="top"><font face="Courier New">=</font></td>				<td width="38%" valign="top"><font face="Courier New">2 x 110</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">300</font></td>				<td width="6%" valign="top"><font face="Courier New">=</font></td>				<td width="21%" valign="top"><font face="Courier New">3 x 100</font></td>				<td width="10%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="9%" valign="top"><font face="Courier New">330</font></td>				<td width="7%" valign="top"><font face="Courier New">=</font></td>				<td width="38%" valign="top"><font face="Courier New">3 x 110</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">400</font></td>				<td width="6%" valign="top"><font face="Courier New">=</font></td>				<td width="21%" valign="top"><font face="Courier New">4 x 100</font></td>				<td width="10%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="9%" valign="top"><font face="Courier New">440</font></td>				<td width="7%" valign="top"><font face="Courier New">=</font></td>				<td width="38%" valign="top"><font face="Courier New">4 x 110</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">etc.</font></td>				<td width="6%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="21%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="10%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="9%" valign="top"><font face="Courier New">etc.</font></td>				<td width="7%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="38%" valign="top"><font face="Courier New">&nbsp;</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The same happens to the corresponding amplitudes, which have relative ratios 1, 1.5, 2, 2.5, 2, 1.5, and 1. Therefore, we expect these sounds to have the same timbre (and different pitch), in spite of the fact that they do not have any common frequency components. On the other hand, the frequency ratios in sound 3 are 1, 3, 5, 7, 9, 11, 13 and the relative amplitudes are 7, 6, 5, 4, 3, 2, 1. These are not the same as sound 2; thus in spite of having some common frequencies with the latter, sound 3 has a different timbre. Sounds 1, 2 and 3 are realized in <i>1102.orc</i> and <i>1102.sco.</i> The orchestra uses <i>instr 1102</i>, which is similar to <i>instr 1101</i>, except for the fact that <i>p6</i> and <i>p7</i> indicate the attack and decay and <i>p8</i> indicates the function table.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/03.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.5 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1102</i>, a variable waveform oscillator instrument.</font><font face="Times New Roman"><br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1102/1102.html"><font face="Courier New">1102</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; simple oscil with amp env</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, p6, p3, p7</font></td>				<td width="42%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv, p5, p8</font></td>				<td width="42%" valign="top"><font face="Courier New">; oscillator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">asig</font></td>				<td width="42%" valign="top"><font face="Courier New">; output </font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.6</b></font><font face="Times New Roman" size="2"> Orchestra code for <i>instr 1102</i>, a variable waveform single oscillator instrument with variable attack and release amplitude envelopes.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The score file <i>1102.sco</i> implements the spectrum of sounds 1, 2 and 3 above using the following function tables:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="477">			<tr>				<td width="8%" valign="top"><font face="Courier New">f 1</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">8192</font></td>				<td width="7%" valign="top"><font face="Courier New">10</font></td>				<td width="70%" valign="top"><font face="Courier New">500 750 1000 1250 1000 750 500</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">f 2</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">8192</font></td>				<td width="7%" valign="top"><font face="Courier New">10</font></td>				<td width="70%" valign="top"><font face="Courier New">1000 1500 2000 2500 2000 1500 1000</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">f 3</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">8192</font></td>				<td width="7%" valign="top"><font face="Courier New">10</font></td>				<td width="70%" valign="top"><font face="Courier New">3500 0 3000 0 2500 0 2000 0 1500 0 1000 0 500</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.7</b></font><font face="Times New Roman" size="2"> Harmonically complex f-tables for use in <i>instr 1102</i>.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Frequency ratios may also determine whether a signal has pitch. If <i>f</i> is the lowest frequency component of a sound its spectrum is said to be <i>harmonic</i> when all other components are integer multiples of <i>f</i>. In this case, the sound will normally have definite pitch determined by <i>f</i>, which is called the <i>fundamental</i>. The components are then said to be <i>harmonics</i>: the first harmonic is <i>f</i>, the fundamental; the second harmonic is <i>2f</i>, the third <i>3f</i> and so on. When the relative frequencies of the components are not integer multiples of <i>f</i>, the spectrum is <i>inharmonic</i> and it is more difficult to recognize pitch. Increasing deviation from harmonic ratios causes sounds to become less pitched. The files <i>1103.orc</i> and <i>1103.sco</i> demonstrate this: the first event is a sound with a 280 Hz fundamental and six additional harmonics with relative amplitudes 1, 0.68, 0.79, 0.67, 0.59, 0.82 and 0.34. This is followed by an inharmonic sound in which the lowest component is also <i>f</i> = 280 Hz but the other six are not integer multiples of <i>f</i> but rather <i>1.35f</i>, <i>1.78f</i>, <i>2.13f</i>, <i>2.55f</i>, <i>3.23f</i> and <i>3.47f</i>. In spite of the fact that the relative amplitudes of the components are kept, the second sound does not resemble the first and has no definite pitch due to the fact that its spectrum is inharmonic.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">In order to implement a sound with seven components, <i>instr 1103</i> uses seven oscillators that are subsequently mixed and multiplied by the overall envelope <i>(kenv</i>).<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/04.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.8</b></font><font face="Times New Roman" size="2"> Block diagram of <i>instr 1103</i>, a seven partial additive synthesis instrument with common amplitude envelope.</font></p>			<p><font face="Times New Roman">The relative amplitudes of the components are given in <i>p6</i>, <i>p8</i>, <i>p10</i>, <i>p12</i>, <i>p14</i>, <i>p16</i> and <i>p18</i>. The frequencies of the oscillators are obtained multiplying the reference frequency <i>f</i> (given by <i>p5</i>) by the component ratios specified in <i>p7</i>, <i>p9</i>, <i>p11</i>, <i>p13</i>, <i>p15</i>, <i>p17</i> and <i>p19</i>. For example, if <i>f</i> = 280 Hz and the second component has a relative amplitude of 1 and a frequency ratio of 1.35, the values of <i>p5</i>, <i>p8</i> and <i>p9</i> will be 280, 1 and 1.35, respectively. The oscillator producing this component will be:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="6%" valign="top"><font face="Courier New">a1</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="38%" valign="top"><font face="Courier New">p8, p5*p9, 1</font></td>				<td width="46%" valign="top"><font face="Courier New">; 1st component</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">And the components are mixed using the following statement:<br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="6%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="8%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td width="41%" valign="top"><font face="Courier New">kenv*(a1+a2+a3+a4+a5+a6+a7)/7</font></td>				<td width="46%" valign="top"><font face="Courier New">; mix and output </font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">So far, the discussion has focused on static spectrum. However, most sounds in nature have <i>dynamic</i> <i>spectra</i>, whereby the amplitude and frequency of each component change throughout duration of a sound. This means that <i>A<sub>i</sub></i>, <i>f<sub>i</sub></i> and j <sub><i>i</i></sub> in equation 11.1 are time-dependent.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Using additive synthesis in order to achieve dynamic spectrum may become a laborious task given the amount of data involved. Convincing results may sometimes require the use of a large number of components, each of which requires independent amplitude, frequency and phase control. In <i>1104.orc</i> and <i>1104.sco</i> I present an example of dynamic spectrum synthesis realized with an instrument which employs six oscillators, each with variable amplitude and frequency. In addition, the output is spatialized. The amplitude and frequency of each component vary by a percentage specified respectively in <i>p8</i> and <i>p9</i>. These are translated into fractions using the following statements:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="478">			<tr>				<td width="12%" valign="top"><font face="Courier New">imaxaf</font></td>				<td width="6%" valign="top"><font face="Courier New">=</font></td>				<td width="16%" valign="top"><font face="Courier New">p8/100.00</font></td>				<td width="66%" valign="top"><font face="Courier New">; maximum amplitude fluctuation</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">imaxff</font></td>				<td width="6%" valign="top"><font face="Courier New">=</font></td>				<td width="16%" valign="top"><font face="Courier New">p9/100.00</font></td>				<td width="66%" valign="top"><font face="Courier New">; maximum frequency fluctuation</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman"><img src="figures/05.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.9 </b></font><font face="Times New Roman" size="2">Block diagram of a six component additive synthesis instrument with variable amplitude and frequency of each partial, plus a group envelope and panning.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">The implementation of each component takes account of these fluctuations by including time-varying controllers for amplitude and frequency. For example, the first component is implemented using the following set of statements:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="529">			<tr>				<td width="11%" valign="top"><font face="Courier New">iramp1</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="233" valign="top"><font face="Courier New">p10</font></td>				<td valign="top" colspan="2"><font face="Courier New">; relative amplitude</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">imaxaf1</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="233" valign="top"><font face="Courier New">iramp1*imaxaf</font></td>				<td valign="top" colspan="2"><font face="Courier New">; maximum amp fluctuation</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">iafunc1</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="233" valign="top"><font face="Courier New">p12</font></td>				<td valign="top" colspan="2"><font face="Courier New">; amplitude fluctuation fn</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ifreq1</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="233" valign="top"><font face="Courier New">p11*ifreq</font></td>				<td valign="top" colspan="2"><font face="Courier New">; frequency</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">imaxff1</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="233" valign="top"><font face="Courier New">ifreq1*imaxff</font></td>				<td valign="top" colspan="2"><font face="Courier New">; maximum freq fluctuation</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">iffunc1</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="233" valign="top"><font face="Courier New">p13</font></td>				<td valign="top" colspan="2"><font face="Courier New">; frequency fluctuation fn</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kampf1</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td width="233" valign="top"><font face="Courier New">0,imaxaf1,idur,iafunc1</font></td>				<td valign="top" colspan="2"><font face="Courier New">; Amplitude Control</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kfreqf1</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td width="233" valign="top"><font face="Courier New">0,imaxff1,idur,iffunc1</font></td>				<td valign="top" colspan="2"><font face="Courier New">; Frequency Control</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">a1</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">iramp1+kampf1, ifreq1+kfreqf1, 1</font></td>				<td width="41%" valign="top"><font face="Courier New">; oscillator</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.10 </b></font><font face="Times New Roman" size="2">Orchestra code for the first component of additive instrument shown in figure 11.9.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Amplitude fluctuation is controlled by <i>kampf1</i> according to a function table given by <i>iafunc1</i>. The maximum value of <i>kampf1</i> is <i>imaxaf1</i>, which is calculated as a fraction of <i>iramp1</i>, the relative amplitude of the component specified in the score. Therefore, adding <i>kampf1</i> to <i>iramp1</i> in the <a href="../../../references/manual_html/siggen/oscil.htm"><b>oscili</b></a><b> </b>statement means that the actual relative amplitude will fluctuate around <i>iramp1</i> depending on the shape of <i>iafunc1</i>. A similar procedure uses <i>kfreqf1</i> and <i>ifreqf1</i> to control the frequency of the component.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Components are mixed using the following statements:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="468">			<tr>				<td width="12%" valign="top"><font face="Courier New">iampsum</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="56%" valign="top"><font face="Courier New">iramp1+iramp2+iramp3+iramp4+iramp5+iramp6</font></td>				<td width="23%" valign="top"><font face="Courier New">; max amplitude</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">asig</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="56%" valign="top"><font face="Courier New">kenv*(a1+a2+a3+a4+a5+a6)/(iampsum)</font></td>				<td width="23%" valign="top"><font face="Courier New">; balanced mix</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">In order to spatialize the output, the number of channels is set to 2 in the header (<i>nchnls</i>= 2), an <a href="../../../references/manual_html/sigio/in.htm"><b>outs</b></a><b> </b>statement is used instead of <a href="../../../references/manual_html/sigio/in.htm"><b>out</b></a> and <i>asig</i> is multiplied by time-varying scaling factors <i>kpleft</i> and <i>kpright</i> before it is sent to the left and right channels:</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="11%" valign="top">&nbsp;</td>				<td width="10%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">outs</font></a></td>				<td width="39%" valign="top"><font face="Courier New">kpleft*asig, kpright*asig</font></td>				<td width="41%" valign="top"><font face="Courier New">; OUTPUT</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman"><i>kpleft</i> and <i>kpright</i> are calculated according to the following algorithm: if <i>kpan</i> is the instantaneous position along the line joining the speakers, <i>kpan </i>= -1 and <i>kpan </i>= 1 represent respectively the positions of the left and right speakers. Values between -1 and 1 represent positions between the speakers (<i>kpan </i>= 0 is the center). Values below -1 represent positions beyond the left speaker.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">If the source is between the speakers then:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq02.jpg" width="623" height="63"> (11.2)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">If the source is beyond the left speaker:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq03.jpg" width="623" height="63"> (11.3)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">If the source is beyond the right speaker:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq04.jpg" width="623" height="63"> (11.4)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The statement generates the spatial trajectory of the output:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="509">			<tr>				<td width="8%" valign="top"><font face="Courier New">kpan</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td width="38%" valign="top"><font face="Courier New">0, imaxpan, idur, ipanfunc</font></td>				<td width="42%" valign="top"><font face="Courier New">; panning trajectory</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">where <i>imaxpan</i> is 2 and <i>ipanfunc</i> (<i>p34</i>) is the function table determining the shape of the trajectory. Since there are different formulas for the position of the source, the instrument must check the value of <i>kpan</i> and decide which formula to apply using <a href="../../../references/manual_html/pgmctl/igoto.htm"><b>if</b></a> ... <a href="../../../references/manual_html/pgmctl/igoto.htm"><b>kgoto</b></a><b> </b>statements.</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="547">			<tr>				<td valign="top" colspan="3"><font face="Courier New">if kpan &lt; -1 kgoto beyondl</font></td>				<td width="38%" valign="top"><font face="Courier New">; chk pan beyond left spkr</font></td>			</tr>			<tr>				<td valign="top" colspan="3"><font face="Courier New">if kpan &gt;1 kgoto beyondr</font></td>				<td width="38%" valign="top"><font face="Courier New">; chck pan beyond right spkr</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">ktemp</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td width="27%" valign="top"><font face="Courier New">sqrt(1+kpan*kpan)</font></td>				<td width="38%" valign="top"><font face="Courier New">; pan between speakers</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kpleft</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">isr2b2*(1-kpan)/ktemp</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kpright</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">isr2b2*(1+kpan)/ktemp</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="23%" valign="top"><a href="../../../references/manual_html/pgmctl/igoto.htm"><font face="Courier New">kgoto</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">donepan</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">beyondl:</font></td>				<td width="23%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="27%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="38%" valign="top"><font face="Courier New">; pan beyond left speaker</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kpleft</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">2.0/(1+kpan*kpan)</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kpright</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">0</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="23%" valign="top"><a href="../../../references/manual_html/pgmctl/igoto.htm"><font face="Courier New">kgoto</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">donepan</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">beyondr:</font></td>				<td width="23%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="27%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="38%" valign="top"><font face="Courier New">; pan beyond right speaker</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kpleft</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">0</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kpright</font></td>				<td width="23%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">2.0/(1+kpan*kpan)</font></td>			</tr>			<tr>				<td valign="top" colspan="4"><font face="Courier New">donepan:</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.11 </b></font><font face="Times New Roman" size="2">Orchestra code excerpt for panning algorithm supporting both an equal-power pan and a wide-stereo effect.</font></p>		<h3>		<h3><font face="Times New Roman"><b>Summary</b></font></h3>		</h3>		<div align="justify">			<p><font face="Times New Roman">Additive synthesis may be used to create dynamic spectra. Each component requires the following parameters:<br>			</font></p>			<ul>				<p><font face="Times New Roman">1. Amplitude envelope.</font><font face="Times New Roman"><br>				2. Time-varying frequency.</font></p>			</ul>		</div>		<h2><font face="Times New Roman"><b>Subtractive Synthesis</b></font></h2>		<div align="justify">			<p><font face="Times New Roman">This is the counterpart of additive procedures. While the latter constructs spectra using single sinewaves in order to implement the equation, subtractive synthesis uses complex spectra as inputs which are shaped by enhancing or attenuating the component sinewaves, as illustrated in figure 11.12. Mathematically, this means that the values of <i>A<sub>i</sub></i> in equation 11.1 are modified.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The output depends on the choice of sources and the behavior of the filters. In fact, because of the power loss due to the attenuation of components, some type of amplification may be required after.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/09.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.12</b></font><font face="Times New Roman" size="2"> Block diagram of a basic subtractive synthesis system.</font></p>			<p><font face="Times New Roman">The main consideration regarding choice of sources is their spectral content. If we intend to process frequencies in a certain region of the spectrum, it is important to ensure that these frequencies exist in the source; otherwise there will be nothing to filter. For this reason, <i>noise</i> and <i>trains of pulses</i><b> </b>are frequently used, since they offer a uniform spread of components throughout the auditory range.</font></p>			<p><font face="Times New Roman">Ideal<i> white noise</i> is probably the richest available source. For practical purposes, it is possible to consider it as a signal that contains all frequencies evenly distributed throughout the auditory range. White noise is normally obtained using a generator that produces a random number every sample. The aural result is rather like a hiss.</font></p>			<p><font face="Times New Roman">An ideal <i>train </i>or <i>sequence </i>of<i> pulses</i> consists of a signal containing an infinite number of harmonics, all of which have the same relative amplitude. In practice, approximations of a pulse sequence may be obtained by combining as many harmonics as possible up to the upper threshold of the auditory range. It is also important to consider the limitations imposed by the sampling rate <b>sr</b> (according to the sampling theorem, the highest frequency sampled with <b>sr</b> must be less than <b>sr</b>/2). The file <i>1105.orc</i> consists of instruments that produce white noise and trains of pulses. For <i>instr 1105</i> a <a href="../../../references/manual_html/siggen/rand.htm"><b>rand</b></a><b> </b>generator is used to produce white noise as shown in figure 11.13.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/10.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.13 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1105</i>, a white noise generator.</font><font face="Times New Roman"><br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="16%" valign="top"><a href="../../instruments/11/1105/1105.html"><font face="Courier New">1105</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; env controlled white noise</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, p6, p3, p7</font></td>				<td width="42%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/rand.htm"><font face="Courier New">rand</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv</font></td>				<td width="42%" valign="top"><font face="Courier New">; noise source</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">asig</font></td>				<td width="42%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.14 </b></font><font face="Times New Roman" size="2">Orchestra code for<i> instr 1105</i>, an envelope controlled white noise instrument.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">For <i>instr 1106</i> a <a href="../../../references/manual_html/siggen/buzz.htm"><b>buzz</b></a><b> </b>is used<b> </b>to produce a train of pulses with as many harmonics as possible given the sampling rate (<b>sr</b>). If the frequency of the fundamental is <i>p5</i>, then the frequency of the <i>n</i>th harmonic is <i>n</i> times <i>p5</i>. This frequency must be less than <i>sr/2</i>; therefore, the maximum number of harmonics, <i>iinh</i>, must be equal or less than <i>sr/2/p5</i>. Since the number of harmonics must be an integer, the operator <a href="../../../references/manual_html/valcnv/int.htm"><b>int</b></a><b> </b>is used in order to calculate <i>iinh</i>. Figure 11.15 shows a block diagram of <i>instr 1106</i>.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/11.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.15 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1106</i>, a buzz (pulse train) instrument with an amplitude envelope.</font><font face="Times New Roman"><br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="517">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1106/1106.html"><font face="Courier New">1106</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; pulse train w/ amp env.</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">iinh</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><a href="../../../references/manual_html/valcnv/int.htm"><font face="Courier New">int</font></a><font face="Courier New">(sr/2/p5)</font></td>				<td width="42%" valign="top"><font face="Courier New">; maximum number of harmonics</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, p6, p3, p7</font></td>				<td width="42%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/buzz.htm"><font face="Courier New">buzz</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv, p5, iinh, 1</font></td>				<td width="42%" valign="top"><font face="Courier New">; oscillator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">asig</font></td>				<td width="42%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.16 </b></font><font face="Times New Roman" size="2">Orchestra code for <i>instr 1106</i>, a <a href="../../../references/manual_html/siggen/buzz.htm"><b>buzz</b></a> instrument with controls for the number of harmonics in the pulse-train.</font></p>		<div align="justify">			<p><font face="Times New Roman">The file <i>1105.sco</i> produces white noise (<i>instr 1105</i>) followed by a train-of-pulses (a pulse-train <i>instr 1106)</i> with a fundamental of 75 Hz.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Filters are characterized by their response, which represents the frequency regions they attenuate and enhance. Figure 11.17 shows the four ideal types of filters used in subtractive synthesis. These are classified as follows:</font></p>			<dir>				<p><font face="Times New Roman">1. Filters that only pass frequencies above a cut-off value <i>f<sub>c</sub></i>, or highpas<i>s</i>.</font><font face="Times New Roman"><br>				2. Filters which only pass frequencies below <i>f<sub>c</sub></i>, or lowpas<i>s</i>.</font><font face="Times New Roman"><br>				3. Filters which only pass components with frequencies inside a band above and below a <i>center frequency</i> <i>f<sub>c</sub></i>, or bandpass. The size in Hz of the bandpass is the <i>bandwidth</i> (bw).</font><font face="Times New Roman"><br>				4. Filters which only pass components with frequencies outside a band above and below a <i>center frequency</i> <i>f<sub>c</sub></i>, or bandreject.</font></p>			</dir>			<p><font face="Times New Roman"><img src="figures/12.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.17</b></font><font face="Times New Roman" size="2"> Ideal filter types. (a) Highpass. (b) Lowpass. (c) Bandpass. (d) Bandreject.<br>			</font></p>			<p><font face="Times New Roman">The four filter types shown in figure 11.17 represent ideal filters. In practice, the transition between pass and stop regions is not as sharp as in figure. Its slope is known as the <i>roll-off</i> and is measured in decibels per octave, which is the change in attenuation when the frequency is doubled. The fact that there is a slope means that the cut-off frequency must be re-defined as the value at which the attenuation is -3 dB, which is equivalent to a drop in amplitude by a factor of about 0.71.</font></p>			<p><font face="Times New Roman">In order to achieve sharper responses, filters may be <i>cascaded</i> by using the output of one filter as the input of another. Filters may also be connected in <i>parallel</i>, with two or more filters sharing the same input and having their outputs mixed into one signal; thus achieving complex response curves. Cascade and parallel connections are shown in figure 11.18.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/13.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.18</b></font><font face="Times New Roman" size="2"> Filter connections. (a) Cascade. (b) Parallel.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">We have seen above that in order to achieve a dynamic spectrum it is necessary to vary the amplitudes and frequencies of components in time. Linear filters cannot alter the frequencies of the components of a source; however, they can change their amplitudes. This may be done by varying the cut-off frequency in low and highpass filters and by varying the center frequency and bandwidth in bandpass and bandreject filters.</font></p>			<p><font face="Times New Roman">As an example, the files <i>1107.orc</i> and <i>1107.sco</i> produce sounds resembling vowel articulation by modeling the mechanism driving the vocal chords: a rich pulse (maximum possible harmonics) is passed through five parallel bandpass filters.<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/14.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.19 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1107, </i>a parallel, pseudo-random, formant-filter instrument.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Their center frequency and bandwidth fluctuate randomly in the vicinity of values corresponding to the filtering processes in human speech. The rate at which the random numbers are generated is varied between a minimum <i>(irfmin</i>) and a maximum <i>(p9</i>), according to the control variable <i>krfl</i>:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="468">			<tr>				<td width="13%" valign="top"><font face="Courier New">irfmin</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p8</font></td>				<td width="41%" valign="top"><font face="Courier New">; minimum random rate</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">itfl</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p9-p8</font></td>				<td width="41%" valign="top"><font face="Courier New">; maximum fluctuation</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">irfunc</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">2</font></td>				<td width="41%" valign="top"><font face="Courier New">; fluctuation function</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="3"><font face="Courier New"><b>...</b></font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="3"><font face="Courier New"><b>...</b></font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">krand</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1i</font></a></td>				<td width="35%" valign="top"><font face="Courier New">0, .5, idur, irfunc</font></td>				<td width="41%" valign="top"><font face="Courier New">; oscil between -.5 and .5</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">krand</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">krand+.5</font></td>				<td width="41%" valign="top"><font face="Courier New">; correct between 0 and 1</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">krfl</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">irfmin+irfl*krand</font></td>				<td width="41%" valign="top"><font face="Courier New">; RATE of RANDOM GENERATORS</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Each filter uses a <a href="../../../references/manual_html/siggen/rand.htm"><b>randi</b></a><b> </b>generator in order to produce center frequency and bandwidth fluctuations. For example, the first formant is controlled by <i>k1</i>, which is multiplied by the maximum center frequency fluctuation, <i>if1cff</i> and added to a minimum center frequency <i>if1cf</i>. The bandwidth is controlled similarly:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="468">			<tr>				<td width="13%" valign="top"><font face="Courier New">k1</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/rand.htm"><font face="Courier New">randi</font></a></td>				<td width="40%" valign="top"><font face="Courier New">1, krfl, .12</font></td>				<td width="36%" valign="top"><font face="Courier New">; random generator </font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="3"><font face="Courier New"><b>...</b></font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="12%" valign="top"><font face="Courier New"><b>...</b></font></td>				<td width="40%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="36%" valign="top"><font face="Courier New">; first formant</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">afilt1</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigmod/port.htm"><font face="Courier New">reson</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">apulse, if1cf+k1*if1cff, if1bw*(1+k1), 0</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The input to the formant filter is <i>apulse</i>, a train of pulses generated using <a href="../../../references/manual_html/siggen/buzz.htm"><b>buzz</b></a>. Its fundamental frequency is made to fluctuate by up to 1/5 of its value. This process is controlled by <i>krand</i>, which is scaled by <i>iffl</i> &#151; the maximum frequency fluctuation and added to <i>ifreq</i> &#151; the minimum frequency value, to produce <i>kfrnd</i>, the frequency input to the pulse generator:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="522">			<tr>				<td width="11%" valign="top"><font face="Courier New">ifreq</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p5</font></td>				<td width="44%" valign="top"><font face="Courier New">; frequency of fundamental</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">iffl</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p5/5</font></td>				<td width="44%" valign="top"><font face="Courier New">; maximum frequency fluctuation</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">iinh</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><a href="../../../references/manual_html/valcnv/int.htm"><font face="Courier New">int</font></a><font face="Courier New">(sr/2/(p5+iffl))</font></td>				<td width="44%" valign="top"><font face="Courier New">; maximum number of harmonics</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">iplfunc</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">1</font></td>				<td width="44%" valign="top"><font face="Courier New">; function table for BUZZ (sine)</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="3"><font face="Courier New"><b>...</b></font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="3"><font face="Courier New"><b>...</b></font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kfrnd</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">ifreq+iffl*krand</font></td>				<td width="44%" valign="top"><font face="Courier New">; frequency fluctuation</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">apulse</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/buzz.htm"><font face="Courier New">buzz</font></a></td>				<td width="35%" valign="top"><font face="Courier New">1, kfrnd, iinh, iplfunc</font></td>				<td width="44%" valign="top"><font face="Courier New">; pulse generator</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.20</b></font><font face="Times New Roman" size="2"> Orchestra code excerpt from <i>instr 1107, </i>a pulse-train generator with fluctuating frequency.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Finally, the filtered pulses are mixed, balanced with a sinewave and sent to the output:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="553">			<tr>				<td width="9%" valign="top"><font face="Courier New">afilt</font></td>				<td width="14%" valign="top"><font face="Courier New">=</font></td>				<td width="45%" valign="top"><font face="Courier New">afilt1+afilt2+afilt3+afilt4+afilt5</font></td>				<td width="32%" valign="top"><font face="Courier New">; mix filtr out</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">abal</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="45%" valign="top"><font face="Courier New">1, ifreq, iplfunc</font></td>				<td width="32%" valign="top"><font face="Courier New">; sinewave control sig</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">asig</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">balance</font></a></td>				<td width="45%" valign="top"><font face="Courier New">afilt, abal</font></td>				<td width="32%" valign="top"><font face="Courier New">; output balance</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv*asig </font></td>			</tr>		</table>		</font></p>		<h3><font face="Times New Roman"><b>Summary</b></font></h3>		<div align="justify">			<p><font face="Times New Roman">There are three important factors that must be considered in order to obtain dynamic spectra using subtractive procedures:</font></p>			<ul>				<p><font face="Times New Roman">1. Choice of source (may be time varying). White noise or a pulse-train are commonly used.</font><font face="Times New Roman"><br>				2. Time varying filters.</font><font face="Times New Roman"><br>				3. Output balance.<br>				</font></p>			</ul>		</div>		<h2><font face="Times New Roman"><b>Ring Modulation</b></font></h2>		<div align="justify">			<p><font face="Times New Roman">This non-linear technique consists of the use of a signal, the <i>modulator</i>, used to modify the amplitude of another signal, the <i>carrier</i>. Each sample of the modulator multiplies a corresponding sample of the carrier, distorting the latter and creating new spectral components.</font></p>			<p><font face="Times New Roman">The simplest case of amplitude modulation is that of a sinewave which multiplies another sinewave. If the frequencies of the carrier and modulator are, respectively, <i>f<sub>m</sub></i> and <i>f<sub>c</sub></i>, the output is:</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq05.jpg" width="571" height="51">(11.5)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">But, from the trigonometric identity for the product of two sines, we have:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq06.jpg" width="428" height="43"> (11.6)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The equation above represents a spectrum containing two components with frequencies <i>f<sub>c</sub>+f<sub>m</sub></i><sub> </sub>and <i>f<sub>c</sub>-f<sub>m</sub></i>. These are called <i>sidebands</i>, because they appear on both sides of the carrier, as shown in figure 11.21.</font></p>			<p><font face="Times New Roman">The modulation process requires caution. In the first place, it is important to ensure that <i>f<sub>c</sub>+f<sub>m</sub></i> does not exceed half of the <i>sampling rate</i> (<b>sr</b><i>/2</i>) in order to comply with the sampling theorem, avoiding <i>aliasing</i>, which causes frequencies over <b>sr</b><i>/2</i> to reflect, appearing to be lower, thus assuming a different spectral &#145;identity.&#146; Secondly, if <i>f<sub>c</sub></i> and <i>f<sub>m</sub></i> are very close, their difference may be below the auditory range; this occurs when <i>f<sub>c</sub>-f<sub>m</sub></i> is below about 20 Hz. If <i>f<sub>c</sub></i> is larger than <i>f<sub>m</sub></i>, the difference will be a negative number. But from the identity:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq07.jpg" width="523" height="32"> (11.7)<br>		</font></p>		<p><font face="Times New Roman">We can infer that only the absolute value of the difference is important and that the sign can be ignored. In other words, a negative frequency reflects as a positive one.<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman"><img src="figures/18.gif"></font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.21 </b></font><font face="Times New Roman" size="2">Spectrum of simple amplitude modulation</font><font face="Times New Roman">.<br>			</font></p>			<p><font face="Times New Roman">A simple implementation of an amplitude modulator consists of two oscillators, a carrier and a modulator, which have their outputs multiplied:<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/19.gif"></font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.22 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1109</i>, an amplitude modulation instrument with amplitude envelope</font><font face="Times New Roman">.<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1109/1109.html"><font face="Courier New">1109</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; simple AM</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, p6, p3, p7</font></td>				<td width="42%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">acarr</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">1, p5, p9</font></td>				<td width="42%" valign="top"><font face="Courier New">; carrier</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">amod</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">1, p8, p9</font></td>				<td width="42%" valign="top"><font face="Courier New">; modulator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">acarr*amod</font></td>				<td width="42%" valign="top"><font face="Courier New">; modulation</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv*asig</font></td>				<td width="42%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.23 </b></font><font face="Times New Roman" size="2">Orchestra code for <i>instr 1109</i>, the amplitude modulation instrument shown in figure 11.22.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The effects of modulation using sinewaves are shown in <i>1109.orc</i> and <i>1109.sco</i>. The orchestra consists of two instruments: <i>instr 1108</i> is identical to <i>instr 1101</i> and is used to produce separate pairs of sinewaves. Whereas <i>instr 1109</i> is used to carry out the amplitude modulation by multiplying the sinewaves. The score produces pairs followed by their product, in the following order:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table border="0" cellspacing="1" width="470">			<tr>				<td valign="top" colspan="2"><font face="Courier New"><b>Sinewave Pair</b></font></td>				<td valign="top" colspan="2"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2"><font face="Courier New"><b>Modulated Output</b></font></td>			</tr>			<tr>				<td width="21%" valign="top"><font face="Courier New"><i>Carrier (Hz)</i></font></td>				<td valign="top" colspan="2"><font face="Courier New"><i>Modulator (Hz)</i></font></td>				<td width="9%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="11%" valign="top"><font face="Courier New"><i>f<sub>c</sub>+f<sub>m</sub></i></font></td>				<td width="37%" valign="top"><font face="Courier New"><i>f<sub>c</sub>-f<sub>m</sub></i></font></td>			</tr>			<tr>				<td width="21%" valign="top"><font face="Courier New">400</font></td>				<td valign="top" colspan="2"><font face="Courier New">10</font></td>				<td width="9%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="11%" valign="top"><font face="Courier New">410</font></td>				<td width="37%" valign="top"><font face="Courier New">390</font></td>			</tr>			<tr>				<td width="21%" valign="top"><font face="Courier New">400</font></td>				<td valign="top" colspan="2"><font face="Courier New">170</font></td>				<td width="9%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="11%" valign="top"><font face="Courier New">570</font></td>				<td width="37%" valign="top"><font face="Courier New">230</font></td>			</tr>			<tr>				<td width="21%" valign="top"><font face="Courier New">400</font></td>				<td valign="top" colspan="2"><font face="Courier New">385</font></td>				<td width="9%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="11%" valign="top"><font face="Courier New">785</font></td>				<td width="37%" valign="top"><font face="Courier New">15</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.24</b></font><font face="Times New Roman" size="2"> Table of amplitude modulated input signals and output results.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">It is worth noticing that the 10 Hz modulator of the first pair is inaudible; however, its effect on the 400 Hz carrier results in two distinct sidebands in the auditory range. Furthermore, the third pair produces a difference sideband of 15 Hz. Therefore, only the 785 Hz component is perceived.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The process above can be extended to signals with several components. For example, the modulator may consist of three frequencies, <i>f<sub>m1</sub></i>, <i>f<sub>m2</sub></i> and <i>f<sub>m3</sub></i>. Each of these can be considered individually when the modulator is applied to a carrier <i>f<sub>c</sub></i>, as illustrated in figure 11.25. Therefore, the output consists of the following pairs:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="34%" valign="top">					<div align="justify">						<font face="Courier New"><i>f<sub>c</sub></i></font><font face="Courier New"> + <i>f<sub>m1</sub></i> and <i>f<sub>c</sub></i> - <i>f<sub>m1</sub></i></font></div>				</td>				<td width="34%" valign="top">					<div align="justify">						<font face="Courier New"><i>f<sub>c</sub></i></font><font face="Courier New"> + <i>f<sub>m2</sub></i> and <i>f<sub>c</sub></i> - <i>f<sub>m2</sub></i></font></div>				</td>				<td width="33%" valign="top">					<div align="justify">						<font face="Courier New"><i>f<sub>c</sub> + f<sub>m3</sub></i> and <i>f<sub>c</sub> - f<sub>m3</sub></i></font></div>				</td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman"><img src="figures/20.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.25</b></font><font face="Times New Roman" size="2"> Modulator with 3 components.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">The file <i>1110.orc</i> consists of <i>instr 1110</i>, a modified version of <i>instr 1109</i> which allows use of different function tables for both carrier and modulator (the function for the carrier is given in <i>p9</i> and that for the modulator in <i>p10</i>). The file <i>1110.sco</i> includes two ring-modulation processes. In the first, a 110 Hz signal with 5 harmonics modulates a 440 Hz carrier. In the second, the same carrier (440 Hz) is modulated with a 134 Hz signal. When synthesized, it is immediately apparent that the first sound is pitched while the second is not. This can be explained by inspection of the output frequencies. The components of the first modulator are 110, 220, 330, 440 and 550 Hz. In the second case, they are 134, 268, 402, 536 and 670 Hz; therefore the components of the respective outputs can be calculated as follows:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table border="0" cellspacing="1" cellpadding="1" width="619">			<tr>				<td valign="top" colspan="4"><font face="Courier New"><b>Carrier: 440 Hz - Modulator: 110 Hz</b></font></td>				<td valign="top" colspan="4"><font face="Courier New"><b>Carrier: 440 Hz - Modulator: 134 Hz</b></font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">440+110</font></td>				<td width="12%" valign="top"><font face="Courier New">= 550</font></td>				<td width="10%" valign="top"><font face="Courier New">440-110</font></td>				<td width="13%" valign="top"><font face="Courier New">= 330</font></td>				<td valign="top"><font face="Courier New">440+134</font></td>				<td width="12%" valign="top"><font face="Courier New">= 574</font></td>				<td width="10%" valign="top"><font face="Courier New">440-134</font></td>				<td width="18%" valign="top"><font face="Courier New">= 306 </font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">440+220</font></td>				<td width="12%" valign="top"><font face="Courier New">= 660</font></td>				<td width="10%" valign="top"><font face="Courier New">440-220</font></td>				<td width="13%" valign="top"><font face="Courier New">= 220</font></td>				<td valign="top"><font face="Courier New">440+268</font></td>				<td width="12%" valign="top"><font face="Courier New">= 708</font></td>				<td width="10%" valign="top"><font face="Courier New">440-268</font></td>				<td width="18%" valign="top"><font face="Courier New">= 172</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">440+330</font></td>				<td width="12%" valign="top"><font face="Courier New">= 770</font></td>				<td width="10%" valign="top"><font face="Courier New">440-330</font></td>				<td width="13%" valign="top"><font face="Courier New">= 110</font></td>				<td valign="top"><font face="Courier New">440+402</font></td>				<td width="12%" valign="top"><font face="Courier New">= 842</font></td>				<td width="10%" valign="top"><font face="Courier New">440-402</font></td>				<td width="18%" valign="top"><font face="Courier New">= 38</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">440+440</font></td>				<td width="12%" valign="top"><font face="Courier New">= 880</font></td>				<td width="10%" valign="top"><font face="Courier New">440-440</font></td>				<td width="13%" valign="top"><font face="Courier New">= 0</font></td>				<td valign="top"><font face="Courier New">440+536</font></td>				<td width="12%" valign="top"><font face="Courier New">= 976</font></td>				<td width="10%" valign="top"><font face="Courier New">440-536</font></td>				<td width="18%" valign="top"><font face="Courier New">= -96</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">440+550</font></td>				<td width="12%" valign="top"><font face="Courier New">= 990</font></td>				<td width="10%" valign="top"><font face="Courier New">440-550</font></td>				<td width="13%" valign="top"><font face="Courier New">= -110</font></td>				<td valign="top"><font face="Courier New">440+670</font></td>				<td width="12%" valign="top"><font face="Courier New">= 1110</font></td>				<td width="10%" valign="top"><font face="Courier New">440-670</font></td>				<td width="18%" valign="top"><font face="Courier New">= -230</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.26</b></font><font face="Times New Roman" size="2"> Tables evaluating result of amplitude modulating a complex source, consisting of five harmonics, with a 110 Hz sine wave and a 134 Hz sine wave<b>.</b></font><font face="Times New Roman"><b><br>		</b></font></p>		<div align="justify">			<p><font face="Times New Roman">The output of the first sound has the following components; 0 (not heard), 110, 220, 330, 550, 660, 770, 880 and 990 Hz, which produce a harmonic series having a definite pitch. On the other hand, the second output is composed of 38, 96, 172, 230, 306, 574, 708, 842, 976 and 1110 Hz, which produce an inharmonic spectrum.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The example above shows that it is possible to predict harmonicity when the frequencies of carrier and modulator components are known. However, this may be a laborious task when using complex modulators. Obviously, if the modulator is an inharmonic signal, the output will also be inharmonic. If the modulator is harmonic, it is enough to check the result of dividing the carrier by the modulator, called the <i>carrier to modulator ratio</i>, or the <i>c/m </i>ratio. If <i>c/m </i>is an integer, then the carrier is a multiple of the modulator and subtracting or adding the later to <i>f<sub>c</sub></i> will create another multiple. Therefore, all the frequencies will be multiples of <i>f<sub>m</sub></i>, which will effectively become the fundamental. Similarly, if <i>c/m</i> is of the form 1/n, where n is an integer, the modulator is a multiple of the carrier and, as a consequence, the output frequencies will also be multiples of <i>f<sub>c</sub></i>. When <i>c/m</i> deviates from an n/1 or 1/n ratio, the output frequencies become more and more inharmonic. Small deviations (e.g. 1.001) will still produce pitched sounds because the output components will be close to actual harmonic values. In fact, these small deviations produce beating, which may add some liveliness. The effect of the carrier to modulator ratio is shown in <i>1110a.orc</i> and <i>1110a.sco</i>. The orchestra consists of <i>instr 10</i> (described above) and the score contains the following:<br>			</font></p>			<ul>				<p><font face="Times New Roman">1. Hz carrier, 8 harmonic modulator with 300 Hz fundamental (c/m=1).</font><font face="Times New Roman"><br>				2. Hz carrier, 8 harmonic modulator with 297.03 Hz fundamental (c/m=1.01).</font><font face="Times New Roman"><br>				3. Hz sine carrier, 8 harmonic modulator, 212.13 Hz fundamental (c/m=1.4142~<img src="figures/21.jpg" width="22" height="17">).<br>				</font></p>			</ul>			<p><font face="Times New Roman">Ring modulation can also be used to produce dynamic spectrum. The morphology of the resulting sound can be controlled through the following parameters:</font></p>			<ul>				<p><font face="Times New Roman">1. Duration.</font><font face="Times New Roman"><br>				2. Overall amplitude.</font><font face="Times New Roman"><br>				3. Frequency of the carrier.</font><font face="Times New Roman"><br>				4. Carrier to modulator ratio, which also determines the modulator frequency from the frequency of the carrier.</font><font face="Times New Roman"><br>				5. Fraction of the carrier which is actually modulated (a small percentage will produce less noticeable distortion).<br>				</font></p>			</ul>		</div>		<div align="left">			<p><font face="Times New Roman">The file <i>1111.orc</i> contains an instrument that implements time varying: amplitude, carrier-frequency, carrier-to-modulator ratio and modulation-fraction using control variables <i>kamp</i>, <i>kcar</i>, <i>kcmr</i> and <i>kmp</i>.<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/22.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.27 </b></font><font face="Times New Roman" size="2">Block diagram of <i>instr 1111</i>, a dynamic Ring-modulation instrument.</font><font face="Times New Roman"><br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1111/1111.html"><font face="Courier New">1111</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; ring modulation</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ifr</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="3"><a href="../../../references/manual_html/pchcnv/octpch.htm"><font face="Courier New">cpspch</font></a><font face="Courier New">(p5)</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2"><font face="Courier New">&nbsp;</font></td>				<td width="42%" valign="top"><font face="Courier New">; ENVELOPES</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kamp</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, p4, p3, p7</font></td>				<td width="42%" valign="top"><font face="Courier New">; amplitude</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kcar</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, ifr, p3, p8</font></td>				<td width="42%" valign="top"><font face="Courier New">; carrier freq</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kcmr</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, p6, p3, p9</font></td>				<td width="42%" valign="top"><font face="Courier New">; c/m</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kmp</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, 1, p3, p10</font></td>				<td width="42%" valign="top"><font face="Courier New">; modulation fraction</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2"><font face="Courier New">&nbsp;</font></td>				<td width="42%" valign="top"><font face="Courier New">; MODULATION</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">acarr</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">1, kcar, 10</font></td>				<td width="42%" valign="top"><font face="Courier New">; carrier</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">amod</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">1, kcar/kcmr, 11</font></td>				<td width="42%" valign="top"><font face="Courier New">; modulator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aoutm</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">acarr*amod*kmp</font></td>				<td width="42%" valign="top"><font face="Courier New">; modulated signal</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aoutnm</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">acarr*(1-kmp)</font></td>				<td width="42%" valign="top"><font face="Courier New">; unmodulated signal</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="2"><font face="Courier New">&nbsp;</font></td>				<td width="42%" valign="top"><font face="Courier New">; MIX AND OUTPUT</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="3"><font face="Courier New">kamp*(aoutm+aoutnm)</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.28 </b></font><font face="Times New Roman" size="2">Orchestra code for <i>instr 1111</i>, a dynamic Ring-modulation instrument with time varying: amplitude, carrier frequency, modulating frequency and modulation ratio.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The functions given by <i>p7</i>, <i>p8</i>,<i> p9</i> and <i>p10</i> are fed to control oscillators. The output of the first one, <i>kamp</i>, determines the envelope, with a peak value of <i>p4</i>. The second controls the carrier frequency that can be as high as <i>p5</i>. The third, <i>kcmr</i>, controls the carrier-to-modulator ratio which can reach a maximum of <i>p6</i>. The frequency of the modulator is the product of the carrier-frequency and the carrier-to-modulator ratio.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">In order to modulate only part of the carrier, <i>kmp</i> multiplies the modulated carrier <i>acarr*amod</i>, producing <i>aoutm</i> and <i>1-kmp</i> multiplies the unmodulated carrier, <i>acarr</i>, producing <i>aoutnm</i>. Modulated and unmodulated signals are then mixed and enveloped to produce <i>aout</i>.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The file <i>1111.sco</i> consists of a short musical excerpt that demonstrates some of the possible sonorities obtainable with <i>instr 1111</i>. It takes advantage of the fact that all the control variables use oscil1, which means that the same function may produce a sharp attack in a very short sound, becoming smeared as the sound becomes longer. This is exactly what happens during the first five beats in the score. Furthermore, the maximum carrier-to-modulator ratio may be altered in the score to produce different timbral shades. This is the case with the fast percussive sounds between beat 5.5 and beat 12.</font></p>		</div>		<h3><font face="Times New Roman"><b>Summary</b></font></h3>		<div align="justify">			<p><font face="Times New Roman">The following parameters may be controlled in order to produce diverse sonorities using ring-modulation:<br>			</font></p>			<ul>				<p><font face="Times New Roman">1. Duration.</font><font face="Times New Roman"><br>				2. Overall amplitude.</font><font face="Times New Roman"><br>				3. Frequency of the carrier.</font><font face="Times New Roman"><br>				4. Carrier-to-modulator ratio.</font><font face="Times New Roman"><br>				5. Fraction of the carrier which is actually modulated.<br>				</font></p>			</ul>		</div>		<h2><font face="Times New Roman"><b>Waveshaping</b></font></h2>		<div align="justify">			<p><font face="Times New Roman">Another way of producing distortion consists of the creation of a dependency between the amplification applied to a sample and its actual value. <a name="waveshaping"></a>As you now, at 16 bit, a sample may assume values between 2<sup>16 </sup>= -32,768 and 2<sup>16</sup>-1 = 32,767. So for example, samples with absolute values,<sup> </sup>under 20,000 may be multiplied by a factor of 1 whereas samples over 20,000 may be multiplied by 0.5; producing compression of the louder parts of a signal, as shown in the following figure:<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/23.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.29</b></font><font face="Times New Roman" size="2"> The waveshaping process</font><font face="Times New Roman">.<br>			</font></p>			<p><font face="Times New Roman">This type of dependency effectively maps the set of possible input values onto a set of output values by means of a <i>transfer function</i>. The general waveshaping process is illustrated in figure 11.30.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/24.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.30 </b></font><font face="Times New Roman" size="2">Waveshaping of a sinusoidal waveform.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">Waveshaping may produce various degrees of distortion depending on the chosen transfer function. If the latter approximates a linear device, the effect will not be as pronounced as with more extreme functions. Furthermore, the input may be a fairly simple signal; even sinewaves may be used effectively in order to produce reasonably complex spectra.</font></p>			<p><font face="Times New Roman">A transfer function may be implemented in Csound using the <a href="../../../references/manual_html/siggen/table.htm"><b>table</b></a><b> </b>statement, where the value of a sample is used as the index of the function table as shown in the following block diagram and instrument.<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/25.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.31</b></font><font face="Times New Roman" size="2"> Block diagram of <i>instr 1112</i>, a simple waveshaping instrument.</font><font face="Times New Roman"><br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="477">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="12%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1112/1112.html"><font face="Courier New">1112</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; simple waveshaping</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ioffset</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">ftlen(p9)/2-1</font></td>				<td width="42%" valign="top"><font face="Courier New">; offset</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, p6, p3, p7</font></td>				<td width="42%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ain</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">ioffset, p5, p8</font></td>				<td width="42%" valign="top"><font face="Courier New">; input </font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">awsh</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">ain, p9, 0, ioffset</font></td>				<td width="42%" valign="top"><font face="Courier New">; waveshaping value</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv*awsh</font></td>				<td width="42%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.32 </b></font><font face="Times New Roman" size="2">Orchestra code for <i>instr 1112</i>, a simple waveshaping instrument.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The waveshaping table in <i>instr 1112</i> processes the signal <i>ain</i>. Since the latter can be positive or negative, the upper half of the table processes the positive samples and the lower half the negative ones. Therefore the offset needs to point to the middle of the table. Since the samples are numbered from 0 to the size of the table minus 1, the value of the offset should be half of the table-size minus 1. The table is given by <i>p9</i> and its size is <i>ftlen(p9)</i>.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">To further clarify the wide range of waveshaping possibilities, figure 11.33 illustrates the waveshaping of a sinewave with a variety of simple and complex transfer functions.<br>			</font></p>			<p><font face="Times New Roman"><img height="266" width="373" src="figures/33.jpg"></font></p>		</div>		<p><font face="Times New Roman" size="2"><b>Figure 11.33</b></font><font face="Times New Roman" size="2"> Waveshaping a sinusoid with a variety of simple and complex transfer functions.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The files <i>1112.orc</i> and <i>1112.sco</i> make use of <i>instr 1112</i> in order to demonstrate the difference between near-linear and heavy non-linear processing. Here a sinewave processed by a linear device is heard first (<i>f 2)</i>, followed by two waveshaped versions of itself using function <i>f 3 </i>and <i>f 4</i>. The transfer function implementing the linear device is:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="8%" valign="top"><font face="Courier New">f 2</font></td>				<td width="4%" valign="top"><font face="Courier New">0</font></td>				<td width="11%" valign="top"><font face="Courier New">8192</font></td>				<td width="4%" valign="top"><font face="Courier New">7</font></td>				<td width="74%" valign="top"><font face="Courier New">-1 8192 1</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">The transfer functions implementing the non-linear devices are:<br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="8%" valign="top"><font face="Courier New">f 3</font></td>				<td width="4%" valign="top"><font face="Courier New">0</font></td>				<td width="11%" valign="top"><font face="Courier New">8192</font></td>				<td width="3%" valign="top"><font face="Courier New">9</font></td>				<td width="74%" valign="top"><font face="Courier New">0.5 1 270</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">f 4</font></td>				<td width="4%" valign="top"><font face="Courier New">0</font></td>				<td width="11%" valign="top"><font face="Courier New">8192</font></td>				<td width="3%" valign="top"><font face="Courier New">7</font></td>				<td width="74%" valign="top"><font face="Courier New">-1 2048 -1 0 0.3 2048 0 -0.5 2048 0 0 0.8 2048 0.8</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.34</b></font><font face="Times New Roman" size="2"> Transfer functions for waveshaping.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">In general, it is desirable and useful to be able to predict the frequency content of the output in order to control the result of a waveshaping process. It is wise to avoid transfer functions which contain leaps - such as that shown in figure 11.33 above, since these may produce frequencies above half the sampling rate. Instead, smooth functions, which involve relatively simple procedures when evaluating the spectral content of the output, may be used. A family of functions which fits this requirement is the set of polynomials, since, when using a sine for input, the frequency of the highest component produced will be equal to the frequency of the input multiplied by the degree of the polynomial (i.e. the value of its highest power). This may be illustrated by means of an example:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq08.jpg" width="568" height="31"> (11.8)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">If the polynomial of the third degree is used as a transfer function that is fed a sinusoidal input of frequency <i>f</i>, we should expect the highest frequency in the output to be 3<i>f</i>. Replacing a sinewave of frequency <i>f</i>, using the trigonometric identity for the sine of three times an angle and performing some algebraic manipulation, we obtain:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq09.jpg" width="568" height="31"> (11.9)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">As expected, the highest frequency, <i>3f</i>, appears in the second term. A further refinement is provided by a family of polynomials that produce a specific harmonic of a sinewave, known as <i>Chebyshev</i> polynomials. The first four Chebyshev polynomials of the first kind are shown below:<br>			</font></p>			<ul>				<p><font face="Courier New">T<sub>0</sub>(x) = 1 the output is a 0 Hz frequency (DC component).<br>				T<sub>1</sub>(x) = x the output is equal to the input sinewave.<br>				T<sub>2</sub>(x) = 1-2x<sup>2</sup> the output is the second harmonic of the input.<br>				T<sub>3</sub>(x) = 4x<sup>3</sup>-3x the output is the third harmonic of the input.</font></p>			</ul>		</div>		<p><font face="Times New Roman" size="2"><b>Figure 11.35</b></font><font face="Times New Roman" size="2"> The first four Chebyshev polynomials of the first kind.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">It is easy to check that these produce the desired harmonics by replacing sin(<img height="16" width="16" src="figures/2pi.jpg"></font><font face="Times New Roman" size="5"><i>ft</i></font><font face="Times New Roman">) instead of <i>x</i> in any of the polynomials above. And with the aid of Chebyshev polynomials, it is possible to achieve any combination of harmonics, each with a specified relative amplitude. For instance, if the following combination is required:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table border="0" cellspacing="1" width="472">			<tr>				<td width="25%" valign="top"><font face="Courier New"><b>Harmonic</b></font></td>				<td width="75%" valign="top"><font face="Courier New"><b>Relative Amplitude</b></font></td>			</tr>			<tr>				<td width="25%" valign="top"><font face="Courier New">fundamental</font></td>				<td width="75%" valign="top"><font face="Courier New">0.8</font></td>			</tr>			<tr>				<td width="25%" valign="top"><font face="Courier New">3</font></td>				<td width="75%" valign="top"><font face="Courier New">1</font></td>			</tr>			<tr>				<td width="25%" valign="top"><font face="Courier New">7</font></td>				<td width="75%" valign="top"><font face="Courier New">0.67</font></td>			</tr>			<tr>				<td width="25%" valign="top"><font face="Courier New">8</font></td>				<td width="75%" valign="top"><font face="Courier New">0.5</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.36</b></font><font face="Times New Roman" size="2"> Table of user specified harmonic number and relative amplitudes.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The transfer function will be:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq10.jpg" width="568" height="31"> (11.10)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">So far, the input has consisted of sinusoidals with an amplitude of 1. If the former is multiplied by an amplitude factor <i>K</i>, normalized between 0 and 1, the relative amplitude of the harmonics will be affected. Feeding this type of input to the waveshaper in our equation by using the identity for the sine of 3 times an angle and rearranging terms, will result in the following output:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq11.jpg" width="568" height="31"> (11.11)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Different values of <i>K</i> will produce different relative amplitudes of the fundamental <i>f</i> and the third harmonic <i>3f</i>. For example, if <i>K </i>= 0.1, the amplitude of the third harmonic is 0.001 and that of the fundamental is 0.097, a ratio of 1/97. However, when <i>K </i>= 1, the amplitude of the third harmonic is 1 and that of the fundamental is 2.9, a ratio of about 1/3. Therefore, changing the value of <i>K</i> makes the third harmonic more prominent.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">In general, varying the value of <i>K</i> influences the presence of higher harmonics and with it, the amount of distortion applied to a signal. For this reason, <i>K</i> is called the <i>distortion index</i>. This suggests a relatively simple way of obtaining dynamic spectra, which consist of varying the amplitude of the input by means of an envelope before it is passed through a waveshaper. In other words, <i>K</i> may become a function of time.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Finally, it is important to realize that the role of the distortion index has a shortcoming: in order to use the full range of a waveshaper, the input envelope must cover a wide dynamic range. This could result in very loud passages next to very quiet ones which may require post-processing amplification.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The relationship between the amplitude of a signal and its harmonic content makes waveshaping very suitable for synthesis of brass-like instruments, which are a class characterized in part by the prominence of high components when the overall amplitude increases. The files <i>1113.orc</i> and <i>1113.sco</i> produce a short brass-like fanfare using the following instrument.<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/31.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.37</b></font><font face="Times New Roman" size="2"> Block diagram of <i>instr 1113</i>, a dynamic waveshaping instrument.</font><font face="Times New Roman"><br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="617">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="12%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1113/1113.html"><font face="Courier New">1113</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; a dual waveshaping</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ifr</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><a href="../../../references/manual_html/pchcnv/octpch.htm"><font face="Courier New">cpspch</font></a><font face="Courier New">(p5)</font></td>				<td width="40%" valign="top"><font face="Courier New">; pitch to freq</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ioffset</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">.5</font></td>				<td width="40%" valign="top"><font face="Courier New">; offset</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ibeatfb</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">1.01*ifr</font></td>				<td width="40%" valign="top"><font face="Courier New">; begin value of beating freq</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ibeatff</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">0.99*ifr</font></td>				<td width="40%" valign="top"><font face="Courier New">; final value of beating freq</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">inobeat</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">0.8</font></td>				<td width="40%" valign="top"><font face="Courier New">; proportn non-beating oscil</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ibeat</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><font face="Courier New">0.2</font></td>				<td width="40%" valign="top"><font face="Courier New">; proportn beating oscil</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1i</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, 1, p3, p8</font></td>				<td width="40%" valign="top"><font face="Courier New">; envelope (distortion index)</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kfreq2</font></td>				<td width="12%" valign="top"><font face="Courier New">line</font></td>				<td valign="top" colspan="2"><font face="Courier New">ibeatfb, p3, ibeatff</font></td>				<td width="40%" valign="top"><font face="Courier New">; frequency change </font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ain1</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">ioffset, ifr, p6</font></td>				<td width="40%" valign="top"><font face="Courier New">; FIRST OSCILLATOR</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">awsh1</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv*ain1, p7, 1, ioffset</font></td>				<td width="40%" valign="top"><font face="Courier New">; waveshaping 1st oscil</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ain2</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">ioffset, kfreq2, p6</font></td>				<td width="40%" valign="top"><font face="Courier New">; SECOND OSCILLATOR</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">awsh2</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv*ain2, p7, 1, ioffset</font></td>				<td width="40%" valign="top"><font face="Courier New">; waveshaping 2nd oscil</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="3"><font face="Courier New">kenv*p4*(inobeat*awsh1+ibeat*awsh2)</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="3"><font face="Courier New">asig</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.38</b></font><font face="Times New Roman" size="2"> Orchestra code for <i>instr 1113</i>, a dual waveshaping instrument.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">In our example <i>instr 1113</i> is composed of two waveshapers: the first one processes a sinewave of constant frequency <i>f</i> and the second processes a sinewave which varies its frequency throughout the duration of each note from <i>1.01f</i> to <i>0.99f</i>. The outputs of these waveshapers are mixed in a relative proportion of 0.8:0.2 (<i>inobeat</i>:<i>ibeat</i>), producing a variable beating pattern that further enhances the waveshaping process. The reader may notice that <i>ioffset</i> is 0.5 and not half of the table size minus one. This is because the <a href="../../../references/manual_html/siggen/table.htm"><b>table</b></a><b> </b>statements are used in normalized mode (the waveshaped signal varies between -0.5 and +0.5).<br>			</font></p>		</div>		<h3><font face="Times New Roman"><b>Summary</b></font></h3>		<div align="justify">			<p><font face="Times New Roman">The following issues should be considered when implementing a waveshaping process:</font></p>			<p><font face="Times New Roman">1. Waveshaper function, which determines the amount of distortion as a function of amplitude. Chebyshev functions may be used with sinewaves in order to produce various combinations of harmonics. It is also possible to interpolate between two or more waveshaping functions by cross-fading the outputs.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">2. Distortion index, which is essentially the envelope of the sound. It determines which region of the waveshaper is used at a given moment.<br>			</font></p>		</div>		<h2>		<h2><font face="Times New Roman"><b>Frequency Modulation</b></font></h2>		</h2>		<div align="justify">			<p><font face="Times New Roman">John Chowning (1973) initially proposed the application of frequency modulation (FM) to musical synthesis. He showed that the use of a <i>modulator</i> in order to modify the frequency of a <i>carrier</i>, may be controlled to produce varied dynamic spectra with relatively little computational overheads. In its simplest form, both the carrier and the modulator are sinewaves; however, unlike ring modulation, sinewave FM generates enough spectral complexity to allow the synthesis of reasonably rich and varied timbres. The mathematical expression for a signal of frequency <i>f<sub>m</sub></i>, which modulates a carrier of frequency fc, is:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq12.jpg" width="568" height="31"> (11.12)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Where <i>I</i>, called the <i>modulation index</i>, controls the degree of distortion applied to the carrier. Its function can be compared with that of the distortion index in waveshaping and will be discussed below.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Equation 11.12 may be manipulated by expressing the sine functions as a power series which, after a rather lengthy process, results in the following expression:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq13.jpg" width="438" height="41"> (11.13)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The equation above describes a spectrum with sidebands at frequencies <i>f<sub>c</sub>&plusmn; f<sub>m</sub></i>, <i>f<sub>c</sub>&plusmn;2f<sub>m</sub></i>, <i>f<sub>c</sub>&plusmn;3f<sub>m</sub></i>, etc. above and below the carrier <i>f<sub>c</sub></i>, as shown in figure 11.39.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/34.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.39</b></font><font face="Times New Roman" size="2"> Spectrum of frequency modulation process.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">The amplitude of each pair of components is determined by the coefficients <i>J<sub>1</sub></i>, <i>J<sub>2</sub></i>, <i>J<sub>3</sub></i>, etc. which are functions of the index <i>I</i>. The actual mathematical dependency of <i>J<sub>n</sub></i> on <i>I</i> is given by a family of curves known as <i>Bessel functions</i>. (Mathematical expressions and a graphic representation of Bessel functions can be found in various calculus textbooks. Graphic plots are also shown in Chowning (1973)). In practice, the influence of <i>I</i> may be evaluated by means of a simple rule of thumb: the total number of audible sidebands is <i>2I</i> (<i>I</i> sidebands above and<i> I</i> sidebands below the carrier). Therefore, the total number of components, including the carrier, is <i>2I+1</i>. This is illustrated in <i>1114.orc</i> and <i>1114.sco</i>. The orchestra uses a <a href="../../../references/manual_html/siggen/foscil.htm"><b>foscili</b></a><b> </b>opcode to implement FM, where <i>p5</i>*<i>p6</i> is the frequency of the carrier, <i>p5</i>*<i>p7</i> is the frequency of the modulator, <i>p8</i> is the index and <i>p9</i> is the function table which generates the carrier and the modulator &#151; a sinewave in this case.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/35.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.40</b></font><font face="Times New Roman" size="2"> Block diagram of <i>instr 1114</i>, a simple static FM instrument.</font><font face="Times New Roman"><br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="578">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1114/1114.html"><font face="Courier New">1114</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; simple static FM</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/linen.htm"><font face="Courier New">linen</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">p4, .1, p3, .1</font></td>				<td width="42%" valign="top"><font face="Courier New">; env (attack = decay = .1 sec)</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/foscil.htm"><font face="Courier New">foscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv, p5, p6, p7, p8, p9</font></td>				<td width="42%" valign="top"><font face="Courier New">; FM oscillator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">asig</font></td>				<td width="42%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>				<td valign="top" colspan="3"><font face="Courier New">&nbsp;</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.41</b></font><font face="Times New Roman" size="2"> Orchestra code for <i>instr 1114</i>, a simple static FM instrument.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The score includes five examples of a 212 Hz modulator applied to a 100 Hz carrier, with respective index values of 0, 1, 2, 3 and 4. The first sound (<i>I</i>=0) contains the carrier alone, the second includes the first pair of sidebands, the third extends the spectrum to the next pair and so on. When <i>1114.sco</i> is synthesized, it is possible to hear how the top frequency component becomes higher as more sidebands become audible. In short, the index determines how many components will be audible.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">We saw above that ring modulation may generate negative frequencies. This also happens in Frequency Modulation (FM). In this case, formula 11.13 only contains sines (as opposed to cosines in ring modulation); therefore, from the trigonometric identity:</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq14.jpg" width="438" height="41"> (11.14)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">we can infer that negative components reflect with a change of sign. This is equivalent to a phase shift of <img height="16" width="16" src="figures/pi.jpg">, or half a cycle.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The <i>carrier to modulator ratio</i> is also an important FM parameter. It has a similar effect on the output to that of the ring modulation <i>c/m</i>. If <i>c/m</i> is not a rational number, the spectrum will be inharmonic, but if the <i>c/m</i> can be represented as a ratio of integers:<br>			</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/eq15.jpg" width="438" height="48"> (11.15)<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">then the fundamental will be <i>f</i> = <i>f<sub>c</sub>/N<sub>c</sub></i> = <i>f<sub>m</sub>/N<sub>m</sub></i> and the spectrum will be harmonic. Also, <i>f<sub>c</sub></i> and <i>f<sub>m</sub></i> will be respectively the<i> N<sub>c</sub></i>th and <i>N<sub>m</sub></i>th harmonics. However, if the fundamental <i>f</i> is below the auditory range, the sound will not be perceived as having definite pitch, as demonstrated in <i>1114a.orc</i> and <i>1114a.sco</i>, which use <i>instr 1114</i> to produce the following three sounds:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="478">			<tr>				<td width="11%" valign="top"><font face="Courier New">c=80Hz</font></td>				<td width="19%" valign="top"><font face="Courier New">c/m=1</font></td>				<td width="8%" valign="top"><font face="Courier New">I=2</font></td>				<td valign="top" colspan="2"><font face="Courier New">Fundamental=80Hz</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">c=80Hz</font></td>				<td width="19%" valign="top"><font face="Courier New">c/m=13/19</font></td>				<td width="8%" valign="top"><font face="Courier New">I=2</font></td>				<td width="34%" valign="top"><font face="Courier New">Fundamental=80/13=6.154Hz</font></td>				<td width="29%" valign="top"><font face="Courier New">Lacks clear pitch</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">c=80Hz</font></td>				<td width="19%" valign="top"><font face="Courier New">c/m=1.4142~<img src="figures/21.jpg" width="22" height="17"></font></td>				<td width="8%" valign="top"><font face="Courier New">I=2</font></td>				<td width="34%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="29%" valign="top"><font face="Courier New">Sound is inharmonic</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.42</b></font><font face="Times New Roman" size="2"> Table of tutorial parameter values and description of their sound.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Furthermore, because the harmonic content depends on the difference between the carrier and multiples of the oscillator frequency, we can conclude that if <i>N<sub>m </sub></i>= 1, the spectrum will contain all the harmonics. If <i>N<sub>m</sub></i> is even, every second harmonic will be missing and the spectrum will contain <i>f</i>, 3<i>f</i>, 5<i>f</i>, etc. For example, if <i>c/m</i> = 1/2, then <i>N<sub>m </sub></i>= 2, <i>f <sub>c </sub></i>=<i>f</i> and <i>f<sub>m </sub></i>= 2<i>f</i>; therefore, the spectrum will only contain odd harmonics, which are the result of adding <i>f</i> to a multiple of <i>2f</i>, as follows:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="30%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">+2<i>f</i> = 3<i>f</i></font></td>				<td width="70%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">-2<i>f</i> = -<i>f</i></font></td>			</tr>			<tr>				<td width="30%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">+2x(2<i>f</i>) = 5<i>f</i></font></td>				<td width="70%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">-2x(2<i>f</i>) = -3<i>f</i></font></td>			</tr>			<tr>				<td width="30%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">+3x(2<i>f</i>) = 7<i>f</i></font></td>				<td width="70%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">-3x(2<i>f</i>) = -5<i>f</i></font></td>			</tr>			<tr>				<td width="30%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">+4x(2<i>f</i>) = 9<i>f</i></font></td>				<td width="70%" valign="top"><font face="Courier New"><i>f</i></font><font face="Courier New">-4x(2<i>f</i>) = -7<i>f</i></font></td>			</tr>			<tr>				<td valign="top" colspan="2"><font face="Courier New">etc.</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.43</b></font><font face="Times New Roman" size="2"> Table of odd partials resulting from a c/m ration of 1:2</font><font face="Times New Roman">.<br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Similarly, if <i>N<sub>m</sub></i>=3, every third harmonic will be missing.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Dynamic FM spectra may be obtained by making <i>c/m and I</i> functions of time. In fact, a time-varying index alone provides enough versatility to produce a variety of sounds, as illustrated in <i>1115.orc</i> and <i>1115.sco</i> in which <i>instr 1115</i> controls the envelope and the index using the variables <i>kenv</i> and <i>kidx</i>.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/38.gif"></font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.44</b></font><font face="Times New Roman" size="2"> Block diagram of <i>instr 1115</i>, a dynamic FM instrument.</font><font face="Times New Roman"><br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="517">			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><font face="Courier New">instr</font></td>				<td width="15%" valign="top"><a href="../../instruments/11/1115/1115.html"><font face="Courier New">1115</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">; FM w/ amplitude and spectral envelopes</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ifreq</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" colspan="2"><a href="../../../references/manual_html/pchcnv/octpch.htm"><font face="Courier New">cpspch</font></a><font face="Courier New">(p5)</font></td>				<td width="29%" valign="top"><font face="Courier New">; pitch to frequency</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, p4, p3, p11</font></td>				<td width="29%" valign="top"><font face="Courier New">; amplitude envelope</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kindx</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">0, p8-p9, p3, p12</font></td>				<td width="29%" valign="top"><font face="Courier New">; time-varying index</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/foscil.htm"><font face="Courier New">foscili</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">kenv, ifreq, p6, p7, p9+kindx, p10</font></td>				<td width="29%" valign="top"><font face="Courier New">; FM oscillator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">out</font></a></td>				<td valign="top" colspan="2"><font face="Courier New">asig</font></td>				<td width="29%" valign="top"><font face="Courier New">; output</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td valign="top" colspan="4"><a href="../../../references/manual_html/syntax/iblock.htm"><font face="Courier New">endin</font></a></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman" size="2"><b>Figure 11.45</b></font><font face="Times New Roman" size="2"> Orchestra code for <i>instr 1115</i>, a dynamic FM instrument with amplitude and spectral envelopes.</font><font face="Times New Roman"><br>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The score file <i>1115.sco</i> produces a passage that includes various types of sounds based on recipes for bells, woodwind, brass and membranophones, proposed by Chowning (1973). In these <i>c/m</i> is fixed for each type and only the index changes between a maximum and a minimum value (<i>p8</i> and <i>p9</i>, respectively). The modulation-index, <i>I,</i> is driven by an oscillator with different generating functions given in the score, according to the desired type of sound. The overall amplitude envelope also plays an important role in modeling these sounds. For example, the sudden attack resulting from hitting the body of a bell and the subsequent slow decay into a pitched sound may be modeled using: an exponential amplitude envelope which lasts a few seconds; an inharmonic carrier-to-modulator ratio; and a modulation-index which initially favors high partials (<i>kidx</i>=6) and decays slowly to zero, gradually making the carrier more prominent (<i>kidx</i>=1.2). The amplitude and index envelopes are modeled with the following function tables:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="477">			<tr>				<td width="8%" valign="top"><font face="Courier New">f 11</font></td>				<td width="5%" valign="top"><font face="Courier New">0</font></td>				<td width="6%" valign="top"><font face="Courier New">512</font></td>				<td width="19%" valign="top"><font face="Courier New">5 1 512 .0001</font></td>				<td width="62%" valign="top"><font face="Courier New">; bell amplitude</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">f 12</font></td>				<td width="5%" valign="top"><font face="Courier New">0</font></td>				<td width="6%" valign="top"><font face="Courier New">512</font></td>				<td width="19%" valign="top"><font face="Courier New">5 1 512 .2</font></td>				<td width="62%" valign="top"><font face="Courier New">; bell index</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">The instrument statement below produces a 4-second bell using an inharmonic carrier to modulator ratio of 1/1.215 and a maximum index of 6.<br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="491">			<tr>				<td width="10%" valign="top"><font face="Courier New">; ins</font></td>				<td width="5%" valign="top"><font face="Courier New">st</font></td>				<td width="6%" valign="top"><font face="Courier New">dur</font></td>				<td width="9%" valign="top"><font face="Courier New">amp</font></td>				<td width="7%" valign="top"><font face="Courier New">ptch</font></td>				<td width="4%" valign="top"><font face="Courier New">c</font></td>				<td width="8%" valign="top"><font face="Courier New">m</font></td>				<td width="8%" valign="top"><font face="Courier New">max I</font></td>				<td width="8%" valign="top"><font face="Courier New">min I</font></td>				<td width="11%" valign="top"><font face="Courier New">osc fn</font></td>				<td width="11%" valign="top"><font face="Courier New">amp fn</font></td>				<td width="11%" valign="top"><font face="Courier New">ndx fn</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">i 1115</font></td>				<td width="5%" valign="top"><font face="Courier New">0</font></td>				<td width="6%" valign="top"><font face="Courier New">4</font></td>				<td width="9%" valign="top"><font face="Courier New">10000</font></td>				<td width="7%" valign="top"><font face="Courier New">8.01</font></td>				<td width="4%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1.215</font></td>				<td width="8%" valign="top"><font face="Courier New">6</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="11%" valign="top"><font face="Courier New">1</font></td>				<td width="11%" valign="top"><font face="Courier New">11</font></td>				<td width="11%" valign="top"><font face="Courier New">12</font></td>			</tr>		</table>		</font></p>		<h3><font face="Times New Roman"><b>Summary</b></font></h3>		<div align="justify">			<p><font face="Times New Roman">There are two important parameters that determine the spectral characteristics of sounds produced by frequency modulation.<br>			</font></p>			<ul>				<p><font face="Times New Roman">1. The carrier to modulator ratio determines the location of frequency components.</font><font face="Times New Roman"><br>				2. The index determines which components will be prominent.<br>				</font></p>			</ul>		</div>		<h2>		<h2><font face="Times New Roman"><b>Granular Synthesis</b></font></h2>		</h2>		<p><a href="../../instruments/11/1116.orc"><font face="Times New Roman">1116.orc<br>		</font></a><font face="Times New Roman"><a href="../../instruments/11/1116.sco">1116.sco</a></font></p>		<div align="justify">			<p><font face="Times New Roman">Granular synthesis theory was first developed by Gabor (1947), who argued that signals can be conceived as the combination of very short sonic grains. A particular grain may be indistinguishable from another grain; however, combinations of large numbers of these sonic units may yield different morphologies, depending on the internal constitution of the grains and on the particular way in which the combination is structured.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">According to psychoacoustic theory, human perception becomes ineffective in recognizing pitch and amplitude when sonic events become too short: the threshold has been estimated to be in the region of 50 milliseconds (Whitfield 1978). Therefore, typical durations of grains usually fall between 10 to 60 milliseconds.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">A grain usually consists of a waveform with an envelope, as shown in figure 11.47. In principle, the former could be any signal &#151; ranging from pure sinewaves to recorded samples of complex sounds. The envelope can have various shapes &#151; for example, it could be a Gaussian curve, a triangle, a trapezoid, half-a-sine, etc. When grains are combined, the shape of the waveform and envelope are influential factors which determine the timbre of the overall sonic result. As a rule of thumb, complex waveforms will lead to sounds with larger noise content. Also, envelopes with edges (such as triangles and trapezoids) will produce rougher signals. Furthermore, depending on the sampling rate, if the duration of a grain is very short, the attack and/or decay of a trapezoid may become vertical, causing clicks. On the other hand, smooth envelopes such as half-sine may be effective in preventing clicks at shorter durations.<br>			</font></p>			<p><font face="Times New Roman"><img src="figures/39.gif"></font></p>			<p><font face="Times New Roman" size="2"><b>Figure 11.46</b></font><font face="Times New Roman" size="2"> Grains with triangular waveforms and Gaussian envelopes.</font><font face="Times New Roman"><br>			</font></p>			<p><font face="Times New Roman">Because grains are short, it is necessary to manipulate these in large numbers to obtain any significant results; sometimes, the numbers may reach up to 1000 grains per second of sound. Therefore, it is useful to adopt high level organizational strategies that take care of the manipulation of the various parameters associated with grain characteristics and with their combination.</font></p>			<p><font face="Times New Roman">Throughout the history of electronic synthesis, there have been various approaches and, even now, new strategies are being developed. In the early sixties, Xenakis (1971) proposed organization of grains according to a synchronous process: time may be divided into frames which are then played in succession at a constant rate, similar to movie frames which produce continuous movement. Each frame consists of two axes &#151; one of which measures frequency and the other amplitude &#151; and contains a particular set of grains, each with its own amplitude-frequency values. Therefore, when the frames are &#145;played,&#146; a particular succession of grains with varying frequency and density is obtained.</font></p>			<p><font face="Times New Roman">Another strategy, perhaps the most popular to date, consists of the creation of asynchronous &quot;clouds,&quot; described in depth by Roads (1985, 1991). The main idea behind a cloud of grains is that the tendencies of the various parameters that influence the resulting musical sound may be controlled by means of a process that is partly random and partly deterministic. For example, a random device that produces values falling between a lower and upper limit determined by the composer may generate the frequency of the grain waveform. These limits may change in time, producing dynamic spectra.</font></p>			<p><font face="Times New Roman">The following list describes the most typical parameters:<br>			</font></p>			<dir>				<p><font face="Times New Roman">&#149; <i>Grain duration:</i> typically between 5 and 50 milliseconds. Values above this range may loose the &#145;anonymity&#146; of grains and may be used effectively in order to create a transition between granular textures and gestural material. Grain duration may also produce ring modulation effects (Roads, 1991, pp. 157-161).</font></p>				<p><font face="Times New Roman">&#149; <i>Grain waveform type</i>: which may vary from a pure sinewave to complex spectral types. In fact, the waveform of the grains may be made to change by interpolating gradually between two extreme cases. Another method of creating time-varying waveforms consists of using a frequency modulation unit with varying carrier to modulator<b> </b>ratio and FM index.</font></p>				<p><font face="Times New Roman">&#149; <i>Grain envelope:</i> typical envelopes include bell-shaped Gaussians, raised sinusoidals and trapezoids (attack-sustain-decay).</font></p>				<p><font face="Times New Roman">&#149; <i>Cloud density</i>: which is the number of grains per time unit. Since the cloud is asynchronous (grains do not occur at regular intervals): on the one hand, some grains may overlap and, on the other hand, lapses of silence may occur. It these lapses are very short, they will not be perceived as such but will rather as fluctuations in amplitude, affecting the timbre of the output.</font></p>				<p><font face="Times New Roman">&#149; <i>Cloud amplitude envelope</i>: which controls the overall amplitude of the cloud. Furthermore, the relative amplitude of each grain may be made to fluctuate between minimum and maximum values.</font></p>				<p><font face="Times New Roman">&#149; <i>Cloud frequency band</i>: the grain waveform frequency at any given moment may be constrained to a spectral band determined by two time-varying functions; one for the higher limit and one for the lower limit.</font></p>				<p><font face="Times New Roman">&#149; <i>Cloud spatial movement</i>: which may be controlled according to the number of outputs available.</font></p>				<p><font face="Times New Roman">&#149; <i>Cloud width or grain spatial scatter</i>:<i> </i>the localization of the cloud at any moment may vary from confinement to a point in space to wide spatial spread, according to the degree of scattering of the grains in relation to the path along which the cloud moves.</font></p>			</dir>			<p><font face="Times New Roman">The files <i>1116.orc</i> and <i>1116.sco</i> produce a 20-second cloud created by using an instrument which implements the parameters described above. The overall envelope of the cloud is produced using an <a href="../../../references/manual_html/siggen/oscil.htm"><b>oscil1</b></a><b> </b>statement with duration <i>idur</i> (<i>p3</i>) amplitude <i>imaxamp</i> (<i>p4</i>) and function <i>iampfunc</i> (<i>p5</i>).<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="597">			<tr>				<td width="11%" valign="top"><font face="Courier New">kenv</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier" size="2">oscil1</font></a></td>				<td width="36%" valign="top"><font face="Courier New">0, imaxamp, idur, iampfunc</font></td>				<td width="41%" valign="top"><font face="Courier New">; overall envelope</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The lower limit of the frequency band varies between a minimum <i>ilfbmin</i> and a maximum <i>ilfbmax</i>, given respectively by <i>p11</i> and <i>p12</i>. The difference of these values, <i>ilfbdiff</i>, is fed to an <a href="../../../references/manual_html/siggen/oscil.htm"><b>oscil1</b></a><b> </b>statement driven by function <i>ilbffunc</i> (<i>p3</i>). The output of the oscillator is then added to <i>lbfmin</i> in order to obtain the time-varying lower limit <i>klbf</i>.</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="464">			<tr>				<td width="14%" valign="top"><font face="Courier" size="2">ilfbmin</font></td>				<td width="12%" valign="top"><font face="Courier" size="2">=</font></td>				<td width="40%" valign="top"><font face="Courier" size="2">p11</font></td>				<td width="35%" valign="top"><font face="Courier" size="2">; minimum freq of limit</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier" size="2">ilfbmax</font></td>				<td width="12%" valign="top"><font face="Courier" size="2">=</font></td>				<td width="40%" valign="top"><font face="Courier" size="2">p12</font></td>				<td width="35%" valign="top"><font face="Courier" size="2">; maximum freq of limit</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier" size="2">ilfbdiff</font></td>				<td width="12%" valign="top"><font face="Courier" size="2">=</font></td>				<td width="40%" valign="top"><font face="Courier" size="2">ilfbmax-ilfbmin</font></td>				<td width="35%" valign="top"><font face="Courier" size="2">; difference</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier" size="2">ilbffunc</font></td>				<td width="12%" valign="top"><font face="Courier" size="2">=</font></td>				<td width="40%" valign="top"><font face="Courier" size="2">p13</font></td>				<td width="35%" valign="top"><font face="Courier" size="2">; lower limit function</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier" size="2">klfb</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier" size="2">oscil1</font></a></td>				<td width="40%" valign="top"><font face="Courier" size="2">0, ilfbdiff, idur, ilbffunc</font></td>				<td width="35%" valign="top"><font face="Courier" size="2">; lower limit fluctuatn </font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier" size="2">klfb</font></td>				<td width="12%" valign="top"><font face="Courier" size="2">=</font></td>				<td width="40%" valign="top"><font face="Courier" size="2">ilfbmin+klfb</font></td>				<td width="35%" valign="top"><font face="Courier" size="2">; lower limit</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">A similar procedure is applied in order to produce the upper limit of the frequency band (<i>kufb</i>), the carrier-to-modulator ratio (<i>kcmr</i>), the index<i> </i>(<i>kidx</i>) and the width of the cloud (<i>kgscat</i>).</font></p>		<div align="justify">			<p><font face="Times New Roman">Spatialization of the cloud is implemented using the same algorithm employed in the dynamic additive synthesis instrument described previously in this chapter. The only difference consists of the addition of grain scatter to the overall panning.<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="473">			<tr>				<td width="11%" valign="top"><font face="Courier New">kpan</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="27%" valign="top"><font face="Courier New">kpan+kgscat</font></td>				<td width="53%" valign="top"><font face="Courier New">; add grain scatter </font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Applying a periodic envelope to an otherwise continuous sound produces the grains. The rate at which the grains are produced is the same as the frequency of the envelope generator; therefore, if the duration of the grain is <i>kgdur</i>, the rate at which the envelope for that grain is generated is <i>kgrate </i>= 1 /<i>kgdur</i>. The code used to control the grain duration is listed below:<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="555">			<tr>				<td width="13%" valign="top"><font face="Courier New">imingd</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p6/1000.0</font></td>				<td width="42%" valign="top"><font face="Courier New">; minimum grain duration</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">imaxgd</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p7/1000.0</font></td>				<td width="42%" valign="top"><font face="Courier New">; maximum grain duration</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">igddiff</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">imaxgd-imingd</font></td>				<td width="42%" valign="top"><font face="Courier New">; difference</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">igdfunc</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">p8</font></td>				<td width="42%" valign="top"><font face="Courier New">; grain duration func table</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgdur</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">oscil1</font></a></td>				<td width="35%" valign="top"><font face="Courier New">0, igddiff, idur, igdfunc</font></td>				<td width="42%" valign="top"><font face="Courier New">; grain duration fluctuation</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgdur</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">imingd+kgdur</font></td>				<td width="42%" valign="top"><font face="Courier New">; grain duration</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgrate</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">1.0/kgdur</font></td>				<td width="42%" valign="top"><font face="Courier New">; grain rate</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Since <i>p6</i> and <i>p7 </i>give the minimum and maximum grain duration in milliseconds, it is necessary to divide these by 1000 in order to obtain <i>imingd</i> and <i>imaxgd</i> in seconds. The maximum fluctuation in grain duration is <i>igddiff</i>, which is used as amplitude for an oscillator driven by the grain duration function <i>igdfunc</i> (<i>p8</i>). Therefore, <i>kgdur</i> is the result of adding the output of the oscillator to the minimum duration <i>imingd</i>. Finally, <i>kgrate</i> is calculated.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">The grain envelope uses <i>kgrate</i> as its frequency and <i>igefunc</i> (<i>p10</i>) as the generating function table.<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="455">			<tr>				<td width="13%" valign="top"><font face="Courier New">igefunc</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td width="31%" valign="top"><font face="Courier New">p10</font></td>				<td width="43%" valign="top"><font face="Courier New">; grain envelope func table</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgenvf</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td width="31%" valign="top"><font face="Courier New">kgrate</font></td>				<td width="43%" valign="top"><font face="Courier New">; grain envelope frequency</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgenv</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscili</font></a></td>				<td width="31%" valign="top"><font face="Courier New">1.0, kgenvf, igefunc</font></td>				<td width="43%" valign="top"><font face="Courier New">; envelope</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">Also, <i>kgrate</i> is used to generate the relative amplitude and waveform frequency of the grain. Using a randh statement, which produces values between specified maxima and a minima, does this. The relative amplitude consists of a scaling factor which may assume values between <i>hmaxfc</i> (=0.5) and 1.<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="561">			<tr>				<td width="14%" valign="top"><font face="Courier New">ihmaxfc</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">0.25</font></td>				<td width="41%" valign="top"><font face="Courier New">; half of maximum amplitude dev</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">kgafact</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/siggen/rand.htm"><font face="Courier New">randh</font></a></td>				<td width="35%" valign="top"><font face="Courier New">ihmaxfc, kgfreq, iseed/3</font></td>				<td width="41%" valign="top"><font face="Courier New">; -ihmaxfc&lt;rand number&lt;+ihmaxfc</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">kgafact</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="35%" valign="top"><font face="Courier New">1.00-(ihmaxfc+kgafact)</font></td>				<td width="41%" valign="top"><font face="Courier New">; 2*ihmaxfc&lt;scaling factor&lt;1.00</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">The waveform frequency assumes a random value between the low and high limits of the cloud&#146;s frequency band<i> (klfb and kufb</i>).<br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="559">			<tr>				<td width="13%" valign="top"><font face="Courier New">kgband</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="33%" valign="top"><font face="Courier New">kufb-klfb</font></td>				<td width="45%" valign="top"><font face="Courier New">; current frequency band</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgfreq</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/siggen/rand.htm"><font face="Courier New">randh</font></a></td>				<td width="33%" valign="top"><font face="Courier New">kgband/2, kgrate, iseed</font></td>				<td width="45%" valign="top"><font face="Courier New">; generate frequency</font></td>			</tr>			<tr>				<td width="13%" valign="top"><font face="Courier New">kgfreq</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="33%" valign="top"><font face="Courier New">klfb+kgfreq+kgband/2</font></td>				<td width="45%" valign="top"><font face="Courier New">; frequency</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">A grain is generated using a <a href="../../../references/manual_html/siggen/foscil.htm"><b>foscili</b></a><b> </b>opcode, which uses the cloud&#146;s instantaneous carrier-to-modulator ratio and index <i>(kcmr and kidx).<br>		</i></font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="549">			<tr>				<td width="11%" valign="top"><font face="Courier New">igfunc</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="50%" valign="top"><font face="Courier New">p9</font></td>				<td width="28%" valign="top"><font face="Courier New">; grn. wave fn</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">agrain</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/siggen/foscil.htm"><font face="Courier New">foscili</font></a></td>				<td width="50%" valign="top"><font face="Courier New">kgenv, kgfreq, 1, kcmr, kidx, igfunc</font></td>				<td width="28%" valign="top"><font face="Courier New">; FM generator </font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">In order to avoid mechanical repetition and achieve grain overlap, a random variable delay is applied to each generated grain. The maximum possible delay value is equal to the grain duration <i>(kgdur</i>). The actual delay is produced using a <a href="../../../references/manual_html/siggen/rand.htm"><b>randi</b></a><b> </b>generator.<br>			</font></p>		</div>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="550">			<tr>				<td width="11%" valign="top"><font face="Courier New">kgdel</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/siggen/rand.htm"><font face="Courier New">randi</font></a></td>				<td width="34%" valign="top"><font face="Courier New">kgdur/2, kgrate, iseed/2</font></td>				<td width="44%" valign="top"><font face="Courier New">; random sample delay</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kgdel</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="34%" valign="top"><font face="Courier New">kgdel+kgdur/2</font></td>				<td width="44%" valign="top"><font face="Courier New">; make it positive</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">adump</font></td>				<td width="11%" valign="top"><font face="Courier New">delayr</font></td>				<td width="34%" valign="top"><font face="Courier New">imaxgd</font></td>				<td width="44%" valign="top"><font face="Courier New">; delay line</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">adelgr</font></td>				<td width="11%" valign="top"><font face="Courier New">deltapi</font></td>				<td valign="top" colspan="2"><font face="Courier New">kgdel</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="11%" valign="top"><font face="Courier New">delayw</font></td>				<td valign="top" colspan="2"><font face="Courier New">kgafact*agrain</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">After the grain is delayed, an additional delay line applies Doppler shift to the moving grain according to its spatial position <i>kpan</i>. This assumes a speaker distance of 10 meters.<br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="536">			<tr>				<td width="12%" valign="top"><font face="Courier New">ihspeakd</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" width="44%"><font face="Courier New">5.0</font></td>				<td width="32%" valign="top"><font face="Courier New">; halfspkrsdistnce(m)</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">isndsp</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="44%" valign="top"><font face="Courier New">331.45</font></td>				<td width="32%" valign="top"><font face="Courier New">; soundspeedinair(m/sec)</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">impandel</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" width="44%"><font face="Courier New">(imaxpan+imaxscat)*ihspeakd/isndsp</font></td>				<td width="32%" valign="top"><font face="Courier New">; max pan delay</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">kpdel</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td valign="top" width="44%"><font face="Courier New">kpan*ihspeakd/isndsp</font></td>				<td width="32%" valign="top"><font face="Courier New">; find pan delay</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">adump</font></td>				<td width="11%" valign="top"><font face="Courier New">delayr</font></td>				<td valign="top" width="44%"><font face="Courier New">impandel</font></td>				<td width="32%" valign="top"><font face="Courier New">; set max dopplerdelay</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">agdop</font></td>				<td width="11%" valign="top"><font face="Courier New">deltapi</font></td>				<td valign="top" width="44%"><font face="Courier New">abs(kpdel)</font></td>				<td width="32%" valign="top"><font face="Courier New">; tapdelay via panval</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="11%" valign="top"><font face="Courier New">delayw</font></td>				<td valign="top" width="44%"><font face="Courier New">adelgr</font></td>				<td width="32%" valign="top"><font face="Courier New">; delay signal</font></td>			</tr>		</table>		</font></p>		<p><font face="Times New Roman">To create the left and right channels the output of the Doppler processor is then multiplied by <i>kpleft</i> and <i>kpright</i>.<br>		</font></p>		<p><font face="Times New Roman">		<table cellspacing="0" border="0" width="486">			<tr>				<td width="9%" valign="top"><font face="Courier New">asig</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="81%" valign="top"><font face="Courier New">kenv*agdop</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">&nbsp;</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/sigio/out.htm"><font face="Courier New">outs</font></a></td>				<td width="81%" valign="top"><font face="Courier New">kpleft*asig, kpright*asig</font></td>			</tr>		</table>		</font></p>		<div align="justify">			<p><font face="Times New Roman">The cloud generated by <i>1116.sco</i> has an amplitude envelope that is half of a sinewave. The grain duration varies between 10 and 30 milliseconds: initially, grains assume the longer duration, which becomes shorter towards the middle section and then increases up to about 24 msec., shortening slightly towards the end to 21 msec. The frequency band is initially very narrow, around 2500 Hz, widening and narrowing as the sound progresses, with a lower boundary which varies between a minimum of 1000 Hz and a maximum of 2500 Hz and an upper boundary which varies between 2500 and 4670 Hz. The carrier-to-modulator ratio assumes an initial value of 1 and progresses for 1.25 seconds towards 4, its maximum value; it then hovers between a minimum of 1.48 and a maximum of 2.911. The FM index changes between 1 and 8, reaching the maximum (producing higher frequency components) after 12.5 seconds. Also <i>f 9</i> controls the spatial movement in the stereo field, including Doppler shift and <i>f 10</i> controls the scattering of grains by means of a sinusoidal with its second harmonic. This means that maximum scatter happens at about 2.5 and 17.5 seconds &#151; which correspond respectively to 1/8th and 7/8ths of a cycle &#151; and minimum scatter happens in the vicinity of 10 seconds (half a cycle).<br>			</font></p>		</div>		<h3><font face="Times New Roman"><b>Summary</b></font></h3>		<div align="justify">			<p><font face="Times New Roman">The following parameters are typically used to control the characteristics of a cloud of grains:<br>			</font></p>			<ul>				<p><font face="Times New Roman">1. Grain duration.</font><font face="Times New Roman"><br>				2. Grain waveform type (which may be varied using different techniques such as FM synthesis).</font><font face="Times New Roman"><br>				3. Grain envelope.</font><font face="Times New Roman"><br>				4. Cloud density.</font><font face="Times New Roman"><br>				5. Cloud amplitude.</font><font face="Times New Roman"><br>				6. Envelope.</font><font face="Times New Roman"><br>				7. Cloud frequency band.</font><font face="Times New Roman"><br>				8. Cloud spatial movement.</font><font face="Times New Roman"><br>				9. Cloud width (grain spatial scattering).</font></p>			</ul>		</div>		<h2><font face="Times New Roman"><b>Conclusion</b></font></h2>		<div align="justify">			<p><font face="Times New Roman">This chapter surveyed &#145;classic&#146; synthesis techniques that derive from the capabilities of devices available in the early stages of electroacoustic music development. These may be classified into frequency-domain and time-domain techniques. Frequency-domain techniques can be linear &#151; including additive and subtractive synthesis, or non-linear, including ring-modulation, waveshaping and frequency modulation. The most popular time-domain &#145;classic&#146; technique is granular synthesis.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Although the above techniques are called &#145;classic,&#146; they are by no means a thing of the past. In fact some of these are only beginning to fulfill their true potential since the advent of computer systems with fast processing speeds, which have given a new lease of life and extended the possibilities they offer, particularly in the generation of dynamic complex spectra. Subtractive and additive principles have developed into sophisticated mechanisms such as linear predictive code (<b>LPC</b>) and phase vocoding. The combination of subtractive and granular synthesis has led to the development of formant wave function synthesis (<b>FOF</b>) and wavelet analysis and synthesis. Furthermore, given that different techniques are conductive to the synthesis of different classes of sounds, combinations of &#145;classic&#146; procedures are effectively used to achieve sonorities that would be extremely difficult &#151; if not impossible &#151; to realize by means of a single technique.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Therefore, truly understanding &#145;classic&#146; techniques is essential in order to comprehend the possibilities offered by new technology and use this to achieve new and interesting timbral resources &#151; particularly given the many interesting and complex hybrid combinations.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Finally, the reader should realize that composition is not only about sounds on their own; new sonorities are also the result of context. Thus, far from being concerned only with the internal properties of sonic structures, electroacoustic composition is more than ever dependent on the way sounds are combined with each other, on how they interact and on the way they can be used to shape time.</font></p>		</div>		<h2><font face="Times New Roman"><b>References</b></font></h2>		<div align="justify">			<p><font face="Times New Roman">Backus, J. 1977. <i>The Acoustical Foundations of Music</i>. New York: W. W. Norton &amp; Company, Inc.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Chowning, J. 1985. &quot;The synthesis of complex audio spectra by means of frequency modulation.&quot; <i>Journal of the Audio Engineering Society </i>21:526-534. Reprinted in C. Roads and J. Strawn, eds. <i>Foundations of Computer Music</i>. Cambridge, MA: M.I.T. Press. pp. 6-29.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Dodge, C. and T. Jerse. 1985. <i>Computer Music, Synthesis Composition and Performance</i>. New York: Schirmer Books, Macmillan Inc.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Fischman, R. 1991. <i>Musical applications of digital synthesis and processing techniques. realization using csound and the phase vocoder</i>. Keele: unpublished.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Gabor, D. 1947. &quot;Acoustical quanta and the theory of hearing,&quot; <i>Nature</i>. 159 (4044): 591-594.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Roads, C. 1985. &quot;Granular synthesis of sound.&quot; in C. Roads and J. Strawn, eds. 1985. <i>Foundations of Computer Music</i>. Cambridge, MA: M.I.T. Press. pp.145-159.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Roads, C. 1991 &quot;Asynchronous granular synthesis.&quot; in G. De Poli, A. Piccialli and C. Roads, eds. <i>Representation of Musical Signals</i>. Cambridge, MA: M.I.T. Press. pp. 143-186.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Vercoe, B. 1993. <i>Csound</i>. Software and manual. Cambridge, MA: M.I.T. Press.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Whitfield, J. 1978. &quot;The neural code.&quot; In E. Carterette and M. Friedman, eds. 1978. <i>Handbook of Perception</i>, <i>Vol. IV, Hearing</i>. Orlando: Academic.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Williams, C. S. 1986. <i>Designing Digital Filters</i>. New York: Prentice Hall, Inc.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Wishart, T. 1985. <i>On Sonic Art.</i> York: Imagineering Press.</font></p>		</div>		<div align="justify">			<p><font face="Times New Roman">Xenakis, I. 1971. <i>Formalized Music</i>. Bloomington: Indiana University Press.</font></div>	</body></html>