<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"><html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>A Csound Multi-Effects Processor</title>		<!-- SGI_COMMENT COSMOCREATE -->		<!-- SGI_COMMENT VERSION NUMBER="1.0.1" -->		<meta name="AUTHOR" content="End User">		<meta name="OPERATOR" content="End User">	</head>	<body bgcolor="white">		<div align="left">			<h1><font face="Times New Roman"><b>30. A Csound Multi-Effects Processor</b></font></h1>			<h2><font face="Times New Roman">Hans Mikelson</font></h2>			<p><font face="Times New Roman">Click <a href="chapter30.zip">HERE</a> to download chapter instruments.</font></p>		</div>		<p><font face="Times New Roman">This chapter describes a Csound implementation of a multi-effects processor. Several categories of effects are presented including dynamics processing, filtering and pitch effects. Robin Whittle's <a href="../../../references/manual_html/zak/top.htm">zak</a> opcodes provide a flexible method of routing between the effects routines. The <a href="../../../references/manual_html/siggen/pluck.htm">pluck</a> opcode is used to demonstrate these effects since many of them are often used with guitar.</font></p>		<h2><font face="Times New Roman"><b>The Zak System</b></font></h2>		<p><font face="Times New Roman">Communication between effects is handled by the <a href="../../../references/manual_html/zak/top.htm">zak</a> opcodes. One advantage of the <a href="../../../references/manual_html/zak/top.htm">zak</a> system over global variables is that communications between instruments may be reconfigured in the score without making changes to the orchestra. To utilize the <a href="../../../references/manual_html/zak/top.htm">zak</a> opcodes they must first be initialized which is done with the following statement: <a href="../../../references/manual_html/zak/zakinit.htm">zakinit</a><i> num-a-rate, num-k-rate</i> where <i>num-a-rate</i> and <i>num-k-rate</i> are the number of audio rate and control rate channels allocated.</font></p>		<p><font face="Times New Roman">Communications between effects are accomplished using <a href="../../../references/manual_html/zak/ziw.htm">zaw</a> and <a href="../../../references/manual_html/zak/zir.htm">zar</a>. To write to an audio channel<i> </i><a href="../../../references/manual_html/zak/ziw.htm">zaw</a> <i>asig, ichannel</i> is used. To read from an audio channel <i>asig </i><a href="../../../references/manual_html/zak/zir.htm">zar</a> <i>ichannel </i>is used. Here <i>asig</i> is the audio signal and <i>ichannel</i> is the number of the channel.</font></p>		<p><font face="Times New Roman">The <a href="../../../references/manual_html/zak/ziw.htm">zawm</a> opcode mixes the current contents of the audio channel with the new audio data. During a chord several instances of the <a href="../../../references/manual_html/siggen/pluck.htm">pluck</a> instrument are active at the same time so the <a href="../../../references/manual_html/siggen/pluck.htm">pluck</a> instrument uses <a href="../../../references/manual_html/zak/ziw.htm">zawm</a> to accumulate sound. The audio channels must be cleared every sample period or the data will continue to accumulate. The mixer is the last instrument in the orchestra and is used to clear audio channels 0-30 with the statement <a href="../../../references/manual_html/zak/zkmod.htm">zacl</a><i> 0, 30</i>.</font></p>		<h2><font face="Times New Roman"><b>Mixer</b></font></h2>		<p><a href="../../instruments/30/3099/3099.html"><font face="Times New Roman">3099</font></a></p>		<p><font face="Times New Roman">The mixer reads from four audio channels and provides independent gain and pan control for each channel.<br>		</font></p>		<div align="left">			<p>			<table cellspacing="0" border="0" cellpadding="0" width="478">				<tr>					<td width="14%" valign="top"><font face="Courier New">asig1</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p4</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igl1</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p5*p6</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igr1</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p5*(1-p6)</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">asig2</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p7</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igl2</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p8*p9</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igr2</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p8*(1-p9)</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">asig3</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p10</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igl3</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p11*p12</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igr3</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p11*(1-p12)</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">asig4</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p13</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igl4</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p14*p15</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">igr4</font></td>					<td width="12%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>					<td width="33%" valign="top"><font face="Courier New">p14*(1-p15)</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">asigl</font></td>					<td width="12%" valign="top"><font face="Courier New">=</font></td>					<td width="33%" valign="top"><font face="Courier New">asig1*igl1+asig2*igl2+asig3*igl3+asig4*igl4</font></td>				</tr>				<tr>					<td width="14%" valign="top"><font face="Courier New">asigr</font></td>					<td width="12%" valign="top"><font face="Courier New">=</font></td>					<td width="33%" valign="top"><font face="Courier New">asig1*igr1+asig2*igr2+asig3*igr3+asig4*igr4</font></td>				</tr>			</table>			</p>		</div>		<h1><font face="Times New Roman"><b>Dynamics Processing</b></font></h1>		<p><font face="Times New Roman">This section describes a compressor, a limiter, a noise gate, a de-esser and a distortion effect.1 These are all related effects which change the dynamics of the sound.</font></p>		<h2><font face="Times New Roman"><b>Compressor</b></font></h2>		<p><a href="../../instruments/30/3011/3011.html"><font face="Times New Roman">3011</font></a></p>		<p><font face="Times New Roman">A compressor is used to reduce the dynamic range of a signal. It does this by monitoring the level of an input signal and varying the gain applied to the output signal. Sounds greater than a specified level are reduced in volume. The <a href="../../../references/manual_html/sigmod/rms.htm">rms</a> opcode can be used to give a time average of the level of the input signal. The output from <a href="../../../references/manual_html/sigmod/rms.htm">rms</a> is used to reference a table which determines the amount of gain applied to the output signal. A post gain is usually included to restore the level of the output signal after it has been compressed. The <a href="../../../references/manual_html/sigmod/rms.htm">rms</a> opcode does not respond immediately to changes in level so that sudden attacks are sometimes allowed to pass. To avoid this the original signal is monitored and compression is applied to a time delayed copy of the signal. In this example a delay time equal to one half of the <a href="../../../references/manual_html/sigmod/rms.htm">rms</a> averaging time is used.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="708">			<tr>				<td width="10%" valign="top"><font face="Courier New">asig</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="30%" valign="top"><font face="Courier New">iinch</font></td>				<td width="17%" valign="top"><font face="Courier New">; Read</font></td>				<td width="13%" valign="top"><font face="Courier New">input</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">kamp</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">rms</font></a></td>				<td width="30%" valign="top"><font face="Courier New">asig, ifqc</font></td>				<td width="17%" valign="top"><font face="Courier New">: Find RMS</font></td>				<td width="13%" valign="top"><font face="Courier New">level</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">kampn</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td width="30%" valign="top"><font face="Courier New">kamp/30000</font></td>				<td width="17%" valign="top"><font face="Courier New">; Normalize</font></td>				<td width="13%" valign="top"><font face="Courier New">RMS</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">kcomp</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>				<td width="30%" valign="top"><font face="Courier New">kampn,itab,1,0</font></td>				<td width="17%" valign="top"><font face="Courier New">; Look up</font></td>				<td width="13%" valign="top"><font face="Courier New">compress</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">adel1</font></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="30%" valign="top"><font face="Courier New">ideltm</font></td>				<td width="17%" valign="top"><font face="Courier New">; Delay for</font></td>				<td width="13%" valign="top"><font face="Courier New">ideltm</font></td>			</tr>			<tr>				<td width="10%" valign="top"></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="30%" valign="top"><font face="Courier New">asig</font></td>				<td width="17%" valign="top"><font face="Courier New">; Write to</font></td>				<td width="13%" valign="top"><font face="Courier New">delay</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">acomp</font></td>				<td width="13%" valign="top"><font face="Courier New">=</font></td>				<td width="30%" valign="top"><font face="Courier New">kcomp*adel1*ipostgain</font></td>				<td width="17%" valign="top"><font face="Courier New">; Apply</font></td>				<td width="13%" valign="top"><font face="Courier New">compression</font></td>			</tr>			<tr>				<td width="10%" valign="top"></td>				<td width="13%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="30%" valign="top"><font face="Courier New">acomp*kenv, ioutch</font></td>				<td width="17%" valign="top"><font face="Courier New">; declick &amp;</font></td>				<td width="13%" valign="top"><font face="Courier New">output</font></td>			</tr>		</table>		</p>		<p><font face="Times New Roman">The amount of compression is given by the compression curve <i>f6</i>. Compression levels of 2:1 and 4:1 are common.</font></p>		<div align="left">			<p>			<table cellspacing="0" border="0" cellpadding="0" width="478">				<tr>					<td width="9%" valign="top"><font face="Courier New">f6</font></td>					<td width="9%" valign="top"><font face="Courier New">13</font></td>					<td width="9%" valign="top"><font face="Courier New">1025</font></td>					<td width="9%" valign="top"><font face="Courier New">7</font></td>					<td width="9%" valign="top"><font face="Courier New">1</font></td>					<td width="9%" valign="top"><font face="Courier New">256</font></td>					<td width="9%" valign="top"><font face="Courier New">1</font></td>					<td width="9%" valign="top"><font face="Courier New">256</font></td>					<td width="9%" valign="top"><font face="Courier New">.5</font></td>					<td width="9%" valign="top"><font face="Courier New">513</font></td>					<td width="9%" valign="top"><font face="Courier New">.5</font></td>				</tr>			</table>			</p>		</div>		<p><font face="Times New Roman">The compressor block diagram is presented in figure 30.1.</font></p>		<p><font face="Times New Roman"><img src="figures/01.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx1.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.1</b> Compressor/Limiter block diagram.</font></p>		<h2><font face="Times New Roman"><b>Limiter</b></font></h2>		<p><a href="../../instruments/30/3011/3011.html"><font face="Times New Roman">3011</font></a></p>		<p><font face="Times New Roman">The limiter is merely a compressor with a very severe compression curve. Limiters prevent a signal level from going above a specified limit. Limiters commonly use compression levels of 10:1 or 100:1. This can be implemented by simply using a different compression table:</font></p>		<h2>		<table cellspacing="0" border="0" cellpadding="0" width="478">			<tr>				<td width="9%" valign="top"><font face="Courier New">f6</font></td>				<td width="9%" valign="top"><font face="Courier New">13</font></td>				<td width="9%" valign="top"><font face="Courier New">1025</font></td>				<td width="9%" valign="top"><font face="Courier New">7</font></td>				<td width="9%" valign="top"><font face="Courier New">1</font></td>				<td width="9%" valign="top"><font face="Courier New">256</font></td>				<td width="9%" valign="top"><font face="Courier New">1</font></td>				<td width="9%" valign="top"><font face="Courier New">512</font></td>				<td width="9%" valign="top"><font face="Courier New">.01</font></td>				<td width="9%" valign="top"><font face="Courier New">129</font></td>				<td width="9%" valign="top"><font face="Courier New">.01</font></td>			</tr>		</table>		</h2>		<h2><font face="Times New Roman"><b>Noise Gate</b></font></h2>		<p><a href="../../instruments/30/3010/3010.html"><font face="Times New Roman">3010</font></a></p>		<p><font face="Times New Roman">Noise gates are used to remove unwanted background noise and hiss from a signal. A noise gate can be implemented by changing the <i>f6</i> table again.</font></p>		<div align="left">			<p>			<table cellspacing="0" border="0" cellpadding="0" width="478">				<tr>					<td width="8%" valign="top"><font face="Courier New">f6</font></td>					<td width="8%" valign="top"><font face="Courier New">13</font></td>					<td width="8%" valign="top"><font face="Courier New">1025</font></td>					<td width="8%" valign="top"><font face="Courier New">7</font></td>					<td width="8%" valign="top"><font face="Courier New">0</font></td>					<td width="8%" valign="top"><font face="Courier New">64</font></td>					<td width="8%" valign="top"><font face="Courier New">0</font></td>					<td width="8%" valign="top"><font face="Courier New">0</font></td>					<td width="8%" valign="top"><font face="Courier New">1</font></td>					<td width="8%" valign="top"><font face="Courier New">448</font></td>					<td width="8%" valign="top"><font face="Courier New">1</font></td>					<td width="8%" valign="top"><font face="Courier New">513</font></td>					<td width="8%" valign="top"><font face="Courier New">1</font></td>				</tr>			</table>			</p>		</div>		<p><font face="Times New Roman">In this case signals below a certain level are completely silent. Once they exceed that level they are allowed to pass. Noise gates are sometimes criticized for removing playing dynamics. To solve this problem a delayed signal is used to determine the level and the original signal is modified and output. This results in the gate opening just before playing begins. This technique can also be used on a compressor to prevent compression of initial playing dynamics.<br>		</font></p>		<p><font face="Times New Roman"><img src="figures/02.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx2.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.2</b></font><font face="Times New Roman" size="2"> Noise Gate block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="525">			<tr>				<td width="14%" valign="top"><font face="Courier New">asig</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="28%" valign="top"><font face="Courier New">iinch</font></td>				<td width="18%" valign="top"><font face="Courier New">; Read</font></td>				<td width="14%" valign="top"><font face="Courier New">from</font></td>				<td width="14%" valign="top"><font face="Courier New">input</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">adel1</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="28%" valign="top"><font face="Courier New">ideltm</font></td>				<td width="18%" valign="top"><font face="Courier New">; Delay</font></td>				<td width="14%" valign="top"><font face="Courier New">the</font></td>				<td width="14%" valign="top"><font face="Courier New">signal</font></td>			</tr>			<tr>				<td width="14%" valign="top"></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="28%" valign="top">&nbsp;<font face="Courier New">asig</font></td>				<td width="18%" valign="top">&nbsp;</td>				<td width="14%" valign="top">&nbsp;</td>				<td width="14%" valign="top">&nbsp;</td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">kamp</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">rms</font></a></td>				<td width="28%" valign="top"><font face="Courier New">adel1, ifqc</font></td>				<td width="18%" valign="top"><font face="Courier New">; Calculate</font></td>				<td width="14%" valign="top"><font face="Courier New">RMS</font></td>				<td width="14%" valign="top"></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">kampn</font></td>				<td width="14%" valign="top"><font face="Courier New">=</font></td>				<td width="28%" valign="top"><font face="Courier New">kamp/30000</font></td>				<td width="18%" valign="top"><font face="Courier New">; Normalize</font></td>				<td width="14%" valign="top"><font face="Courier New">to</font></td>				<td width="14%" valign="top"><font face="Courier New">0-1</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">kcomp</font></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>				<td width="28%" valign="top"><font face="Courier New">kampn,itab,1,0</font></td>				<td width="18%" valign="top"><font face="Courier New">; Reference</font></td>				<td width="14%" valign="top"><font face="Courier New">the</font></td>				<td width="14%" valign="top"><font face="Courier New">table</font></td>			</tr>			<tr>				<td width="14%" valign="top"><font face="Courier New">acomp</font></td>				<td width="14%" valign="top"><font face="Courier New">=</font></td>				<td width="28%" valign="top"><font face="Courier New">kcomp*asig*ipostgain</font></td>				<td width="18%" valign="top"><font face="Courier New">; Apply</font></td>				<td width="14%" valign="top"><font face="Courier New">noise</font></td>				<td width="14%" valign="top"><font face="Courier New">gate</font></td>			</tr>			<tr>				<td width="14%" valign="top"></td>				<td width="14%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="28%" valign="top"><font face="Courier New">acomp*kenv, ioutch</font></td>				<td width="18%" valign="top"><font face="Courier New">; Declick</font></td>				<td width="14%" valign="top"><font face="Courier New">and</font></td>				<td width="14%" valign="top"><font face="Courier New">write</font></td>			</tr>		</table>		</p>		<h2><font face="Times New Roman"><b>De-Esser</b></font></h2>		<p><a href="../../instruments/30/3012/3012.html"><font face="Times New Roman">3012</font></a></p>		<p><font face="Times New Roman">The next effect considered in this section is the de-esser. Certain consonant sounds such as 's' and 'p' produce loud artifacts when a microphone is used. The de-esser is a relative of the compressor which can be used to reduce these artifacts. The de-esser monitors the level of the high frequency component of the signal and applies compression to the signal based on this level. This can be implemented by applying a high pass filter to the input signal and monitoring the level of the filtered signal.</font></p>		<p><font face="Times New Roman"><img src="figures/03.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx3.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.3</b></font><font face="Times New Roman" size="2"> De-Esser block diagram.</font></p>		<div align="left">			<p>			<table cellspacing="0" border="0" cellpadding="0" width="508">				<tr>					<td width="13%" valign="top"><font face="Courier New">asig</font></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>					<td width="13%" valign="top"><font face="Courier New">iinch</font></td>					<td width="24%" valign="top"><font face="Courier New">; Read input</font></td>					<td width="16%" valign="top"></td>				</tr>				<tr>					<td width="13%" valign="top"><font face="Courier New">afilt</font></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/butterhp.htm"><font face="Courier New">butterhp</font></a></td>					<td width="13%" valign="top"><font face="Courier New">asig, ifco</font></td>					<td width="24%" valign="top"><font face="Courier New">; Highpass</font></td>					<td width="16%" valign="top"><font face="Courier New">filter</font></td>				</tr>				<tr>					<td width="13%" valign="top"><font face="Courier New">kamp</font></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">rms</font></a></td>					<td width="13%" valign="top"><font face="Courier New">afilt, ifqc</font></td>					<td width="24%" valign="top"><font face="Courier New">; Calculate</font></td>					<td width="16%" valign="top"><font face="Courier New">RMS</font></td>				</tr>				<tr>					<td width="13%" valign="top"><font face="Courier New">kampn</font></td>					<td width="13%" valign="top"><font face="Courier New">=</font></td>					<td width="13%" valign="top"><font face="Courier New">kamp/30000</font></td>					<td width="24%" valign="top"><font face="Courier New">; Normalize</font></td>					<td width="16%" valign="top"><font face="Courier New">RMS 0-1</font></td>				</tr>				<tr>					<td width="13%" valign="top"><font face="Courier New">kcomp</font></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>					<td width="13%" valign="top"><font face="Courier New">kampn,itab,1,0</font></td>					<td width="24%" valign="top"><font face="Courier New">; Look up in</font></td>					<td width="16%" valign="top"><font face="Courier New">table</font></td>				</tr>				<tr>					<td width="13%" valign="top"><font face="Courier New">adel1</font></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>					<td width="13%" valign="top"><font face="Courier New">ideltm</font></td>					<td width="24%" valign="top"><font face="Courier New">; Delay signal</font></td>					<td width="16%" valign="top"></td>				</tr>				<tr>					<td width="13%" valign="top"></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>					<td width="13%" valign="top">&nbsp;<font face="Courier New">asig</font></td>					<td width="24%" valign="top">&nbsp;</td>					<td width="16%" valign="top">&nbsp;</td>				</tr>				<tr>					<td width="13%" valign="top"><font face="Courier New">acomp</font></td>					<td width="13%" valign="top"><font face="Courier New">=</font></td>					<td width="13%" valign="top"><font face="Courier New">kcomp*adel1*ipostgain</font></td>					<td width="24%" valign="top"><font face="Courier New">; Apply de-ess</font></td>					<td width="16%" valign="top"></td>				</tr>				<tr>					<td width="13%" valign="top"></td>					<td width="13%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>					<td width="13%" valign="top"><font face="Courier New">acomp*kenv, ioutch</font></td>					<td width="24%" valign="top"><font face="Courier New">; Declick and</font></td>					<td width="16%" valign="top"><font face="Courier New">output</font></td>				</tr>			</table>			</p>		</div>		<h2><font face="Times New Roman"><b>Distortion</b></font></h2>		<p><a href="../../instruments/30/3013/3013.html"><font face="Times New Roman">3013</font></a></p>		<p><font face="Times New Roman">This section describes a distortion effect. An amplifier can be considered as having two operating ranges: a linear range, and a non-linear range. In the linear range of operation the output signal is an amplified copy of the input signal. In the non-linear range of operation the output signal is a distorted version of the input signal. Early electronic amplifiers were based on vacuum tubes. Vacuum tube distortion is usually described as warmer and more musical than other types of distortion.</font></p>		<p><font face="Times New Roman">If a sine wave signal is passed through an overdriven tube amplifier the resulting waveform differs from the original in several ways. The top of the waveform becomes flattened or clipped. The bottom of the waveform is also flattened although not as much as the top. The duty cycle of the waveform is also shifted so that the upper part of the curve is not the same width as the lower part of the curve. The resulting shape is approximated in figure 30.4.</font></p>		<p><font face="Times New Roman"><img src="figures/04.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx4.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.4</b></font><font face="Times New Roman" size="2"> Waveform of a sine wave processed through a tube amplifier.</font></p>		<p><font face="Times New Roman">Waveshaping may be used to reshape the input waveform to resemble figure 30.4. For slight distortion use the following table:</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="478">			<tr>				<td width="7%" valign="top"><font face="Courier New">f5</font></td>				<td width="7%" valign="top"><font face="Courier New">0</font></td>				<td width="7%" valign="top"><font face="Courier New">8192</font></td>				<td width="7%" valign="top"><font face="Courier New">8</font></td>				<td width="7%" valign="top"><font face="Courier New">-.8</font></td>				<td width="7%" valign="top"><font face="Courier New">336</font></td>				<td width="7%" valign="top"><font face="Courier New">-.78</font></td>				<td width="7%" valign="top"><font face="Courier New">800</font></td>				<td width="7%" valign="top"><font face="Courier New">-.7</font></td>				<td width="7%" valign="top"><font face="Courier New">5920</font></td>				<td width="7%" valign="top"><font face="Courier New">.7</font></td>				<td width="7%" valign="top"><font face="Courier New">800</font></td>				<td width="7%" valign="top"><font face="Courier New">.78</font></td>				<td width="7%" valign="top"><font face="Courier New">336</font></td>				<td width="7%" valign="top"><font face="Courier New">.8</font></td>			</tr>		</table>		</p>		<div align="left">			<p><font face="Times New Roman">For heavy distortion use the following table:</font></p>		</div>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="572">			<tr>				<td width="5%" valign="top"><font face="Courier New">f5</font></td>				<td width="5%" valign="top"><font face="Courier New">0</font></td>				<td width="5%" valign="top"><font face="Courier New">8192</font></td>				<td width="5%" valign="top"><font face="Courier New">7</font></td>				<td width="5%" valign="top"><font face="Courier New">-.8</font></td>				<td width="5%" valign="top"><font face="Courier New">934</font></td>				<td width="5%" valign="top"><font face="Courier New">-.79</font></td>				<td width="5%" valign="top"><font face="Courier New">934</font></td>				<td width="5%" valign="top"><font face="Courier New">-.77</font></td>				<td width="5%" valign="top"><font face="Courier New">934</font></td>				<td width="5%" valign="top"><font face="Courier New">-.64</font></td>				<td width="5%" valign="top"><font face="Courier New">1034</font></td>				<td width="5%" valign="top"><font face="Courier New">-.48</font></td>				<td width="5%" valign="top"><font face="Courier New">520</font></td>				<td width="5%" valign="top"><font face="Courier New">.47</font></td>				<td width="5%" valign="top"><font face="Courier New">2300</font></td>				<td width="5%" valign="top"><font face="Courier New">.48</font></td>				<td width="5%" valign="top"><font face="Courier New">1536</font></td>				<td width="0%" valign="top"><font face="Courier New">.48</font></td>			</tr>		</table>		</p>		<div align="left">			<p><font face="Times New Roman">A shifted duty cycle can be accomplished by implementing an amplitude dependent delay line.</font></p>		</div>		<p><font face="Times New Roman"><img src="figures/05.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx5.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.5</b></font><font face="Times New Roman" size="2"> Distortion block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="617">			<tr>				<td width="10%" valign="top"><font face="Courier New">asigin</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="33%" valign="top"><font face="Courier New">izin</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">aold</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="33%" valign="top"><font face="Courier New">asig</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">asig</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="33%" valign="top"><font face="Courier New">igaini*asigin/60000</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">aclip</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/siggen/table.htm"><font face="Courier New">tablei</font></a></td>				<td width="33%" valign="top"><font face="Courier New">asig,5,1,.5</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">aclip</font></td>				<td width="10%" valign="top"><font face="Courier New">=</font></td>				<td width="33%" valign="top"><font face="Courier New">igainf*aclip*15000</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">atemp</font></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="33%" valign="top"><font face="Courier New">.1</font></td>			</tr>			<tr>				<td width="10%" valign="top"><font face="Courier New">adel1</font></td>				<td width="10%" valign="top"><font face="Courier New">deltapi</font></td>				<td width="33%" valign="top"><font face="Courier New">(2-iduty*asig)/1500+islope*(asig-aold)/300</font></td>			</tr>			<tr>				<td width="10%" valign="top"></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="33%" valign="top">&nbsp;<font face="Courier New">aclip</font></td>			</tr>			<tr>				<td width="10%" valign="top"></td>				<td width="10%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="33%" valign="top"><font face="Courier New">adel1, izout</font></td>			</tr>		</table>		</p>		<h1><font face="Times New Roman"><b>Filtering Effects</b></font></h1>		<p><font face="Times New Roman">This section describes an equalizer, a wah-wah and a resonant low pass filter.</font></p>		<h2><font face="Times New Roman"><b>Equalizer</b></font></h2>		<p><a href="../../instruments/30/3018/3018.html"><font face="Times New Roman">3018</font></a></p>		<p><font face="Times New Roman">An equalizer can be used to increase or decrease the level of different frequencies in a signal. In this example a three band equalizer is implemented. The <a href="../../../references/manual_html/sigmod/butterhp.htm">butterlp</a> and <a href="../../../references/manual_html/sigmod/butterhp.htm">butterhp</a> opcodes are used to isolate the low and high frequency components of the signal. The midrange component is isolated by high pass filtering above the low pass cut off frequency and low pass filtering below the high pass cut off frequency. Individual gains are applied to each of the three signal components before they are added together and output.</font></p>		<p><font face="Times New Roman"><img src="figures/06.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx6.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.6</b></font><font face="Times New Roman" size="2"> A 3-Band Equalizer block diagram.</font></p>		<h2>		<table cellspacing="0" border="0" cellpadding="0" width="615">			<tr>				<td width="12%" valign="top"><font face="Courier New">alosig</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigmod/butterhp.htm"><font face="Courier New">butterlp</font></a></td>				<td width="14%" valign="top"><font face="Courier New">asig, ilofco</font></td>				<td width="14%" valign="top"><font face="Courier New">; Low</font></td>				<td width="14%" valign="top"><font face="Courier New">pass</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">atmpsig</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigmod/butterhp.htm"><font face="Courier New">butterhp</font></a></td>				<td width="14%" valign="top"><font face="Courier New">asig, ilofco-ilofco/4</font></td>				<td width="14%" valign="top"><font face="Courier New">; Midrange</font></td>				<td width="14%" valign="top"><font face="Courier New">1</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">amidsig</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigmod/butterhp.htm"><font face="Courier New">butterlp</font></a></td>				<td width="14%" valign="top"><font face="Courier New">atmpsig, ihifco+ihifco/4</font></td>				<td width="14%" valign="top"><font face="Courier New">; Midrange</font></td>				<td width="14%" valign="top"><font face="Courier New">2</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">ahisig</font></td>				<td width="12%" valign="top"><a href="../../../references/manual_html/sigmod/butterhp.htm"><font face="Courier New">butterhp</font></a></td>				<td width="14%" valign="top"><font face="Courier New">asig, ihifco</font></td>				<td width="14%" valign="top"><font face="Courier New">; Hi</font></td>				<td width="14%" valign="top"><font face="Courier New">pass</font></td>			</tr>			<tr>				<td width="12%" valign="top"><font face="Courier New">aout</font></td>				<td width="12%" valign="top"><font face="Courier New">=</font></td>				<td width="14%" valign="top"><font face="Courier New">ilogain*alosig+imidgain*amidsig+ihigain*ahisig</font></td>				<td width="14%" valign="top">&nbsp;</td>				<td width="14%" valign="top">&nbsp;</td>			</tr>		</table>		</h2>		<h2><font face="Times New Roman"><b>Wah-Wah</b></font></h2>		<p><a href="../../instruments/30/3016/3016.html"><font face="Times New Roman">3016</font></a></p>		<p><font face="Times New Roman">A wah-wah pedal is a type of low-pass filter which incorporates several resonances to give it a unique character. In this example several resonances derived from vowel sounds &quot;ahh&quot; and &quot;ooh&quot; are used to add character to the standard low pass filter sound. The vowel &quot;ahh&quot; has resonances and amplitudes of 730 Hz -1 db, 1090 Hz -5 db, 2440 Hz -28 db. The vowel &quot;ooh&quot; has resonances of 300 Hz -3 db, 870 Hz -19 db, 2240 Hz -43 db. As the frequency is swept from high to low the resonances are swept from &quot;ahh&quot; to &quot;ooh.&quot;</font></p>		<p><font face="Times New Roman"><img src="figures/07.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx7.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.7</b></font><font face="Times New Roman" size="2"> Wah-Wah.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="587">			<tr>				<td width="11%" valign="top"><font face="Courier New">kosc1</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="11%" valign="top"><font face="Courier New">.5, irate, itab1, .25</font></td>				<td width="22%" valign="top">; <font face="Courier New">Oscilator</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kosc2</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">kosc1+.5</font></td>				<td width="22%" valign="top"><font face="Courier New">; Rescale for 0-1</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kosc3</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">kosc2</font></td>				<td width="22%" valign="top"><font face="Courier New">; Formant Depth</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">klopass</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">idepth*kosc2+ilow</font></td>				<td width="22%" valign="top"><font face="Courier New">; Filter</font>&nbsp;<font face="Courier New">range</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kform1</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">430*kosc2+300</font></td>				<td width="22%" valign="top"><font face="Courier New">; Formant 1 range</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kamp1</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">ampdb(-2*kosc3+59)*ifmix</font></td>				<td width="22%" valign="top"><font face="Courier New">; F1 level</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kform2</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">220*kosc2+870</font></td>				<td width="22%" valign="top"><font face="Courier New">; F2 range</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kamp2</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">ampdb(-14*kosc3+55)*ifmix</font></td>				<td width="22%" valign="top"><font face="Courier New">; F2 level</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kform3</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">200*kosc2+2240</font></td>				<td width="22%" valign="top"><font face="Courier New">; F3 range</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">kamp3</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">ampdb(-15*kosc3+32)*ifmix</font></td>				<td width="22%" valign="top"><font face="Courier New">; F3 level</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">afilt</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/butterhp.htm"><font face="Courier New">butterlp</font></a></td>				<td width="11%" valign="top"><font face="Courier New">asig, klopass</font></td>				<td width="22%" valign="top"><font face="Courier New">; Lowpass</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ares1</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/port.htm"><font face="Courier New">reson</font></a></td>				<td width="11%" valign="top"><font face="Courier New">afilt, kform1, kform1/8</font></td>				<td width="22%" valign="top"><font face="Courier New">; Apply</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ares2</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/port.htm"><font face="Courier New">reson</font></a></td>				<td width="11%" valign="top"><font face="Courier New">afilt, kform2, kform1/8</font></td>				<td width="22%" valign="top"><font face="Courier New">; formant</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">ares3</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/port.htm"><font face="Courier New">reson</font></a></td>				<td width="11%" valign="top"><font face="Courier New">afilt, kform3, kform1/8</font></td>				<td width="22%" valign="top"><font face="Courier New">; filters 1-3</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aresbal1</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">balance</font></a></td>				<td width="11%" valign="top"><font face="Courier New">ares1, afilt</font></td>				<td width="22%" valign="top"><font face="Courier New">; Restore</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aresbal2</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">balance</font></a></td>				<td width="11%" valign="top"><font face="Courier New">ares2, afilt</font></td>				<td width="22%" valign="top"><font face="Courier New">; balance</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aresbal3</font></td>				<td width="11%" valign="top"><a href="../../../references/manual_html/sigmod/rms.htm"><font face="Courier New">balance</font></a></td>				<td width="11%" valign="top"><font face="Courier New">ares3, afilt</font></td>				<td width="22%" valign="top">&nbsp;</td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aout</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">afilt+kamp1*aresbal1</font></td>				<td width="22%" valign="top"><font face="Courier New">; Add signals</font></td>			</tr>			<tr>				<td width="11%" valign="top"><font face="Courier New">aout</font></td>				<td width="11%" valign="top"><font face="Courier New">=</font></td>				<td width="11%" valign="top"><font face="Courier New">aout+kamp2*aresbal2+kamp3*aresbal3</font></td>				<td width="22%" valign="top">&nbsp;</td>			</tr>		</table>		</p>		<div align="left">			<h2><font face="Times New Roman"><b>Resonant Low Pass Filter</b></font></h2>			<p><a href="../../instruments/30/3015/3015.html"><font face="Times New Roman">3015</font></a></p>		</div>		<p><font face="Times New Roman">Some theory of resonant filters can be found in the chapter &quot;Classic Keyboard Instruments&quot; and will not be discussed here in detail. This implementation uses the <a href="../../../references/manual_html/sigmod/nlfilt.htm">nlfilt</a> opcode which avoids the need of setting kr=sr and also provides for simpler code. This filter is designed to resonate for approximately the same amount of time no matter what the cut-off frequency is.</font></p>		<p><font face="Times New Roman"><img src="figures/08.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx8.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.8</b></font><font face="Times New Roman" size="2"> Low pass resonant filter block diagram.</font></p>		<h2>		<table cellspacing="0" border="0" cellpadding="0" width="669">			<tr>				<td width="9%" valign="top"><font face="Courier New">kfco</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="60%" valign="top"><font face="Courier New">1, 1/idur, itab1</font></td>				<td width="39%" valign="top"><font face="Courier New">; Cut-off frequency sweep</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">kfcort</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">sqrt(kfco)</font></td>				<td width="39%" valign="top"><font face="Courier New">; by table 1</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">krezo</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="60%" valign="top"><font face="Courier New">1, 1/idur, itab2</font></td>				<td width="39%" valign="top"><font face="Courier New">; Resonance sweep</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">krez</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">krezo * kfco/500</font></td>				<td width="39%" valign="top"><font face="Courier New">; by table 2</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">kamp</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/siggen/line.htm"><font face="Courier New">linseg</font></a></td>				<td width="60%" valign="top"><font face="Courier New">0, .002, 1, p3-.004, 1, .002, 0</font></td>				<td width="39%" valign="top"><font face="Courier New">; Declick</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">axn</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="60%" valign="top"><font face="Courier New">izin</font></td>				<td width="39%" valign="top">&nbsp;</td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ka1</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">1000/krez/kfco-1</font></td>				<td width="39%" valign="top"><font face="Courier New">; Resonant LP filter</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ka2</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">100000/kfco/kfco</font></td>				<td width="39%" valign="top">&nbsp;</td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">kb</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">1+ka1+ka2</font></td>				<td width="39%" valign="top">&nbsp;</td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ay1</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/sigmod/nlfilt.htm"><font face="Courier New">nlfilt</font></a></td>				<td width="60%" valign="top"><font face="Courier New">axn/kb, (ka1+2*ka2)/kb, -ka2/kb, 0, 0, 1</font></td>				<td width="39%" valign="top"></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ay</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/sigmod/nlfilt.htm"><font face="Courier New">nlfilt</font></a></td>				<td width="60%" valign="top"><font face="Courier New">ay1/kb, (ka1+2*ka2)/kb, -ka2/kb, 0, 0, 1</font></td>				<td width="39%" valign="top"></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ka1lp</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">1000/kfco-1</font></td>				<td width="39%" valign="top"><font face="Courier New">; Lowpass filter </font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ka2lp</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">100000/kfco/kfco</font></td>				<td width="39%" valign="top"></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">kblp</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">1+ka1lp+ka2lp</font></td>				<td width="39%" valign="top">&nbsp;</td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">aylp</font></td>				<td width="9%" valign="top"><a href="../../../references/manual_html/sigmod/nlfilt.htm"><font face="Courier New">nlfilt</font></a></td>				<td width="60%" valign="top"><font face="Courier New">ay1lp/kblp, (ka1lp+2*ka2lp)/kblp, ka2lp/kblp, 0, 0, 1</font></td>				<td width="39%" valign="top"></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ayrez</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">ay - aylp</font></td>				<td width="39%" valign="top"><font face="Courier New">; Extract the resonance</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ayrz</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">ayrez/kfco</font></td>				<td width="39%" valign="top"><font face="Courier New">; Adjust res. gain</font></td>			</tr>			<tr>				<td width="9%" valign="top"><font face="Courier New">ay2</font></td>				<td width="9%" valign="top"><font face="Courier New">=</font></td>				<td width="60%" valign="top"><font face="Courier New">ylp*6*ilpmixa+ayrz*300*irzmix</font></td>				<td width="39%" valign="top"><font face="Courier New">; Mix Q &amp; LP</font></td>			</tr>		</table>		</h2>		<h1><font face="Times New Roman"><b>Pitch Effects</b></font></h1>		<p><font face="Times New Roman">This section describes vibrato, pitch shifting, chorus and flanging effects. All of these effects make use of delay lines whose delay times are modulated with an oscillator. An interpolating delay tap, <a href="../../../references/manual_html/sigmod/deltap.htm">deltapi</a>, is used to allow continuous variation of the delay time.</font></p>		<h2><font face="Times New Roman"><b>Vibrato</b></font></h2>		<p><a href="../../instruments/30/3020/3020.html"><font face="Times New Roman">3020</font></a></p>		<p><font face="Times New Roman">Vibrato can be accomplished by modulating a variable delay tap with a sine wave. When the delay tap sweeps forward in the same direction as the signal the pitch is lowered. As the delay tap sweeps backwards in the opposite direction of the signal the pitch is raised.</font></p>		<p><font face="Times New Roman"><img src="figures/09.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx9.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.9</b></font><font face="Times New Roman" size="2"> Vibrato block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="492">			<tr>				<td width="16%" valign="top"><font face="Courier New">asig</font></td>				<td width="16%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="20%" valign="top"><font face="Courier New">izin</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">kosc</font></td>				<td width="16%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="20%" valign="top"><font face="Courier New">iamp, ifqc, itab1</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">atemp</font></td>				<td width="16%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="20%" valign="top"><font face="Courier New">imax</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">aout</font></td>				<td width="16%" valign="top"><a href="../../../references/manual_html/sigmod/deltap.htm"><font face="Courier New">deltapi</font></a></td>				<td width="20%" valign="top">&nbsp;<font face="Courier New">kosc+imax/2</font></td>			</tr>			<tr>				<td width="16%" valign="top"></td>				<td width="16%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="20%" valign="top"><font face="Courier New">asig</font></td>			</tr>			<tr>				<td width="16%" valign="top"></td>				<td width="16%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="20%" valign="top"><font face="Courier New">aout,<a href="../../../references/manual_html/zak/ziw.htm"> </a>izout</font></td>			</tr>		</table>		</p>		<h2><font face="Times New Roman"><b>Pitch Shifting</b></font></h2>		<p><a href="../../instruments/30/3022/3022.html"><font face="Times New Roman">3022</font></a></p>		<p><font face="Times New Roman">A simple type of pitch shifting can be implemented with a variable length interpolating delay tap. The delay time is modulated with a sawtooth wave whose amplitude is equal to the wavelength of the sound. This results in a resampling of the wave form with linear interpolation between successive samples. Lowering the pitch results in cycles being discarded periodically. Raising the pitch results in some cycles being repeated. In order to produce a good quality sample the wavelength of the sound must be known. In this example it is simply supplied when the instrument is called.</font></p>		<p><font face="Times New Roman"><img src="figures/10.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx10.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.10</b></font><font face="Times New Roman" size="2"> Pitch Shifter block diagram.</font></p>		<div align="left">			<p>			<table cellspacing="0" border="0" cellpadding="0" width="438">				<tr>					<td width="15%" valign="top"><font face="Courier New">klfo</font></td>					<td width="16%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>					<td width="20%" valign="top"><font face="Courier New">1/kfqc, ipsh*kfqc, itab1</font></td>				</tr>				<tr>					<td width="15%" valign="top"><font face="Courier New">atemp</font></td>					<td width="16%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>					<td width="20%" valign="top"><font face="Courier New">1/ifqc</font></td>				</tr>				<tr>					<td width="15%" valign="top"><font face="Courier New">atap1</font></td>					<td width="16%" valign="top"><a href="../../../references/manual_html/sigmod/deltap.htm"><font face="Courier New">deltapi</font></a></td>					<td width="20%" valign="top"><font face="Courier New">klfo</font></td>				</tr>				<tr>					<td width="15%" valign="top"></td>					<td width="16%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>					<td width="20%" valign="top">&nbsp;<font face="Courier New">aosc</font></td>				</tr>			</table>			</p>		</div>		<h2><font face="Times New Roman"><b>Chorus</b></font></h2>		<p><a href="../../instruments/30/3035/3035.html"><font face="Times New Roman">3035</font></a></p>		<p><font face="Times New Roman">Chorus is an effect which attempts to make one instrument sound like more than one instrument. The resulting sound is thicker than the original sound. Chorus can be implemented by adding the original signal to a frequency modulated delayed signal. The signal is typically delayed between 20 and 30 msec. Gain is applied to control the amount of mix between the original signal and the delayed signal. Common waveforms used to modulate the signal are sine, triangle and logarithmic waves.<br>		</font></p>		<p><font face="Times New Roman"><img src="figures/11.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx11.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.11</b></font><font face="Times New Roman" size="2"> Chorus block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0">			<tr>				<td width="53" valign="top"><font face="Courier New">kamp</font></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/siggen/line.htm"><font face="Courier New">linseg</font></a></td>				<td width="511" valign="top"><font face="Courier New">0, .002, 1, p3-.004, 1, .002, 0</font></td>			</tr>			<tr>				<td width="53" valign="top"><font face="Courier New">asig</font></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="511" valign="top"><font face="Courier New">izin</font></td>			</tr>			<tr>				<td width="53" valign="top"><font face="Courier New">aosc1</font></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="511" valign="top"><font face="Courier New">idepth, irate, iwave, iphase</font></td>			</tr>			<tr>				<td width="53" valign="top"><font face="Courier New">aosc2</font></td>				<td width="55%" valign="top"><font face="Courier New">=</font></td>				<td width="511" valign="top"><font face="Courier New">aosc1+ideloff</font></td>			</tr>			<tr>				<td width="53" valign="top"><font face="Courier New">atemp</font></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="511" valign="top"><font face="Courier New">idepth+ideloff</font></td>			</tr>			<tr>				<td width="53" valign="top"><font face="Courier New">adel1</font></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/sigmod/deltap.htm"><font face="Courier New">deltapi</font></a></td>				<td width="511" valign="top"><font face="Courier New">aosc2</font></td>			</tr>			<tr>				<td width="53" valign="top"></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="511" valign="top"><font face="Courier New">asig</font></td>			</tr>			<tr>				<td width="53" valign="top"><font face="Courier New">aout</font></td>				<td width="55%" valign="top"><font face="Courier New">=</font></td>				<td width="511" valign="top"><font face="Courier New">(adel1*imix+asig)/2*kamp</font></td>			</tr>			<tr>				<td width="53" valign="top"></td>				<td width="55%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="511" valign="top"><font face="Courier New">aout, izout</font></td>			</tr>		</table>		</p>		<p><font face="Times New Roman">A stereo chorus effect can be created by having two choruses one quarter cycle out of phase of each other and sending the output of each to a separate channel. Many choruses can be combined with different phases, waveforms and delay times to produce a very rich sound.</font></p>		<h2>		<table cellspacing="0" border="0" cellpadding="0" width="478">			<tr>				<td width="8%" valign="top"><font face="Courier New">;</font></td>				<td width="8%" valign="top"><font face="Courier New">Ins</font></td>				<td width="8%" valign="top"><font face="Courier New">Sta</font></td>				<td width="8%" valign="top"><font face="Courier New">Dur</font></td>				<td width="8%" valign="top"><font face="Courier New">Rate</font></td>				<td width="8%" valign="top"><font face="Courier New">Depth</font></td>				<td width="8%" valign="top"><font face="Courier New">Wave</font></td>				<td width="8%" valign="top"><font face="Courier New">Mix</font></td>				<td width="8%" valign="top"><font face="Courier New">Delay</font></td>				<td width="8%" valign="top"><font face="Courier New">Phase</font></td>				<td width="8%" valign="top"><font face="Courier New">InCh</font></td>				<td width="8%" valign="top">&nbsp;<font face="Courier New">OutCh</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">i</font></td>				<td width="8%" valign="top"><font face="Courier New">35</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">1.6</font></td>				<td width="8%" valign="top"><font face="Courier New">.5</font></td>				<td width="8%" valign="top"><font face="Courier New">2</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">25</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">2</font></td>				<td width="8%" valign="top"><font face="Courier New">3</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">i</font></td>				<td width="8%" valign="top"><font face="Courier New">35</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">1.6</font></td>				<td width="8%" valign="top"><font face="Courier New">.5</font></td>				<td width="8%" valign="top"><font face="Courier New">2</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">20</font></td>				<td width="8%" valign="top"><font face="Courier New">.25</font></td>				<td width="8%" valign="top"><font face="Courier New">2</font></td>				<td width="8%" valign="top"><font face="Courier New">4</font></td>			</tr>		</table>		</h2>		<h2><font face="Times New Roman"><b>Flanger</b></font></h2>		<p><a href="../../instruments/30/3030/3030.html"><font face="Times New Roman">3030</font></a></p>		<p><font face="Times New Roman">Flanging was originally produced by taking two tapes with the same music on them and playing at them at the same time. By pushing on the flanges of one of the tape reels the playback speed of one of the copies of the sound was modulated. This detuning of the signal results in areas of constructive and destructive interference as the different frequencies move in and out of phase with each other. This produces notches in the audio spectrum. As the frequency of the modulated signal is swept back and forth these notches move closer together and farther apart. This produces the characteristic &quot;jet airplane&quot; effect. In this implementation the original signal is added to a delayed signal. The delay time is modulated by a sine wave so that the pitch of the delayed signal is modulated. The combined signal is then fed back into the beginning of the delay path which makes a more pronounced flanging effect. Typical delay times are 10 msec.</font></p>		<p><font face="Times New Roman"><img src="figures/12.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx12.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.12</b></font><font face="Times New Roman" size="2"> Flanger block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="468">			<tr>				<td width="17%" valign="top"><font face="Courier New">asig1</font></td>				<td width="17%" valign="top"><font face="Courier New">=</font></td>				<td width="17%" valign="top"><font face="Courier New">asig+ifdbk*adel1</font></td>			</tr>			<tr>				<td width="17%" valign="top"><font face="Courier New">aosc1</font></td>				<td width="17%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="17%" valign="top"><font face="Courier New">idepth, irate, iwave, iphase</font></td>			</tr>			<tr>				<td width="17%" valign="top"><font face="Courier New">aosc2</font></td>				<td width="17%" valign="top"><font face="Courier New">=</font></td>				<td width="17%" valign="top"><font face="Courier New">aosc1+ideloff</font></td>			</tr>			<tr>				<td width="17%" valign="top"><font face="Courier New">atemp</font></td>				<td width="17%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="17%" valign="top"><font face="Courier New">idepth+ideloff</font></td>			</tr>			<tr>				<td width="17%" valign="top"><font face="Courier New">adel1</font></td>				<td width="17%" valign="top"><a href="../../../references/manual_html/sigmod/deltap.htm"><font face="Courier New">deltapi</font></a></td>				<td width="17%" valign="top"><font face="Courier New">aosc2</font></td>			</tr>			<tr>				<td width="17%" valign="top"></td>				<td width="17%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="17%" valign="top">&nbsp;<font face="Courier New">asig1</font></td>			</tr>			<tr>				<td width="17%" valign="top"><font face="Courier New">aout</font></td>				<td width="17%" valign="top"><font face="Courier New">=</font></td>				<td width="17%" valign="top"><font face="Courier New">(imix*adel1+asig)/2</font></td>			</tr>		</table>		</p>		<p><font face="Times New Roman">A stereo flanger can be implemented by running two flangers at one quarter cycle out of phase from each other and sending each to a separate channel as follows:</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="478">			<tr>				<td width="8%" valign="top"><font face="Courier New">;</font></td>				<td width="8%" valign="top"><font face="Courier New">Sta</font></td>				<td width="8%" valign="top"><font face="Courier New">Dur</font></td>				<td width="8%" valign="top"><font face="Courier New">Rate</font></td>				<td width="8%" valign="top"><font face="Courier New">Depth</font></td>				<td width="8%" valign="top"><font face="Courier New">Wave</font></td>				<td width="8%" valign="top"><font face="Courier New">Feedbk</font></td>				<td width="8%" valign="top"><font face="Courier New">Mix</font></td>				<td width="8%" valign="top"><font face="Courier New">Delay</font></td>				<td width="8%" valign="top"><font face="Courier New">Phase</font></td>				<td width="8%" valign="top"><font face="Courier New">InCh</font></td>				<td width="8%" valign="top"><font face="Courier New">OutCh</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">i30</font></td>				<td width="8%" valign="top"><font face="Courier New">4</font></td>				<td width="8%" valign="top"><font face="Courier New">1.6</font></td>				<td width="8%" valign="top"><font face="Courier New">.5</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">.8</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">0</font></td>				<td width="8%" valign="top"><font face="Courier New">2</font></td>				<td width="8%" valign="top"><font face="Courier New">3</font></td>			</tr>			<tr>				<td width="8%" valign="top"><font face="Courier New">i30</font></td>				<td width="8%" valign="top"><font face="Courier New">4</font></td>				<td width="8%" valign="top"><font face="Courier New">1.6</font></td>				<td width="8%" valign="top"><font face="Courier New">.5</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">.8</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">1</font></td>				<td width="8%" valign="top"><font face="Courier New">.25</font></td>				<td width="8%" valign="top"><font face="Courier New">2</font></td>				<td width="8%" valign="top"><font face="Courier New">4</font></td>			</tr>		</table>		</p>		<h1><font face="Times New Roman"><b>Miscellaneous Effects</b></font></h1>		<p><font face="Times New Roman">This section describes a digital delay, a panner, a tremolo effect and simple reverb effect.</font></p>		<h2><font face="Times New Roman"><b>Stereo Delay</b></font></h2>		<p><a href="../../instruments/30/3040/3040.html"><font face="Times New Roman">3040</font></a></p>		<p><font face="Times New Roman">This section describes a stereo delay with cross feedback. The <a href="../../../references/manual_html/sigmod/delayr.htm">delayr</a> and <a href="../../../references/manual_html/sigmod/delayr.htm">delayw</a> opcodes provide a straight forward implementation of this. The right and left channels are delayed independently. The delayed signal from each channel may be mixed with the original signal either channel.</font></p>		<p><font face="Times New Roman"><img src="figures/13.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx13.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.13</b> Stereo Delay block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="358">			<tr>				<td width="18%" valign="top"><font face="Courier New">aoutl</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>				<td width="25%" valign="top"><font face="Courier New">0</font></td>			</tr>			<tr>				<td width="18%" valign="top"><font face="Courier New">aoutr</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/syntax/assign.htm"><font face="Courier New">init</font></a></td>				<td width="25%" valign="top">&nbsp;<font face="Courier New">0</font></td>			</tr>			<tr>				<td width="18%" valign="top"><font face="Courier New">asigl</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="25%" valign="top"><font face="Courier New">izinl</font></td>			</tr>			<tr>				<td width="18%" valign="top"><font face="Courier New">asigr</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="25%" valign="top"><font face="Courier New">izinr</font></td>			</tr>			<tr>				<td width="18%" valign="top"><font face="Courier New">aoutl</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="25%" valign="top"><font face="Courier New">itim1</font></td>			</tr>			<tr>				<td width="18%" valign="top"></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="25%" valign="top"><font face="Courier New">asigl+ifdbk1*aoutl+ixfdbk1*aoutr</font></td>			</tr>			<tr>				<td width="18%" valign="top"><font face="Courier New">aoutr</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayr</font></a></td>				<td width="25%" valign="top"><font face="Courier New">itim2</font></td>			</tr>			<tr>				<td width="18%" valign="top"></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/sigmod/delayr.htm"><font face="Courier New">delayw</font></a></td>				<td width="25%" valign="top"><font face="Courier New">asigr+ifdbk2*aoutr+ixfdbk2*aoutl</font></td>			</tr>			<tr>				<td width="18%" valign="top"></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="25%" valign="top"><font face="Courier New">aoutl, izoutl</font></td>			</tr>			<tr>				<td width="18%" valign="top"></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="25%" valign="top">&nbsp;<font face="Courier New">aoutr, izoutr</font></td>			</tr>		</table>		</p>		<h2><font face="Times New Roman"><b>Tremolo</b></font></h2>		<p><a href="../../instruments/30/3021/3021.html"><font face="Times New Roman">3021</font></a></p>		<p><font face="Times New Roman">Tremolo is usually considered to be a periodic variation in the volume of a sound. This can be implemented by generating a low frequency oscillating sine wave between 0 and 1 in amplitude and simply multiplying the input signal by this.</font></p>		<p><font face="Times New Roman"><img src="figures/14.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx14.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.14</b></font><font face="Times New Roman" size="2"> Tremolo block diagram.</font></p>		<div align="left">			<p>			<table cellspacing="0" border="0" cellpadding="0" width="234">				<tr>					<td width="20%" valign="top"><font face="Courier New">kosc</font></td>					<td width="20%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>					<td width="20%" valign="top"><font face="Courier New">iamp, ifqc, itab1</font></td>				</tr>				<tr>					<td width="20%" valign="top"><font face="Courier New">aout</font></td>					<td width="20%" valign="top"><font face="Courier New">=</font></td>					<td width="20%" valign="top"><font face="Courier New">asig*(kosc+1)</font></td>				</tr>			</table>			</p>		</div>		<p><font face="Times New Roman">A square wave can be used to generate an amplitude gated sound.</font></p>		<h2><font face="Times New Roman"><b>Panner</b></font></h2>		<p><a href="../../instruments/30/3023/3023.html"><font face="Times New Roman">3023</font></a></p>		<p><font face="Times New Roman">A panner can be implemented by multiplying one channel by a low frequency sine wave and multiplying the other channel by one minus the low frequency sine wave so that the channels are 180 degrees out of phase with each other. This way the signal is swept from one channel to the other by the oscillator.</font></p>		<p><font face="Times New Roman"><img src="figures/15.gif" sgi_src="/tmp_mnt/home/bull6/hpm/reality/multifx/mltfx15.gif"></font></p>		<p><font face="Times New Roman" size="2"><b>Figure 30.15</b> Panner block diagram.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="376">			<tr>				<td width="16%" valign="top"><font face="Courier New">asig</font></td>				<td width="18%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="20%" valign="top"><font face="Courier New">izin</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">kosc</font></td>				<td width="18%" valign="top"><a href="../../../references/manual_html/siggen/oscil.htm"><font face="Courier New">oscil</font></a></td>				<td width="20%" valign="top"><font face="Courier New">iamp, ifqc, itab1</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">kpanl</font></td>				<td width="18%" valign="top"><font face="Courier New">=</font></td>				<td width="20%" valign="top"><font face="Courier New">(kosc+1)/2</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">kpanr</font></td>				<td width="18%" valign="top"><font face="Courier New">=</font></td>				<td width="20%" valign="top">&nbsp;<font face="Courier New">1-kpanl</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">aoutl</font></td>				<td width="18%" valign="top"><font face="Courier New">=</font></td>				<td width="20%" valign="top"><font face="Courier New">asig*kpanl</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">aoutr</font></td>				<td width="18%" valign="top"><font face="Courier New">=</font></td>				<td width="20%" valign="top">&nbsp;<font face="Courier New">asig*kpanr</font></td>			</tr>			<tr>				<td width="16%" valign="top"></td>				<td width="18%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="20%" valign="top"><font face="Courier New">aoutl, izoutl</font></td>			</tr>			<tr>				<td width="16%" valign="top"></td>				<td width="18%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="20%" valign="top"><font face="Courier New">aoutr, izoutr</font></td>			</tr>		</table>		</p>		<h2><font face="Times New Roman"><b>Reverb</b></font></h2>		<p><a href="../../instruments/30/3045/3045.html"><font face="Times New Roman">3045</font></a></p>		<p><font face="Times New Roman">All sound produces some type of reverberation as the sound waves are reflected and absorbed on surfaces in the listening environment. The type of reverb depends on the size, shape and material of the area in which the sound is produced. A concert hall can produce a very rich spacious reverb. Artificial reverb is often added to signals to make them sound as if they were generated in a specific type of area such as a concert hall. Reverberation can be simulated by using a combination of all pass filters, comb filters and delays. Csound provides a <a href="../../../references/manual_html/sigmod/reverb2.htm">reverb2</a> opcode for generating simple reverbs. This is used in the following instrument to create a very simple reverb. There are many excellent examples of reverb available in the Csound archives which can be modified to work with the system presented in this chapter.</font></p>		<p>		<table cellspacing="0" border="0" cellpadding="0" width="368">			<tr>				<td width="16%" valign="top"><font face="Courier New">asig</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/zak/zir.htm"><font face="Courier New">zar</font></a></td>				<td width="20%" valign="top"><font face="Courier New">izin</font></td>			</tr>			<tr>				<td width="16%" valign="top"><font face="Courier New">aout</font></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/sigmod/reverb2.htm"><font face="Courier New">reverb2</font></a></td>				<td width="20%" valign="top"><font face="Courier New">asig, irvtime, irvfqc</font></td>			</tr>			<tr>				<td width="16%" valign="top"></td>				<td width="20%" valign="top"><a href="../../../references/manual_html/zak/ziw.htm"><font face="Courier New">zaw</font></a></td>				<td width="20%" valign="top"><font face="Courier New">aout/5, izout</font></td>			</tr>		</table>		</p>		<div align="left">			<h1><font face="Times New Roman"><b>Conclusion</b></font></h1>		</div>		<p><font face="Times New Roman">Hopefully this section has provided insight into the theory and implementation of many of the most popular sound effects and has provided inspiration for further audio experiments. Some further ideas to try would be to use different waveforms with the pitch based effects, try calling the chorus routine many times with different parameters and waveforms to produce a dense chorusing effect. Try setting up different types of distortion and then devise an instrument to oscillate between them. Add attack and decay envelopes to the dynamics effects. If you have a fast computer one of the first things you may wish to do is to implement real-time input and output for the effects.</font></p>		<h2><font face="Times New Roman"><b>References</b></font></h2>		<p><font face="Times New Roman">Lehman, S. <i>Effects Explained. </i>http://www.harmony-central.com/Effects/.</font></p>		<p><font face="Times New Roman">Hamm, R., O.<i> </i>&quot;Tubes Versus Transistors - Is There an Audible Difference?&quot;, <i>Journal of the Audio Engineering Society</i>, May 1973.</font></p>		<p><font face="Times New Roman">Cronin, Dennis &quot;Examining Audio DSP Programs,&quot; <i>Dr. Dobb's Journal</i>, July 1994.</font>	</body></html>