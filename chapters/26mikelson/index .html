<HTML>  
<HEAD>
  <META NAME="GENERATOR" CONTENT="Adobe PageMill 3.0 Mac">
  <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=iso-8859-1">
  <TITLE>Terrain Mapping Synthesis</TITLE>
  <META NAME="Template" CONTENT="C:\PROGRAM FILES\MICROSOFT OFFICE\OFFICE\html.dot">
</HEAD>
<BODY LINK="#0000ff" BGCOLOR="#ffffff">

<H1><FONT FACE="Times New Roman">25. Terrain Mapping Synthesis</FONT></H1>

<H2><FONT FACE="Times New Roman">Hans Mikelson</FONT></H2>

<H3><FONT FACE="Times New Roman">Introduction</FONT></H3>

<P><FONT FACE="Times New Roman">This chapter describes the synthesis
method known as terrain mapping. In terrain mapping synthesis
a sound is generated by tracing a path or orbit along a surface.
The height of the surface at the position of the orbit is used
to determine the amplitude of the sound. The example orchestra
and score, <A HREF="terrain.orc">terrain.orc</A> and <A HREF="terrain.sco">terrain.sco</A>,
which accompany this chapter use only terrain mapping as sound
sources. The most important step in terrain mapping synthesis
is selecting a surface. The surface should be somewhat complex
to produce an interesting sound. Singular points that shoot off
to infinity should generally be avoided. Sharp edges will produce
clicks which may not be desirable. Terrain mapping lends itself
to a large number of modulation possibilities. One possibility
is to modulate the parameters of the orbit or surface. Another
possible modulation is to rotate the orbit or surface. The following
sections describe the orbits, the surfaces and the modulations
used in each instrument in the example orchestra and score.</FONT></P>

<H3><FONT FACE="Times New Roman">Terrain Bass Instrument</FONT></H3>

<P><FONT FACE="Times New Roman">The first instrument described
is a terrain mapped bass. This instrument uses a circular path
for its orbit. To make a more interesting sound the radius of
the circle is modulated and offset from the origin. Separate pulsing
circles are used to generate the left and right audio signals.
The frequency at which the orbit is traced controls the fundamental
frequency of the tone. A pitch envelope is applied to the frequency
to add more character to the sound.</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/44.gif" WIDTH="156"
HEIGHT="154" NATURALSIZEFLAG="3" ALIGN="BOTTOM"><BR>
</FONT></P>

<PRE><B><FONT FACE="Times New Roman">Figure 1</FONT></B><FONT FACE="Times New Roman"> The circle is modulated between two different radii.</FONT></PRE>

<P><FONT FACE="Times New Roman">This is implemented by the following
Csound code.</FONT></P>

<PRE><FONT FACE="Courier New">asin1	oscil	krad1, kfqc, 1	; Y component of circle radius 1 </FONT>
<FONT FACE="Courier New">acos1	oscil	krad1, kfqc, 1, .25	; X component of circle radius 1</FONT>
<FONT FACE="Courier New">asin2	oscil	krad2, kfqc, 1, .5	; Y component of circle radius 2</FONT>
<FONT FACE="Courier New">acos2	oscil	krad2, kfqc, 1, .75	; X component of circle radius 2</FONT>
<FONT FACE="Courier New">			</FONT>
<FONT FACE="Courier New">ax1	=	asin1+.35	; Offset the circle centers a bit</FONT>
<FONT FACE="Courier New">ay1	=	acos1-.80 	; so the waves are assymmetrical.</FONT>
<FONT FACE="Courier New">ax2	=	asin2+.5	</FONT>
<FONT FACE="Courier New">ay2	=	acos2-.20	</FONT></PRE>

<P><FONT FACE="Times New Roman">The surface traced by this orbit
uses the equation</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/45.gif" WIDTH="221"
HEIGHT="25" NATURALSIZEFLAG="3" ALIGN="BOTTOM"> (1)</FONT></P>

<P><FONT FACE="Times New Roman">A graph of this surface is presented
in figure 2.</FONT></P>

<PRE><FONT FACE="Times New Roman"><IMG SRC="figures/36.gif" WIDTH="583"
HEIGHT="387" NATURALSIZEFLAG="0" ALIGN="BOTTOM">
</FONT>
<B><FONT FACE="Times New Roman">Figure 2</FONT></B><FONT FACE="Times New Roman"> The terrain bass surface plotted with spheres.</FONT></PRE>

<P><FONT FACE="Times New Roman">The following Csound code is used
to generate this surface. The audio variables <I>ax</I> and <I>ay</I>
are used for the X and Y values of the surface. The values of
X<sup>2</sup> and Y<sup>2</sup> are calculated in advance to make
the algorithm more efficient. Separate values are generated for
the left and right audio channels.</FONT></P>

<PRE><FONT FACE="Courier New">; Compute X^2 and Y^2 in advance to save time</FONT>
<FONT FACE="Courier New">axsq1	=	ax1*ax1	</FONT>
<FONT FACE="Courier New">aysq1	=	ay1*ay1</FONT>
<FONT FACE="Courier New">axsq2	=	ax2*ax2</FONT>
<FONT FACE="Courier New">aysq2	=	ay2*ay2	</FONT>
<FONT FACE="Courier New">			</FONT>
<FONT FACE="Courier New">; Compute the surface	</FONT>
<FONT FACE="Courier New">az1	=	sqrt(axsq1*axsq1+aysq1*aysq1-axsq1-aysq1-axsq1*aysq1+1)	</FONT>
<FONT FACE="Courier New">az2	=	sqrt(axsq2*axsq2+aysq2*aysq2-axsq2-aysq2-axsq2*aysq2+1)	</FONT></PRE>

<P><FONT FACE="Times New Roman">Mathematical surfaces are not
always well behaved when the values generated by the surface are
translated into sound. Polynomials tend to shoot off to very large
values and many surfaces are not centered around the zero axis.
This can result in widely varying amplitudes and large DC offsets.
The <B>balance</B> opcode can be used to reduce the amplitude
variation. A high pass filter, <B>butterhp</B>, with a low cut-off
frequency can be used to remove the DC component of the signal.
This is implemented as</FONT></P>

<PRE><FONT FACE="Courier New">abal1	balance	az1, aamp1	; Balance the signal</FONT>
<FONT FACE="Courier New">abal2	balance	az2, aamp1	; Balance the signal</FONT>
<FONT FACE="Courier New">			</FONT>
<FONT FACE="Courier New">aout1	butterhp	abal1, 10	; DC blocking filter</FONT>
<FONT FACE="Courier New">aout2	butterhp	abal2, 10	; DC blocking filter</FONT>
<FONT FACE="Courier New">	outs	aout1*kamp, aout2*kamp	; Stereo output</FONT></PRE>

<P><FONT FACE="Times New Roman">The completed terrain bass instrument
has a mysterious fluttering character.</FONT></P>

<H3><FONT FACE="Times New Roman">Terrain Lead Instrument 1</FONT></H3>

<P><FONT FACE="Times New Roman">In this instrument a rose curve
is used to generate the orbit.<sup>2</sup> Rose curves are generated
by equation 2.</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/65.gif" WIDTH="97"
HEIGHT="22" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (2)</FONT></P>

<P><FONT FACE="Times New Roman">where <I>a</I> is the amplitude
of the orbit and <I>n</I> determines the number of petals on the
curve. If <I>n</I> is odd there will be <I>n</I> petals on the
curve. If <I>n</I> is even there will be 2<I>n</I> petals on the
curve. Figure 3 shows rose curves for several values of n.</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/37.gif" WIDTH="183"
HEIGHT="165" NATURALSIZEFLAG="3" ALIGN="BOTTOM"><IMG SRC="figures/38.gif"
WIDTH="207" HEIGHT="202" NATURALSIZEFLAG="3" ALIGN="BOTTOM"><IMG 
SRC="figures/39.gif" WIDTH="191" HEIGHT="191" NATURALSIZEFLAG="3"
ALIGN="BOTTOM"><BR>
</FONT></P>

<PRE><B><FONT FACE="Times New Roman">Figure 3</FONT></B><FONT FACE="Times New Roman"> The rose patterns for n=3, n=3.5 and n=4.</FONT></PRE>

<P><FONT FACE="Times New Roman">The equation for the rose curve
is expressed in polar coordinates. To convert to rectangular coordinates
use equation 3.</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/66.gif" WIDTH="176"
HEIGHT="21" NATURALSIZEFLAG="3" ALIGN="BOTTOM"> (3)</FONT></P>

<P><FONT FACE="Times New Roman">This is implemented in Csound
as</FONT></P>

<PRE><FONT FACE="Courier New">arose	oscil	kmod1, ipetal*kfqc, 1	; Rose Curve</FONT>
<FONT FACE="Courier New">ax	oscil	arose, kfqc, 1	; Convert from polar to</FONT>
<FONT FACE="Courier New">ay	oscil	arose, kfqc, 1, .25	; rectangular coordinates</FONT></PRE>

<P><FONT FACE="Times New Roman">In the Csound code the variable
<I>ipetal</I> is used instead of <I>n</I>. The size of the rose
is modulated with <I>kmodl</I>.</FONT></P>

<P><FONT FACE="Times New Roman">The surface used for this instrument
is the polynomial<sup>3</sup></FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/67.gif" WIDTH="141"
HEIGHT="44" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (4)</FONT></P>

<P><FONT FACE="Times New Roman">which is expressed in Csound as</FONT></P>

<PRE><FONT FACE="Courier New">az	=	ax-ax*ax*ax/12-ay*ay/4+.5	; Compute the surface</FONT></PRE>

<P><FONT FACE="Times New Roman">A graph of this surface is presented
in figure 4.</FONT></P>

<PRE><FONT FACE="Times New Roman"><IMG SRC="figures/40.gif" WIDTH="570"
HEIGHT="427" NATURALSIZEFLAG="0" ALIGN="BOTTOM">
</FONT>
<B><FONT FACE="Times New Roman">Figure 4</FONT></B><FONT FACE="Times New Roman"> Terrain surface for the first terrain lead instrument.</FONT></PRE>

<P><FONT FACE="Times New Roman">Delayed vibrato is applied to
the tone to make the sound more interesting. The tone produced
by this instrument is rather mellow which pulses as the amplitude
of the rose curve is modulated. This produces a &quot;wah&quot;
sound similar to a that of a filter opening and closing.</FONT></P>

<H3><FONT FACE="Times New Roman">Terrain Hollow Lead Instrument</FONT></H3>

<P><FONT FACE="Times New Roman">This instrument uses a rose curve
to generate the orbit as described in the previous section. The
equation of the surface is</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/49.gif" WIDTH="78"
HEIGHT="41" NATURALSIZEFLAG="3" ALIGN="BOTTOM"> (5)</FONT></P>

<P><FONT FACE="Times New Roman">and an of this surface image is
presented as figure 5</FONT></P>

<PRE><FONT FACE="Times New Roman"><IMG SRC="figures/41.gif" WIDTH="570"
HEIGHT="427" NATURALSIZEFLAG="0" ALIGN="BOTTOM">
</FONT>
<B><FONT FACE="Times New Roman">Figure 5</FONT></B><FONT FACE="Times New Roman"> Terrain surface for the terrain hollow lead instrument.</FONT></PRE>

<P><FONT FACE="Times New Roman">The Csound code to implement this
follows:</FONT></P>

<PRE><FONT FACE="Courier New">arose	oscil	kmod1+1, ipetal*ifqc, 1	; Rose Curve</FONT>
<FONT FACE="Courier New">ax	oscil	arose, ifqc, 1	; Convert from polar to</FONT>
<FONT FACE="Courier New">ay	oscil	arose, ifqc, 1, .25	; rectangular coordinates</FONT>
<FONT FACE="Courier New">az	=	-5*ax/(ax*ax+ay*ay+1)	; Compute the surface for oscillator 1</FONT></PRE>

<P><FONT FACE="Times New Roman">Three oscillators are generated
which are detuned and added together to produce a rich, chorused
hollow tone.</FONT></P>

<H3><FONT FACE="Times New Roman">Deep Space Growl Instrument</FONT></H3>

<P><FONT FACE="Times New Roman">This instrument is based on a
four dimensional surface. The orbit follows a three dimensional
spiral along the surface of a torus. The orbit is shown in figure
6.</FONT></P>

<PRE><FONT FACE="Times New Roman"><IMG SRC="figures/42.gif" WIDTH="471"
HEIGHT="350" NATURALSIZEFLAG="3" ALIGN="BOTTOM">
</FONT>
<B><FONT FACE="Times New Roman">Figure 6</FONT></B><FONT FACE="Times New Roman"> The dark line shows the orbit spiralling along the &quot;torus&quot; surface.  Notice that since the minor radius was chosen larger than the major radius the torus tunrs in on itself.  The orbit produced is fairly complex.</FONT></PRE>

<P><FONT FACE="Times New Roman">The Csound code for the torus
is</FONT></P>

<PRE><FONT FACE="Courier New">krminor	oscil	5, .2, 1	; Modulate the minor radius</FONT>
<FONT FACE="Courier New">krminor	=	krminor+6	; Make it positive</FONT>
<FONT FACE="Courier New">krmajor	=	krminor+1	; Major radius is 1 bigger than minor</FONT>
<FONT FACE="Courier New">			</FONT>
<FONT FACE="Courier New">asin1	oscil	krminor, ifqc, 1	; Minor circle Y coordinate</FONT>
<FONT FACE="Courier New">acos1	oscil	krminor, ifqc, 1, .25	; Minor circle X coordinate</FONT>
<FONT FACE="Courier New">asin2	oscil	krmajor, ifqc/4, 1	; Major circle Y coordinate</FONT>
<FONT FACE="Courier New">acos2	oscil	krmajor, ifqc/4, 1, .25	; Major circle X coordinate</FONT>
<FONT FACE="Courier New">			</FONT>
<FONT FACE="Courier New">ax	=	asin1+acos2	; This orbit is a spiral on</FONT>
<FONT FACE="Courier New">ay	=	acos1	; the surface of a torus whose</FONT>
<FONT FACE="Courier New">az	=	asin2	; radius is being modulated.</FONT></PRE>

<P><FONT FACE="Times New Roman">Displaying the four dimensional
surface presents some difficulties therefore the three dimensional
analog of the surface is displayed. The surface produces a deep,
growling, harmonically rich tone. The equation for this surface
is</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/50.gif" WIDTH="164"
HEIGHT="24" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (6)</FONT></P>

<P><FONT FACE="Times New Roman">A graph of the surface is presented
in figure 7.</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/43.gif" WIDTH="570"
HEIGHT="427" NATURALSIZEFLAG="0" ALIGN="BOTTOM"><BR>
</FONT><B><FONT SIZE="-1" FACE="Times New Roman,Georgia,Times">Figure
7</FONT></B><FONT SIZE="-1" FACE="Times New Roman,Georgia,Times">
The three dimensional analogue of the four dimensional terrain
surface.</FONT></P>

<P><FONT FACE="Times New Roman">The Csound code for the four dimensional
surface is</FONT></P>

<PRE><FONT FACE="Courier New">aw1	=	sin(sqrt(ax*ax+ay*ay+az*az))	; Compute the surface a bumpy 4D surface</FONT>
<FONT FACE="Courier New">aw	=	aw1*aw1-.5	; Remove some DC offset</FONT></PRE>

<P><FONT FACE="Times New Roman">This instrument makes use of planar
rotations to modulate the sound. Rotations can be applied to any
multi-dimensional oscillator such as a terrain oscillator. The
equations for rotating a point in space are well known in computer
graphics. They are best expressed as a matrix which is used to
multiply each point. To simplify things the two dimensional case
will be described first. For the two dimensional case</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/51.gif" WIDTH="185"
HEIGHT="49" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (7)</FONT></P>

<P><FONT FACE="Times New Roman">or</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/52.gif" WIDTH="185"
HEIGHT="48" NATURALSIZEFLAG="3" ALIGN="BOTTOM"> (8)</FONT></P>

<P><FONT FACE="Times New Roman">There are three planar rotations
for the three dimensional case given by the following matrices:</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/53.gif" WIDTH="212"
HEIGHT="73" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (9.a)</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/54.gif" WIDTH="212"
HEIGHT="73" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (9.b)</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/55.gif" WIDTH="212"
HEIGHT="73" NATURALSIZEFLAG="0" ALIGN="BOTTOM"> (9.c)</FONT></P>

<P><FONT FACE="Times New Roman">Since a four dimensional surface
is used in this case a four dimensional rotation is applied. There
are six planar rotations available in four space:</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/56.gif" WIDTH="233"
HEIGHT="96" NATURALSIZEFLAG="3" ALIGN="BOTTOM">&nbsp;<IMG SRC="figures/57.gif"
WIDTH="234" HEIGHT="96" NATURALSIZEFLAG="3" ALIGN="BOTTOM">(10.a
&amp; 10.b)</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/58.gif" WIDTH="234"
HEIGHT="96" NATURALSIZEFLAG="3" ALIGN="BOTTOM">&nbsp;<IMG SRC="figures/59.gif"
WIDTH="237" HEIGHT="96" NATURALSIZEFLAG="3" ALIGN="BOTTOM">(10.c
&amp; 10.d)</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/60.gif" WIDTH="237"
HEIGHT="96" NATURALSIZEFLAG="3" ALIGN="BOTTOM">&nbsp;<IMG SRC="figures/61.gif"
WIDTH="236" HEIGHT="96" NATURALSIZEFLAG="0" ALIGN="BOTTOM">(10.e
&amp; 10.f)</FONT></P>

<P><FONT FACE="Times New Roman">The Csound code to implement rotations
of four dimensional equations follows:</FONT></P>

<PRE><FONT FACE="Courier New">kcost  oscil 1, ifqc,   1, .25+iphase     ; Cosine</FONT>
<FONT FACE="Courier New">ksint  oscil 1, ifqc,   1, iphase            ; Sine</FONT>

<FONT FACE="Courier New">ax      zar  inx                             ; Read in audio channels X, Y, Z and W</FONT>
<FONT FACE="Courier New">ay      zar  iny</FONT>
<FONT FACE="Courier New">az      zar  inz</FONT>
<FONT FACE="Courier New">aw      zar  inw</FONT>

<FONT FACE="Courier New">; Rotation in X-Y plane</FONT>
<FONT FACE="Courier New">  if (iplane!=1) goto next1</FONT>
<FONT FACE="Courier New">    axr = ax*kcost + ay*ksint</FONT>
<FONT FACE="Courier New">    ayr =-ax*ksint + ay*kcost</FONT>
<FONT FACE="Courier New">    azr = az</FONT>
<FONT FACE="Courier New">    awr = aw</FONT>
<FONT FACE="Courier New">    goto nextend</FONT>

<FONT FACE="Courier New">; Rotation in X-Z plane</FONT>
<FONT FACE="Courier New">next1:</FONT>
<FONT FACE="Courier New">  if (iplane!=2) goto next2</FONT>
<FONT FACE="Courier New">    axr = ax*kcost + az*ksint</FONT>
<FONT FACE="Courier New">    ayr = ay</FONT>
<FONT FACE="Courier New">    azr =-ax*ksint + az*kcost</FONT>
<FONT FACE="Courier New">    awr = aw</FONT>
<FONT FACE="Courier New">    goto nextend</FONT>

<FONT FACE="Courier New">; Rotation in Y-Z plane</FONT>
<FONT FACE="Courier New">next2:</FONT>
<FONT FACE="Courier New">  if (iplane!=3) goto next3</FONT>
<FONT FACE="Courier New">    axr = ax</FONT>
<FONT FACE="Courier New">    ayr = ay*kcost + az*ksint</FONT>
<FONT FACE="Courier New">    azr =-ay*ksint + az*kcost</FONT>
<FONT FACE="Courier New">    awr = aw</FONT>
<FONT FACE="Courier New">    goto nextend</FONT>

<FONT FACE="Courier New">; Rotation in X-W plane</FONT>
<FONT FACE="Courier New">next3:</FONT>
<FONT FACE="Courier New">  if (iplane!=4) goto next4</FONT>
<FONT FACE="Courier New">    axr = ax*kcost + aw*ksint</FONT>
<FONT FACE="Courier New">    ayr = ay</FONT>
<FONT FACE="Courier New">    azr = az</FONT>
<FONT FACE="Courier New">    awr =-ax*ksint + aw*kcost</FONT>
<FONT FACE="Courier New">    goto nextend</FONT>

<FONT FACE="Courier New">; Rotation in Y-W plane</FONT>
<FONT FACE="Courier New">next4:</FONT>
<FONT FACE="Courier New">  if (iplane!=5) goto next5</FONT>
<FONT FACE="Courier New">    axr = ax</FONT>
<FONT FACE="Courier New">    ayr = ay*kcost + aw*ksint</FONT>
<FONT FACE="Courier New">    azr = az</FONT>
<FONT FACE="Courier New">    awr =-ay*ksint + aw*kcost</FONT>
<FONT FACE="Courier New">    goto nextend</FONT>

<FONT FACE="Courier New">; Rotation in Z-W plane</FONT>
<FONT FACE="Courier New">next5:</FONT>
<FONT FACE="Courier New">  if (iplane!=6) goto nextend</FONT>
<FONT FACE="Courier New">    axr = ax</FONT>
<FONT FACE="Courier New">    ayr = ay</FONT>
<FONT FACE="Courier New">    azr = az*kcost + aw*ksint</FONT>
<FONT FACE="Courier New">    awr =-az*ksint + aw*kcost</FONT>

<FONT FACE="Courier New">nextend:</FONT>
<FONT FACE="Courier New">        zaw axr, ioutx                          ; Output audio X, Y, Z and W</FONT>
<FONT FACE="Courier New">        zaw ayr, iouty</FONT>
<FONT FACE="Courier New">        zaw azr, ioutz</FONT>
<FONT FACE="Courier New">        zaw awr, ioutw</FONT>

<FONT FACE="Courier New">endin</FONT></PRE>

<P><FONT FACE="Times New Roman">The result is an evolving harmonically
rich tone with a complex stereo image.</FONT></P>

<H3><FONT FACE="Times New Roman">Pulsar Instrument</FONT></H3>

<P><FONT FACE="Times New Roman">This instrument uses a lima&ccedil;on
curve to for the orbit as expressed by the polar equation</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/62.gif" WIDTH="105"
HEIGHT="21" NATURALSIZEFLAG="3" ALIGN="BOTTOM"> (11)</FONT></P>

<P><FONT FACE="Times New Roman">An image of this curve is presented
in figure 8.</FONT></P>

<PRE><FONT FACE="Times New Roman"><IMG SRC="figures/34.gif" WIDTH="195"
HEIGHT="169" NATURALSIZEFLAG="0" ALIGN="BOTTOM"><B>
</B></FONT>
<B><FONT FACE="Times New Roman">Figure 8</FONT></B><FONT FACE="Times New Roman"> The lima&ccedil;on orbit used in this instrument.</FONT></PRE>

<P><FONT FACE="Times New Roman">The Csound code used to implement
this orbit follows</FONT></P>

<PRE><FONT FACE="Courier New">ka	=	.01+kmod	; Cardioid A</FONT>
<FONT FACE="Courier New">kb	=	.1+kmod*.2	; Cardioid B</FONT>
<FONT FACE="Courier New">			</FONT>
<FONT FACE="Courier New">acardi	oscil	kb, ifqc, 1	; Cardioid Curve</FONT>
<FONT FACE="Courier New">ax	oscil	ka+acardi, ifqc, 1	; Convert from polar to</FONT>
<FONT FACE="Courier New">ay	oscil	ka+acardi, ifqc, 1, .25	; rectangular coordinates</FONT></PRE>

<P><FONT FACE="Times New Roman">The surface used in this equation
is presented in equation 12.</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/63.gif" WIDTH="289"
HEIGHT="53" NATURALSIZEFLAG="3" ALIGN="BOTTOM">(12)</FONT></P>

<P><FONT FACE="Times New Roman"><IMG SRC="figures/35.gif" WIDTH="570"
HEIGHT="427" NATURALSIZEFLAG="0" ALIGN="BOTTOM"><BR>
</FONT><B><FONT SIZE="-1" FACE="Times New Roman,Georgia,Times">Figure
9</FONT></B><FONT SIZE="-1" FACE="Times New Roman,Georgia,Times">
The pulsar terrain surface. As X goes to zero the frequency gets
very large due to the 1/(X^2+.01) term.</FONT></P>

<P><FONT FACE="Times New Roman">The Csound code to implement this
surface follows:</FONT></P>

<PRE><FONT FACE="Courier New">az	=	sqrt((1-ax*ax)*((1-ay)+ay*cos(1/(ax*ax+.01))))-1	; Compute the surface</FONT></PRE>

<P><FONT FACE="Times New Roman">This surface is derived from a
surface including a term of the form<IMG SRC="figures/64.gif"
WIDTH="62" HEIGHT="24" NATURALSIZEFLAG="3" ALIGN="BOTTOM">. This
causes the frequency to approach infinity as x approaches zero.
To avoid computation errors this was modified to eliminate the
unbounded term. The sound produced by this surface is a pulsing,
noise like sound.</FONT></P>

<H3><FONT FACE="Times New Roman">Conclusion</FONT></H3>

<P><FONT FACE="Times New Roman">Terrain mapping synthesis provides
a very rich playground for synthesists. Sounds generated using
this method range from traditional waveforms and instruments to
the most bizarre noises. Terrain mapping allows for a wide variety
of modulations which can be used to add character and complexity
to the tone. The tones produced can be tuned or untuned. Some
disadvantages of this method are wide variations in volume and
inherent DC offsets.</FONT></P>

<P><FONT FACE="Times New Roman">Interesting mathematical surfaces
can be found in mathematics and computer graphics books. The rendered
three dimensional images presented in this chapter were created
with the <A HREF="http://www.povray.org/">Persistance of Vision</A>
ray tracer. A <A HREF="http://www.perl.org/">Perl</A> script was
used to generate the POV code. This script is presented as <A
HREF="figures/povplot.pl">povplot.pl</A>. Some of the diagrams
of the orbits presented in this chapter were created with Logo.
The code used to create them is included as <A HREF="figures/rose.lgo">rose.lgo</A>.</FONT></P>

<H3><FONT FACE="Times New Roman">References</FONT></H3>

<OL>
  <LI><FONT FACE="Times New Roman">Roads, C. <I>The Computer Music
  Tutorial.</I> Cambridge, Mass.: The MIT Press. 1996</FONT>
  <LI><FONT FACE="Times New Roman">Anton, Howard. <I>Calculus</I>,
  John Wiley and Sons (1980). pp. 716-725.</FONT>
  <LI><A HREF="http://sprott.physics.wisc.edu/pickover/home.htm"><FONT
   FACE="Times New Roman">Pickover, Clfford</FONT></A><FONT FACE="Times New Roman">,
  <I>Computers and the Imagination</I>. St. Martin's Press, Inc.
  New York, NY, 1991. pp. 175-179.</FONT>
</OL>

</BODY>
</HTML>
