<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Composing with Csound: &quot;Howl&quot; and &quot;Macchu Picchu&quot;</title>		<!-- Created by AOLpress/1.2 -->	</head>	<body bgcolor="white">		<a href="002.html">Index</a> &nbsp; &nbsp;<a href="022.html">Previous</a> &nbsp; <a href="223.html">Next</a>		<p><b>II.2. The orchestra</b></p>		<p>These are the instruments playing in the introductory section: instrument 2, a simple &#147;coloured noise&#148; (or band-passed random) resembling the sounds from &#147;Studio di fonologia musicale&#148; the studio in which Luciano Berio, Bruno Maderna and Luigi Nono (among others) worked in the &#145;50 and &#145;60. Instrument 4 is a band-pass filtered pulse (or better, a trapezoidal waveform) generated by means of a linseg. Its spectrum is richer in lower components. If you like a &#147;real&#148; pulse (or the best approximation you can obtain with a finite sampling rate), try substituting line</p>		<p>a1 linseg 0,.01,p4,.001,0,p3-.003,0.,.01,0<br>		<p>with this</p>		<p>a1 linseg 0,1/kr,p4,1/kr,,0,p3-.2/kr,0<br>		<p>For best results, you should put in orchestra header</p>		<p>sr = 44100<br>		</code>kr = 44100<br>		ksmps = 1<br>		<p>so to obtain the shortest possible pulse.</p>		<p>Instrument 7 is the &#147;pan flute&#148;: it is simply an oscillator playing a table composed by 1st harmonic and 2nd harmonic with relative amplitude .5:</p>		<p>f7 0 4096 10 1 .5<br>		<p>and a little bit of band pass filtered noise, with center frequency 2 times the frequency of oscillator, and band width 1/48th the center frequency.</p>		<p>Two reverberators end the orchestra, one (instrument 17) for pan flute (based on Csound reverb), the other built with 4 comb and 2 alpass, in the style Csound reverb is internally built, but with slightly different looptimes. In this case, Csound reverb did not behave well with filtered pulses.</p>		<p>;Macchu Picchu orchestra</code> sr=44100<br>		kr=4410<br>		ksmps=10<br>		nchnls=2<br>		;----------------------------------------------------------<br>		;STEREO: always p6: 0=left, 1=right, neg.values= random<br>		;----------------------------------------------------------<br>		; functions: 1 = sine<br>		; 7 = panflute<br>		;----------------------------------------------------------<br>		ga1 init 0<br>		ga2 init 0<br>		ga3 init 0<br>		ga4 init 0<br>		ga5 init 0<br>		;----------------------------------------------------------<br>		; INSTRUMENT 2 BAND PASSED NOISE<br>		;----------------------------------------------------------<br>		instr 2<br>		;p4 = amplitude in dB<br>		;p5 = pitch (in octave-poit-pitch-class<br>		;p6 = stereo (if &lt;0, then random position)<br>		;p7 = bandwidth (in cps)<br>		;----------------------------------------------------------<br>		ifrq = cpspch(p5) ;oppc to cps conversion<br>		iamp = ampdb(p4) ;dB to absolute amp conversion<br>		itim = p3/3 ;<br>		;--------- stereo --------------------------------------------<br>		if p6 &gt;= 0 goto stereo ;stereo position assigned or<br>		;random?<br>		kst randh .5,1/p3,-1 ;random, so calculate kst<br>		kst = kst + .5 ;and rescale to 0...1<br>		kgoto donest<br>		stereo:<br>		kst = p6 ;stereo assigned, kst=p6<br>		donest:<br>		;----------- amplitude envelope<br>		k1 linseg 0,itim,iamp,itim,iamp,itim-.01,0.,.01,0<br>		;----------- random (&#147;white noise&#148;) generation<br>		a1 rand 1,.4<br>		;----------- band pass filtering of random: center frequency = ifrq,<br>		; bandwidth = p4, rescaling =2<br>		aout reson a1*k1,ifrq,p7,2<br>		ga2 = ga2+aout<br>		outs aout*(1-kst)*2,aout*kst*2<br>		endin<br>		;----------------------------------------------------------<br>		; INSTRUMENT 4 BAND PASS FILTERED PULSE<br>		;----------------------------------------------------------<br>		instr 4<br>		;p4 = amplitude in dB<br>		;p5 = pitch (in octave-point-pitch-class<br>		;p6 = stereo (if &lt;0, then random position)<br>		;----------------------------------------------------------<br>		ifrq = cpspch(p5) ;oppc to cps conversion<br>		iamp = ampdb(p4) ;dB to absolute amp conversion<br>		if p6 &gt;= 0 goto stereo ;stereo assignment<br>		;(see instr 2)<br>		kst randh .5,1/p3,-1<br>		kst = kst + .5<br>		kgoto donest<br>		stereo:<br>		kst = p6<br>		donest:<br>		;--------- let&#146;s generate a pulse (not really a pulse, since<br>		; rise time it&#146;s .01 sec)<br>		a1 linseg 0,.01,p4,.001,0,p3-.003,0.,.01,0<br>		;--------- band pass filtering<br>		aout reson a1,ifrq,ifrq/12 ;band pass filter, bandwidth<br>		;is always a 1/12d of centre<br>		;frequency<br>		ga4 = aout ;copy a&ugrave;out to ga4<br>		;(for reverb)<br>		outs aout*(1-kst),aout*kst<br>		endin<br>		;----------------------------------------------------------<br>		; INSTRUMENT 7 &#147;PANFLUTE&#148;<br>		;----------------------------------------------------------<br>		instr 7<br>		;p4 = amplitude in dB<br>		;p5 = pitch (in octave-poit-pitch-class<br>		;----------------------------------------------------------<br>		ioct = octpch(p5)<br>		iamp = ampdb(p4)<br>		kenv1 linseg 0,.02,iamp,.02,iamp*.7,p3-.08,iamp*.3,.03,0,.01,0<br>		kenv2 linseg 0,.02,iamp*.2,p3-.02,0,.01,0<br>		kvibr randi .01,6,-1<br>		kfrq = cpsoct(ioct+kvibr)<br>		a1 oscili kenv1,kfrq,7 ;generate a tone<br>		;based on fn 7 (1st and 2nd harmonics)<br>		a2 rand kenv2<br>		a3 reson a2,kfrq*2,kfrq/48,2 ;add a bit of random<br>		;noise band-pass filtered at 2 times the pitch<br>		;of oscillator, bandwidth 1/48th of center<br>		;frequency<br>		ga4 = (a1+a3)/2<br>		outs ga4*(1-p6)*2,ga4*p6*2<br>		endin<br>		;----------------------------------------------------------<br>		; INSTRUMENT 17 REVERB FOR PANFLUTE<br>		;----------------------------------------------------------<br>		instr 17<br>		a0 tone ga4,sr/4+<br>		a1 reverb a0/2,3<br>		outs a1,a1<br>		endin<br>		;----------------------------------------------------------<br>		; INSTRUMENT 10 REVERB RB<br>		;----------------------------------------------------------<br>		;p4=reverb time<br>		instr 10<br>		gax atone ga1 + ga2 + ga3 + ga4 + ga5,20<br>		a1 comb gax,p4,.011<br>		a2 comb gax,p4,.02<br>		a3 comb gax,p4,.037<br>		a4 comb gax,p4,.051<br>		a5 = (a1+a2+a3+a4)/4<br>		a6 alpass a5,p4,.76<br>		a7 alpass a6,p4,.37<br>		ax = (a2+a3+a1+a2+a3+a4)/6<br>		outs ax,ax<br>		ga1 = 0<br>		ga2 = 0<br>		ga3 = 0<br>		ga4 = 0<br>		ga5 = 0<br>		endin</p>		<p><a href="223.html">Next</a>	</body></html>