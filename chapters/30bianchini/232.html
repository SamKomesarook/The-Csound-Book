<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Composing with Csound: &quot;Howl&quot; and &quot;Macchu Picchu&quot;</title>		<!-- Created by AOLpress/1.2 -->	</head>	<body bgcolor="white">		<a href="002.html">Index</a> &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; <a href="231.html">Previous</a> &nbsp; &nbsp; <a href="233.html">Next</a>		<p><b>III.2. The orchestra</b></p>		<p>Instrument 1 (spoken voice) uses mainly <i>loscil</i>, but used in an unconventional way. This ugen does not include, in its arguments, the phase. So it&#146;s not possible start reading the table but from the beginning. A little trick does it: amplitude envelope is obtained by a linseg, that forces output to zero for the first .01 seconds. In this time, loscil swiftly reads the table till the intended starting point is reached; at this moment the envelope &#147;opens&#148; so that sound can pass. The resulting sound is ring-modulated (i.e., multiplicated by a sinusoid) by a frequency depending by the function number (to differentiate the different sentences of the text).</p>		<p>Instrument 12 is almost indentical to instrument 1, but allows specifyng a starting and an ending frequency (calculated as a ratio to the original frequency), as well as a starting and an ending stereo position.</p>		<p>Instrument 2 (flou) simply sums together 10 <i>oscili</i>, slightly tuned on inharmonic frequencies; the amplitude of each oscili has a random variation of 100%, with values changing from 1.78 to 2 times per second. The effect is of that of an ever changing timbre.</p>		<p>Instrument 9 (whistles) is a sort of scaled-down version of instrument 2, used on high frequencies.</p>		<p>Instrument 10 (klang) is a sort of unconventional FM setting, with one carrier and three modulators.</p>		<p>Instrument 18 (tabla) is due to a suggestion by Jim Dashow: a FM sound which modulation index rapidly varies, during the attack portion,a number of times (in this case, 15 times) between 0 and a maximum value, decreasing in the remaining portion to a minimum value. The effect, depending from the carrier/modulator frequency ratio, can vary from skin to metal percussion.</p>		<p>;howl.orc<br>		sr = 44100<br>		kr = 4410<br>		ksmps = 10<br>		nchnls = 2<br>		;---------------------------------------------------------<br>		; HOWL.ORC<br>		;-------------- INSTRUMENTS -------------------------------<br>		; 1 = SPOKEN VOICE 81=ITS REVERB<br>		; 2 = FLOU<br>		; 3 = WAWA<br>		; 4 = BASSDRUM<br>		; 5 = CYMBALS<br>		; 9 = WHISTLES<br>		; 10= KLANG 90=ITS REVERB<br>		; 11= PERCUSSION 91=ITS REVERB<br>		; 12= TUNED VOICE 81=ITS REVERB<br>		; 18= TABLA<br>		;=========================================================<br>		ga1 init 0<br>		ga10 init 0<br>		ga11 init 0<br>		;---------------------------------------------------------<br>		; INSTRUMENT 1 VOICE<br>		;---------------------------------------------------------<br>		instr 1<br>		;p4 = skiptime<br>		;p5 = amplitude in dB<br>		;p6 = function number<br>		;p7 = stereo position<br>		iamp = ampdb(p5)<br>		itab = p6+10<br>		;amplitude envelope for loscil<br>		kenv linseg 0,.01,0,.01,iamp,p3-.03,0,.01,0<br>		ifrq = p4/.01<br>		;frequency enveope for loscil<br>		kfrq linseg ifrq, .01, ifrq, .001, 1, p3-.011, 1<br>		a1 loscili 1,kfrq,itab,1<br>		;modulation generator<br>		aosc oscili 1,100+p6*2,1<br>		;ring modulation &amp; amplitude envelope<br>		a1 = a1*aosc*kenv<br>		ga1 = ga1+a1<br>		outs a1*(1-p7),a1*p7<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 2 FLOU<br>		;---------------------------------------------------------<br>		instr 2<br>		;p4 = amplitude in dB<br>		;p5 = pitch (oppc)<br>		;p6 = stereo position<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4)/10<br>		;amplitude envelope<br>		kenv linseg 0,p3/6,iamp*.3,p3/6,iamp,p3/3,iamp,p3/6,iamp*.3,p3/6,0<br>		;random variation for amplitudesof oscillators<br>		kosc1 randi .5,2.00,-1<br>		kosc1 = kosc1+.5<br>		kosc2 randi .5,2.78,-1<br>		kosc2 = kosc2+.5<br>		kosc3 randi .5,2.54,-1<br>		kosc3 = kosc3+.5<br>		kosc4 randi .5,2.43,-1<br>		kosc4 = kosc4+.5<br>		kosc5 randi .5,2.38,-1<br>		kosc5 = kosc5+.5<br>		kosc6 randi .5,2.27,-1<br>		kosc6 = kosc6+.5<br>		kosc7 randi .5,2.16,-1<br>		kosc7 = kosc7+.5<br>		kosc8 randi .5,1.91,-1<br>		kosc8 = kosc8+.5<br>		kosc9 randi .5,1.87,-1<br>		kosc9 = kosc9+.5<br>		kosc10 randi .5,1.78,-1<br>		kosc10 = kosc10+.5<br>		;sound generation<br>		a1 oscili kenv*kosc1+.5,ifrq*1,1<br>		a2 oscili kenv*kosc2*.9+.5,ifrq*2,1<br>		a3 oscili kenv*kosc3*.8+.5,ifrq*3,1<br>		a4 oscili kenv*kosc4*.75+.5,ifrq*4,1<br>		a5 oscili kenv*kosc5*.7+.5,ifrq*5,1<br>		a6 oscili kenv*kosc6*.65+.5,ifrq*6,1<br>		a7 oscili kenv*kosc7*.6+.5,ifrq*7,1<br>		a8 oscili kenv*kosc8*.55+.5,ifrq*8,1<br>		a9 oscili kenv*kosc9*.5+.5,ifrq*9,1<br>		a10 oscili kenv*kosc10*.45+.5,ifrq*10,1<br>		;sum of generated sounds<br>		atot = a1+a2+a3+a4+a5+a6+a7+a8+a9+a10<br>		outs atot*(1-p6),atot*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 3 WAWA<br>		;---------------------------------------------------------<br>		instr 3<br>		;p6 = starting stereo position<br>		;p7 = ending stereo position<br>		;p8 = starting frequency<br>		;p9 = ending frequency<br>		;----------- conversions oppc/cps &amp; db/amp<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4)<br>		a1 rand 1,-1<br>		kctramp line p8,p3,p9<br>		kamp oscil .3,kctramp,2<br>		kenv linseg 0,.01,iamp,p3-.01,0<br>		a1 = a1*(kamp+.5)*kenv<br>		kfrq line ifrq,p3,ifrq/2<br>		a2 reson a1,kfrq,kfrq/48,2<br>		kstereo line p6,p3,p7<br>		outs a2*(1-kstereo),a2*kstereo<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 4 BASSDRUM<br>		;---------------------------------------------------------<br>		instr 4<br>		;p4 = amplitude in dB<br>		;p5 = pitch (oppc)<br>		;p6 = stereo position<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4)<br>		;random generator<br>		a1 rand iamp,-1<br>		;filter center frequency control (from ifrq*4 to ifrq to 30 cps)<br>		kfilt linseg ifrq*4,.01,ifrq,p3-.011,30<br>		;amplitude envelope<br>		kenv linseg 1,p3/3,.3,p3/3,.1,p3/3,0<br>		;band pass filtering<br>		a2 reson a1,kfilt,kfilt/32,2<br>		a2 = a2*kenv<br>		outs a2*(1-p6),a2*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 5 CYMBALS<br>		;---------------------------------------------------------<br>		instr 5<br>		;p4 = amplitude in dB<br>		;p5 = pitch (oppc)<br>		;p6 = stereo position<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4)<br>		kenv linseg 0,.001,iamp,p3*.1,iamp*.5,p3*.9-.001,0<br>		;four control signals, for oscil amps<br>		krnd1 randi .001,5,-1<br>		krnd2 randi .001,5,-1<br>		krnd3 randi .001,5,-1<br>		krnd4 randi .001,5,-1<br>		;four oscils, slightly detuned<br>		a1 oscili kenv,ifrq*(1+krnd1),1<br>		a2 oscili kenv,ifrq*1.005*(1+krnd2),1<br>		a3 oscili kenv,ifrq*1.01*(1+krnd3),1<br>		a4 oscili kenv,ifrq*1.015*(1+krnd4),1<br>		;sum of the generated signals<br>		atot = (a1+a2+a3+a4)/4<br>		outs atot*(1-p6),atot*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 9 WHISTLES<br>		;---------------------------------------------------------<br>		instr 9<br>		;p4 = amplitude in dB<br>		;p5 = pitch (oppc)<br>		;p6 = stereo position<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4-10)<br>		kenv linseg 0,p3/4,iamp,p3/2,iamp,p3/4,0<br>		krnd randi 1.1,p3/10,-1<br>		kenv = kenv+krnd-.55<br>		a1 oscili kenv,ifrq,1<br>		a2 oscili kenv,ifrq*.98,1<br>		a3 oscili kenv,ifrq*1.03,1<br>		a4 oscili kenv,ifrq*1.074,1<br>		aout = (a1+a2+a3+a4)/4<br>		outs aout*(1-p6),aout*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 10 KLANG<br>		;---------------------------------------------------------<br>		instr 10<br>		;p4 = amplitude in dB<br>		;p5 = pitch (oppc)<br>		;p6 = stereo position<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4-10)<br>		kenv linseg 0,.005,1,p3/2-.006,.3,p3/2,0,.001,0<br>		;three &#147;modulators&#148;...<br>		a01 oscili 1,ifrq*.56,1<br>		a02 oscili 1,ifrq*1.47,1<br>		a03 oscili 1,ifrq*2.17,1<br>		k01 linseg 20,.01,10,p3-.01,2<br>		;... control frequency if this oscillator<br>		a1 oscili iamp,ifrq*(a01*a02*a03)*k01,1<br>		ga10 = ga10 + a1*kenv<br>		outs a1*kenv*(1-p6),a1*kenv*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 11 PERCUSSION<br>		;---------------------------------------------------------<br>		instr 11<br>		;p4 = amplitude in dB<br>		;p5 = picth (oppc)<br>		;p6 = stereo position<br>		;p7 = function number<br>		;p8 = reverb send<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4)<br>		itab = p7<br>		kenv linseg iamp,p3-.1,iamp,.1,0<br>		a1 loscili kenv,ifrq,itab,cpspch(8)<br>		if itab!=21 goto avanti ;special case: apply<br>		; reverb only to bassdrum soundfile<br>		;a simple reverb (built into instrument; normally don&#146;t do that!)<br>		arev reson a1,300,400,1<br>		arv1 alpass arev,6,.112<br>		arv2 alpass arev,6,.087<br>		arv3 alpass arev,6,.131<br>		atot = arv1+arv2+arv3<br>		a1 = a1+atot<br>		avanti:<br>		ok11:<br>		ga11 = ga11 + a1*p8<br>		outs a1*(1-p6),a1*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTR 12 TUNED VOICE<br>		;---------------------------------------------------------<br>		instr 12<br>		;p4 = skiptime<br>		;p5 = amplitude in dB<br>		;p6 = table number<br>		;p7 = stereo position<br>		;p8 = starting frequency<br>		;p9 = ending frequency<br>		;p10 = attack time<br>		;p11 = release time<br>		iamp = ampdb(p5)<br>		itab = p6+10<br>		print itab<br>		kenv linseg 0,.01,0,p10,iamp,p3-p10-p11-.01,iamp,p11,0<br>		ifrq = p4/.01<br>		kfrq linseg ifrq, .01, ifrq, .001, p8, p3-.011, p9<br>		a1 loscili 1,kfrq,itab,1<br>		aosc oscili 1,100+p6*2,1<br>		a1 = a1*aosc*kenv<br>		ga1 = ga1+a1<br>		; outs a1*(1-p7),a1*p7<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 13 TUNED PERCUSSION<br>		;---------------------------------------------------------<br>		instr 13<br>		;p4 = skiptime<br>		;p5 = amplitude in dB<br>		;p6 = stereo position<br>		;p7 = table number<br>		;p8 = starting frequency<br>		;p9 = ending frequency<br>		;p10 = attack time<br>		;p11 = release time<br>		ifrq = cpspch(p5)<br>		iamp = ampdb(p4)<br>		itab = p7<br>		kenv linseg 0,p10,iamp,p3-p10-p11,iamp,p11,0<br>		kfrq linseg cpspch(p8),p3,cpspch(p9)<br>		a1 loscili kenv,kfrq,itab,cpspch(8)<br>		outs a1*(1-p6),a1*p6<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 18 TABLA<br>		;---------------------------------------------------------<br>		instr 18<br>		;p6 = starting modulation index<br>		;p7 = ending modulation index<br>		;p8 = carrier/modulator frequency ratio<br>		;p9 = stereo position (if &lt;0, random position)<br>		ifrq = cpspch(p5)<br>		ioct = 4.5-octpch(p5)/2<br>		iamp = ampdb(p4)<br>		ix = p6<br>		if p9 &gt;= 0 goto stereo<br>		kst randh .5,1/p3,-1<br>		kst = kst + .5<br>		kgoto donest<br>		stereo:<br>		kst = p9<br>		donest:<br>		kindx linseg 0,.001,ix,.001,0,.001,ix,.001,0,.001,ix,.001,0,.001,ix,.001,0,.001,ix,.001,0,.001,ix,.001,0,.001,ix,.001,0,.001,ix,p3-.015,p7<br>		kenv linseg 0,.01,iamp,p3/2-.011,iamp/5,p3/2-.001,0,.001,0<br>		a1 foscili kenv,ifrq,1,p8,kindx,1<br>		outs a1*(1-kst),a1*kst<br>		endin<br>		;---------------------------------------------------------<br>		; INSTR 81 = REVERB FOR VOICE<br>		;---------------------------------------------------------<br>		instr 81<br>		imix = p4<br>		krvtim = p5<br>		ga1 tone ga1,1000<br>		a1 alpass ga1*imix,krvtim,.04996<br>		a2 alpass a1*.72,krvtim,.05465<br>		a3 alpass a2*.961,krvtim,.02418<br>		al alpass a3*.649,krvtim,.01785<br>		ar alpass a3*.646,krvtim,.01795<br>		outs al,ar<br>		ga1 = 0<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUENT 90 REVERB FOR KLANG<br>		;---------------------------------------------------------<br>		instr 90<br>		imix = p4<br>		krvtim = p5<br>		a1 alpass ga10*imix,krvtim,.04996<br>		a2 alpass a1*.72,krvtim,.05465<br>		a3 alpass a2*.961,krvtim,.02418<br>		al alpass a3*.649,krvtim,.01785<br>		ar alpass a3*.646,krvtim,.01795<br>		outs al,ar<br>		ga10 = 0<br>		endin<br>		;---------------------------------------------------------<br>		; INSTRUMENT 91 REVERB FOR PERCUSSION<br>		;---------------------------------------------------------<br>		instr 91<br>		;p4= starting rev.time<br>		;p5= ending reverb.time<br>		krvtim line p4,p3,p5<br>		a1 alpass ga11, krvtim, .04996<br>		a2 alpass a1*.72, krvtim, .05465<br>		a3 alpass a2*.961, krvtim, .02418<br>		al alpass a3*.649, krvtim, .01785<br>		ar alpass a3*.646, krvtim, .01795<br>		outs al,ar<br>		ga11 = 0<br>		endin<br>		;----------------------------------------------------------</p>		<p><a href="233.html">Next</a>	</body></html>