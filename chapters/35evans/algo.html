<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Composing Fractal Music with Csound</title>	</head>	<body bgcolor="white">		<table width="600" border="0" cellspacing="0" cellpadding="0">			<tr>				<td width="175" align="right"><font face="Times New Roman"><img src="figures/space.gif" vspace="49"><br>					</font><font size="2" face="Times New Roman,Georgia,Times"><b>contents</b></font></td>				<td width="20"><font face="Times New Roman"><img src="figures/space.gif"></font></td>				<td width="405" align="left"><font size="5" face="Times New Roman,Georgia,Times">Composing Fractal Music with Csound<br>					(Hearing the Mandelbrot Set)<br>					</font><font size="2" face="Times New Roman,Georgia,Times"><img src="figures/space.gif" vspace="6"><br>					<a href="bio.html">Brian Evans</a><br>					<a href="http://www.lightspace.com">lightspace Studios</a><br>					<a href="mailto:brian@lightspace.com">brian@lightspace.com</a><br>					<img src="figures/space.gif" vspace="8"></font></td>			</tr>		</table>		<table width="600" border="0" cellspacing="0" cellpadding="0">			<tr>				<td width="195" valign="top">					<table width="175" border="0" align="left" cellspacing="0" cellpadding="0">						<tr align="right">							<td><a href="intro.html">Introduction</a></td>						</tr>						<tr align="right">							<td><font size="4"><b>The Basic Algorithm</b></font></td>						</tr>						<tr align="right">							<td><a href="calcscore.html">Calculating a Score</a></td>						</tr>						<tr align="right">							<td><font size="2">(sonic line vs image plane)<img src="figures/space.gif" hspace="5"></font></td>						</tr>						<tr align="right">							<td><a href="mapping.html">Simple Mapping with Csound</a></td>						</tr>						<tr align="right">							<td><a href="range.html">Pitch Range and Event Length</a></td>						</tr>						<tr align="right">							<td><a href="thoughts.html">Final Thoughts</a></td>						</tr>						<tr align="right">							<td><a href="refs.html">References</a></td>						</tr>						<tr align="right">							<td><img src="figures/space.gif" vspace="5"></td>						</tr>						<tr align="right">							<td><a href="instruments.html">Code/Sound Examples</a></td>						</tr>						<tr align="right">							<td><a href="calcscript.html">Create a Score!</a></td>						</tr>						<tr align="right">							<td><img src="figures/space.gif" vspace="5"></td>						</tr>						<tr align="right">							<td><a href="images.html">Misc. Images</a></td>						</tr>					</table>				</td>				<td width="405">					<table width="405" border="0" cellspacing="0" cellpadding="0">						<tr>							<td width="405" align="left" valign="top">The Mandelbrot Set exists in the abstract world of the complex number plane. This plane can be thought of as a two-dimensional grid that can be easily graphed on the Cartesian coordinate plane. Complex numbers have two parts, notated in the form <i>x</i>+<i>yi</i> with <i>x</i> being a real number component and <i>yi</i> being imaginary. The real number component can be placed on the real number line and so plotted on the horizontal x-axis of the a two-dimensional (2D) graph.								<p>Imaginary numbers come from the equation</p>								<center>									<p><i>i</i>^2=-1 or <i>i</i> = sqrt(-1)</p>								</center>								<p>When a real number is squared it always gives a positive result thus there is no real number whose square root is -1. So i does not exist on the real number line and is called imaginary. Imaginary numbers are usually denoted as the product of a real number and <i>i</i> in the form <i>iy</i> or <i>yi</i>. For example</p>								<center>									<p>sqrt(-4) = sqrt(4) * sqrt(-1) = 2<i>i</i></p>								</center>								<p>The imaginary part of a complex number is plotted along the vertical y-axis of a 2D graph. The complex number <i>x</i>+<i>yi</i> can be then represented as the ordered pair (<i>x</i>,<i>y</i>) and plotted on a 2D graph representing the complex plane.</p>								<p>Given a complex number <i>z</i> such that</p>								<center>									<p><i>z</i>= <i>x</i>+<i>yi</i></p>								</center>								<p>the magnitude of <i>z</i>, written |<i>z</i>|, is defined as</p>								<center>									<p>|<i>z</i>| = sqrt(<i>x</i>^2+<i>y</i>^2)</p>								</center>								<p>This is an application of the Pythagorean theorem and describes the length of the line plotted from the origin of the graph (0,0) to (<i>x</i>,<i>y</i>). See Figure 1.</p>								<center>									<blockquote>										<img src="figures/figure1.gif"></center>									<p><font size="2"><b>Figure 1:</b> A plot of the complex number <i>z</i> represented as <i>x</i>+<i>yi</i> (<i>x</i>,<i>y</i>) on the complex plane. The magnitude of <i>z</i> (|<i>z</i>|=sqrt(<i>x</i>^2+<i>y</i>^2) is also shown.</font></p>								</blockquote>								<p><font size="3">The Mandelbrot set is defined by the simple recursive formula</font><font size="5"><br>								</font></p>								<center>									<p><font size="3"><i>z</i>[<code>n+1</code>] = <i>z</i>[<code>n</code>]^2 + <img src="figures/lambda.gif"></font></p>								</center>								<p><font size="3">Where <i>z</i> is set initially to zero (0+0<i>i</i>) and <img src="figures/lambda.gif"> is a complex number (in the form <i>x</i>+<i>iy</i> as the ordered pair (<i>x</i>,<i>y</i>) defining the point on the complex plane that is under investigation. The variable <code>n</code> is the counter in a recursive loop that determines the number of times this formula is repeated, starting with <code>n</code>=0 and ending at a maximum count value we will specify.</font></p>								<p><font size="3">Using this function we find that there are points on the plane that exert a gravitational pull of sorts on the points around them. By using the above formula we can continually test to see if the point under investigation ever &quot;escapes&quot; from all of the points of attraction, and if so the counter value <code>n</code> tells us when. By testing for the magnitude of <i>z</i> (|<i>z</i>|) in each pass through the loop we determine that a point escapes when the magnitude reaches two or greater. (As this is a self-squaring process once a number reaches two it will run out quickly to infinity.) We choose a maximum count for <code>n</code> and assume that if the point under investigation has not reached two and escaped after <code>n</code> iterations then it probably never will.</font></p>								<p><font size="3">The basic algorithm, with <img src="figures/lambda.gif"> equal to the point under investigation is</font><font size="5"><br>								</font></p>								<pre><blockquote><font size="3" face="Courier New">	let n = zero (the iteration count begins at 0)</font><font size="3" face="Courier New">	let z = 0</font><font size="3" face="Courier New">	let MAX = max iteration count (how long do we loop?)</font><font size="3" face="Courier New">	begin loop</font><font size="3" face="Courier New">	    z[n+1] = z[n]^2 + <img src="figures/lambda.gif"></font><font size="3" face="Courier New">	    n=n+1</font><font size="3" face="Courier New">	continue until n&gt;MAX or |z|&gt;=2</font><font size="3" face="Courier New">	return n</font></blockquote></pre>								<p><font size="3">If <code>n</code> becomes greater than the maximum iteration count specified then the point under consideration did not escape. If the loop is exited before the maximum iteration count then <code>n</code> represents the time in the process when the point escaped. It is these values of <code>n</code> for points on the complex plane, when mapped into color, that create the images of the <a href="images.html">Mandelbrot set</a> with which we are familiar. These <code>n</code> values can also used to create music by mapping the numbers into musical dimensions.</font></p>								<p><font size="3">To choose a window on the complex plane to investigate we define the parameters of the window as its midpoint <code>(xMid, yMid)</code> and the window size <code>(WindowSize)</code>. The pseudo code for the program that generated the image in <a href="images/figure2.html">Figure 2</a> is seen below.</font></p>								<pre><blockquote><font size="3" face="Courier New">define xMid = .3515</font><font size="3" face="Courier New">define yMid = .4204</font><font size="3" face="Courier New">define WindowSize = .001</font><font size="3" face="Courier New">define MaxIteration = 255</font><font size="3" face="Courier New">define xResolution = 320</font><font size="3" face="Courier New">define yResolution = 320</font><font size="3" face="Courier New">xStart = xMid-.5*WindowSize</font><font size="3" face="Courier New">yStart = yMid-.5*WindowSize</font><font size="3" face="Courier New">xIncrement = WindowSize/xResolution</font><font size="3" face="Courier New">yIncrement = WindowSize/yResolution</font><font size="3" face="Courier New">for (yCounter=0; yCounter &lt; yResolution; ++yCounter){</font><font size="3" face="Courier New">    LamdaImag = yStart + yIncrement*yCount</font><font size="3" face="Courier New">    for (xCounter=0; xCounter&lt; xResolution; ++xCounter){</font><font size="3" face="Courier New">        LamdaReal=xStart + xIncrement*xCounter</font><font size="3" face="Courier New">        x = 0.0</font><font size="3" face="Courier New">        y = 0.0</font><font size="3" face="Courier New">        for (n=0; n &lt; MaxInteration; ++n){</font><font size="3" face="Courier New">            /** </font><font size="3" face="Courier New">            (x +iy)^2 is calcated and the real</font><font size="3" face="Courier New">            and imaginary parts separated</font><font size="3" face="Courier New">            **/</font><font size="3" face="Courier New">            xNew = x^2 - y^2 + LamdaReal</font><font size="3" face="Courier New">            yNew = 2*x*y + LamdaImag</font><font size="3" face="Courier New">            x=xNew</font><font size="3" face="Courier New">            y=yNex</font><font size="3" face="Courier New">            /**</font><font size="3" face="Courier New">            testing for 4 instead of 2 here saves a                 </font><font size="3" face="Courier New">            square root calculation</font><font size="3" face="Courier New">            **/</font><font size="3" face="Courier New">            if ((x^2+y^2)&gt;= 4) break;</font><font size="3" face="Courier New">        }</font><font size="3" face="Courier New">        plot(n)</font><font size="3" face="Courier New">    }</font><font size="3" face="Courier New">}</font></blockquote></pre>								<p><font size="3">It is beyond the scope of this article to give more than a cursory discussion of the Mandelbrot Set. For a more detailed discussion of fractals and the Mandelbrot Set see [<a href="refs.html#ref4">4</a>] [<a href="refs.html#ref5">5</a>] [<a href="refs.html#ref6">6</a>].</font></td>						</tr>					</table>				</td>			</tr>		</table>		<br>	</body></html>