<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Composing Fractal Music with Csound</title>	</head>	<body bgcolor="white">		<table width="600" border="0" cellspacing="0" cellpadding="0">			<tr>				<td width="175" align="right"><img src="figures/space.gif" vspace="49"><br>					<font size="2"><b>contents</b></font></td>				<td width="20"><img src="figures/space.gif"></td>				<td width="405" align="left"><font size="5" face="Times New Roman,Georgia,Times">Composing Fractal Music with Csound<br>					(Hearing the Mandelbrot Set)<br>					</font><font size="2"><img src="figures/space.gif" vspace="6"><br>					<a href="bio.html">Brian Evans</a><br>					<a href="http://www.lightspace.com">lightspace Studios</a><br>					<a href="mailto:brian@lightspace.com">brian@lightspace.com</a><br>					<img src="figures/space.gif" vspace="8"></font></td>			</tr>		</table>		<table width="690" border="0" cellspacing="0" cellpadding="0">			<tr>				<td width="195" valign="top"><font face="Times New Roman">					<table width="175" border="0" align="left" cellspacing="0" cellpadding="0">						<tr align="right">							<td><a href="intro.html"><font face="Times New Roman">Introduction</font></a></td>						</tr>						<tr align="right">							<td><a href="algo.html"><font face="Times New Roman">The Basic Algorithm</font></a></td>						</tr>						<tr align="right">							<td><a href="calcscore.html"><font face="Times New Roman">Calculating a Score</font></a></td>						</tr>						<tr align="right">							<td><font size="2" face="Times New Roman,Georgia,Times">(sonic line vs image plane)<img src="figures/space.gif" hspace="5"></font></td>						</tr>						<tr align="right">							<td><b><font size="4" face="Times New Roman,Georgia,Times">Simple Mapping with Csound</font></b></td>						</tr>						<tr align="right">							<td><a href="range.html"><font face="Times New Roman">Pitch Range and Event Length</font></a></td>						</tr>						<tr align="right">							<td><a href="thoughts.html"><font face="Times New Roman">Final Thoughts</font></a></td>						</tr>						<tr align="right">							<td><a href="refs.html"><font face="Times New Roman">References</font></a></td>						</tr>						<tr align="right">							<td><font face="Times New Roman"><img src="figures/space.gif" vspace="5"></font></td>						</tr>						<tr align="right">							<td><a href="instruments.html"><font face="Times New Roman">Code/Sound Examples</font></a></td>						</tr>						<tr align="right">							<td><a href="calcscript.html"><font face="Times New Roman">Create a Score!</font></a></td>						</tr>						<tr align="right">							<td><font face="Times New Roman"><img src="figures/space.gif" vspace="5"></font></td>						</tr>						<tr align="right">							<td><a href="images.html"><font face="Times New Roman">Misc. Images</font></a></td>						</tr>					</table>					</font></td>				<td width="495"><font face="Times New Roman">					<table width="405" border="0" cellspacing="0" cellpadding="0">						<tr>							<td width="405" align="left" valign="top">To illustrate a basic sonic map of the Mandelbrot set the following input parameters were chosen.								<pre><blockquote>xMid = .3515yPoint = .42073WindowSize = .001MaxIteration = 255xResolution = 100</blockquote></pre>								<p>These parameters define a line of 100 points that mark the upper sixth of image seen in <a href="images/figure2.html">Figure 2</a>. To generate a single line of values instead of a plane, some changes were made in the basic program. The single <code>yPoint</code> value on the <i>y</i>-axis is held constant (and so also is the <code>LamdaImag</code> variable). The <code>return</code> statement is changed to a <code>print</code> statement that returns a Csound I-statement for each point calculated on the line.								<p>In order to use the <code>xCounter</code> as a time counter for sound events the <code>n</code>-value for each previous <i>x</i>-point is stored in the variable <code>PreviousN</code>. Now <code>n</code>-counts can be tested so that a new I-statement is created only when a different value is returned from the process. In other words a new sound event occurs only when there is a change in the number returned from the process. A basic time increment is defined such that each pass through the <code>xCounter</code> loop adds that increment to the clock that marks the start times for each event in the mapping. The variable <code>xResolution</code> determines how many time samples (or events) will be calculated in the mapping (there are 100 events calculated in first example). The total length from zero to the start time of the last event will be <code>TimeIncrement * xResolution</code>.</p>								<p>Each number returned from the process will now be mapped into a pitch instead of a color. The variable <code>PitchCount</code> determines how many different pitches will be available. For example a four octave C major scale, 7 notes per octave times 4, equals 28 different pitches. (The pitch range will be specified in the Csound score file.) The basic program for creating a sonic map of the Mandelbrot set is then as follows:</p>								<pre><blockquote><font face="Courier New">define xMid = .3515</font><font face="Courier New">define yPoint = .42073</font><font face="Courier New">define WindowSize = .001</font><font face="Courier New">define MaxIteration = 255</font><font face="Courier New">define TimeIncrement = .2</font><font face="Courier New">define PitchCount = 28</font><font face="Courier New">define xResolution = 100</font><font face="Courier New">xStart = xMid-.5*WindowSize</font><font face="Courier New">xIncrement = WindowSize/xResolution</font><font face="Courier New">PreviousN = 1000</font><font face="Courier New">StartTime = 0.0</font><font face="Courier New">LamdaImag = yPoint</font><font face="Courier New">for (xCounter=0; xCounter &lt; xResolution; ++xCounter){</font><font face="Courier New">    LamdaReal=xStart + xIncrement*xCounter</font><font face="Courier New">    x = 0.0</font><font face="Courier New">    y = 0.0</font><font face="Courier New">    for (n=0; n &lt; MaxInteration; ++n){</font><font face="Courier New">        xNew = x^2 - y^2 + LamdaReal</font><font face="Courier New">        yNew = 2*x*y + LamdaImag</font><font face="Courier New">        x=xNew</font><font face="Courier New">        y=yNex</font><font face="Courier New">        if ((x^2+y^2) &gt;= 4) break;</font><font face="Courier New">    }</font><font face="Courier New">    if (n==PreviousN) {</font><font face="Courier New">      StartTime += TimeIncrement</font><font face="Courier New">    } else {</font><font face="Courier New">      printf(&quot;i1 %7.2f 12.0 75 %d\n&quot;, StartTime, n%PitchCount)</font><font face="Courier New">        PreviousN = n</font><font face="Courier New">    }</font><font face="Courier New">}</font></blockquote></pre>								<p>For the examples in this report a simple Csound instrument is used, based on the <code>pluck</code> instrument. The orchestra is shown as follows:								<pre><blockquote><font face="Courier New">; mandel.orc</font><font face="Courier New">sr = 44100</font><font face="Courier New">kr = 441</font><font face="Courier New">ksmps = 100</font><font face="Courier New">nchnls = 1</font><font face="Courier New">instr 1</font><font face="Courier New">   ipitchtable = 1  ; pitch table in score      </font><font face="Courier New">   ipitchndx = p5   ; p5=pitch index from table</font><font face="Courier New">   iamp = ampdb(p4)</font><font face="Courier New">    </font><font face="Courier New">   ipch table  ipitchndx, ipitchtable</font><font face="Courier New">   kenv expseg  1.0, 1.0, 1.0, 11.5, .0001</font><font face="Courier New">   asig pluck iamp*kenv,cpspch(ipch),cpspch(ipch),0,1</font><font face="Courier New">    out asig</font><font face="Courier New">endin</font></blockquote></pre>								<p>An I-statement in the Csound score file for this orchestra has the format								<pre><blockquote><font face="Courier New" size="2">;p1      p2          p3              p4                   p5</font><font face="Courier New" size="2">i1   starttime   duration   amplitude(in decibels)   pitchindex</font></blockquote></pre>								<p>A pitch table that defines the pitch domain for the sonic map is setup at the beginning of the score using GEN 2. The values generated from the Mandelbrot set program function as index values into this table. The PitchCount variable in the program is equal to the number of elements in the table. The score for the illustrated program is seen here.								<pre><blockquote><font face="Courier New">; mandel.sco</font><font face="Courier New">; f1 is a pitch table defining a four octave C major </font><font face="Courier New">; scale C2-B5.</font><font face="Courier New">f1 0 32 -2 6.00 6.02 6.04 6.05 6.07 6.09 6.11</font><font face="Courier New">           7.00 7.02 7.04 7.05 7.07 7.09 7.11</font><font face="Courier New">           8.00 8.02 8.04 8.05 8.07 8.09 8.11</font><font face="Courier New">           9.00 9.02 9.04 9.05 9.07 9.09 9.11</font><font face="Courier New">; ins start   dur  ampdb(p4)  pitchndx(p5)</font><font face="Courier New">  i1    0.0  12.0   75             3</font><font face="Courier New">  i1    1.6  12.0   75             4</font><font face="Courier New">  i1    3.4  12.0   75             5</font><font face="Courier New">  i1    4.2  12.0   75             6</font><font face="Courier New">  i1    4.4  12.0   75             7</font><font face="Courier New">  i1    4.6  12.0   75             9</font><font face="Courier New">  i1    4.8  12.0   75            10</font><font face="Courier New">  i1    5.0  12.0   75             5</font><font face="Courier New">         .     .     .             .</font><font face="Courier New">         .     .     .             .</font><font face="Courier New">         .     .     .             .</font><font face="Courier New">  i1   18.6  12.0   75            11</font><font face="Courier New">  i1   19.2  12.0   75            10</font><font face="Courier New">  i1   19.8  12.0   75             9</font><font face="Courier New">e</font></blockquote></pre>								<p>One hundred I-statements were generated from the Mandelbrot set program (<a href="instruments/example1.sco">example 1</a>).</td>						</tr>					</table>					</font></td>			</tr>		</table>		<br>	</body></html>