<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>CSCORE EXAMPLE: CS14PTLS.C</title>	</head>	<body bgcolor="white">		<pre><font face="Courier New">/* 24 Dec 1997 - Atari drand48() replaced by rand() for use on PC's */</font><font face="Courier New">/* CS14PTLS.C - partials evolve and recede during a single long tone</font><font face="Courier New"> *		This is a GEN10 timbral processor!</font><font face="Courier New"> *		CS14PTLS V0.9TT, A Endrich, 17 August 1995</font><font face="Courier New"> * This program creates a different f-statement for every note event.  The</font><font face="Courier New"> *	information for the partials is contained in a two-dimensional array</font><font face="Courier New"> *	within the program -- later to be an implemented as an external file.</font><font face="Courier New"> * Start times, durations and amplitude can be handled algorithmically, but</font><font face="Courier New"> *	all the frq's are the same:  the idea is to have one tone with</font><font face="Courier New"> * 	a timbral evolution.</font><font face="Courier New"> */</font><font face="Courier New">#include &lt;stdio.h&gt;</font><font face="Courier New">#include &lt;stdlib.h&gt;</font><font face="Courier New">#include &lt;math.h&gt;</font><font face="Courier New">#include &quot;cscore.h&quot;</font><font face="Courier New">/* DECLARE #DEFINES */</font><font face="Courier New">#define	FIXED		0</font><font face="Courier New">#define	RAND		1</font><font face="Courier New">#define	LIN_SERIES	2</font><font face="Courier New">#define LOG_SERIES	3</font><font face="Courier New">#define	EXP_SERIES	4</font><font face="Courier New">#define	FPFIELDS  	14</font><font face="Courier New">#define	EPFIELDS   	8</font><font face="Courier New">/* DECLARE USER-DEFINED FUNCTIONS */</font><font face="Courier New">double stt_up(double,double,double,int,int);	/* reset start times incr'g */</font><font face="Courier New">double dur_up(double,double,double,int,int);	/* reset durations incr'g */</font><font face="Courier New">int    amp_up(int, int, int, int, int);		/* reset amplitude incr'g */</font><font face="Courier New">double stt_dwn(double,double,double,int,int);	/* reset start times decr'g */</font><font face="Courier New">double dur_dwn(double,double,double,int,int);	/* reset durations decr'g */</font><font face="Courier New">int    amp_dwn(int, int, int, int, int);	/* reset amplitude decr'g */</font><font face="Courier New">/* DECLARE GLOBAL VARIABLES */</font><font face="Courier New">			/* global start times: because no sc to read from */</font><font face="Courier New">double	st_nfst = 0;	/* initial 'f' &amp; 'i' st_time, fixed, for type 0 */</font><font face="Courier New">double	st_dur = 1;	/* initial duration, fixed, for type 0 */</font><font face="Courier New">int	st_amp = 15000;	/* initial amplitude, fixed, for type 0 */</font><font face="Courier New">double	holddur;	/* to hold highest value to decrement from */</font><font face="Courier New">int	holdamp;	/* to hold highest value to decrement from */</font><font face="Courier New">/* HELP / USAGE */</font><font face="Courier New">void</font><font face="Courier New">phelp(void)</font><font face="Courier New">{</font><font face="Courier New">	printf(&quot;CS14PTLS - unfold &amp; remove partials during a single \</font><font face="Courier New">long tone\n&quot;);</font><font face="Courier New">	printf(&quot;Usage: cs14ptls  -nnumftables [-sstartfactor]\n&quot;);</font><font face="Courier New">	printf(&quot;\t[-ddurfactor] [-aamplitude] [-vampfactor]\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t-ffrequency [-brisetime] [-edecaytime]\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t\t[-tprocesstype]  outscore.sc\n&quot;);</font><font face="Courier New">	printf(&quot;\t-nnumftables	(int) num f-s'ments (= num notes)\n&quot;);</font><font face="Courier New">	printf(&quot;\t-sstartfactor	(double) start time shaping factor\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t\tDefault = 1: (no change)\n&quot;);</font><font face="Courier New">	printf(&quot;\t-ddurfactor	(double) event dur shaping factor\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t\tDefault = 1: no change)\n&quot;);</font><font face="Courier New">	printf(&quot;\t-aamplitude	(int) start amp level, Def = 15000\n&quot;);</font><font face="Courier New">	printf(&quot;\t-vampfactor	(int) amplitude shaping factor\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t\tDefault = 0: no change\n&quot;);</font><font face="Courier New">	printf(&quot;\t-ffrequency	(double) freq of ALL note ev's (Hz)\n&quot;);</font><font face="Courier New">	printf(&quot;\t-brisetime	(double) envel rise time, Def=0.5\n&quot;);</font><font face="Courier New">	printf(&quot;\t-edecaytime	(double) envel decay time, Def=0.5\n&quot;);</font><font face="Courier New">	printf(&quot;\t-tprocesstype	(int) factor processing type\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t0 - ADD FIXED value to initial value\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t1 - RANDOM values selected within range\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t2 - LINEAR SERIES values expand/contract\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t3 - LOGARITHMIC SERIES (not implemented)\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t4 - EXPONENTIAL SERIES \n&quot;);</font><font face="Courier New">	printf(&quot;\toutscore.sc	score produced by the program\n&quot;);</font><font face="Courier New">	printf(&quot;Defaults produce smoothly changing timbres, with\n&quot;);</font><font face="Courier New">	printf(&quot;2 sec note events and st times advancing by 1 sec\n&quot;);</font><font face="Courier New">	printf(&quot;\nCommand line using defaults could be e.g.:\n&quot;);</font><font face="Courier New">	printf(&quot;  cs14ptls -n10 -f261.63 ptlssc.sc\n&quot;);</font><font face="Courier New">	printf(&quot;Example full command line:\n&quot;);</font><font face="Courier New">	printf(&quot;  cs14ptls -n10 -s1.2 -d1.5 -a24000 -v550 -f110 \</font><font face="Courier New">-b0.75 -e0.75 -t0 ptlssc.sc\n&quot;);</font><font face="Courier New">	exit(1);</font><font face="Courier New">}</font><font face="Courier New">void</font><font face="Courier New">main(int argc, char *argv[])</font><font face="Courier New">int	argc;</font><font face="Courier New">char	*argv[];</font><font face="Courier New">{</font><font face="Courier New">	EVENT	*e;		/* event pointer */</font><font face="Courier New">	EVLIST	*a;		/* event list */</font><font face="Courier New">	int	numftab;	/* number of f statements &amp; note events */</font><font face="Courier New">	int	fnum = 1;	/* function number; initialized to 1 */</font><font face="Courier New">	int	ftabnum = 1;	/* f-table number for ea. note event */</font><font face="Courier New">	int	i,j = 0;	/* loop counters: outer, inner_up */</font><font face="Courier New">	int	k = 0;		/* loop counter for decreasing: inner_dwn */</font><font face="Courier New">	int	instrnum = 1;	/* instr number for note events */</font><font face="Courier New">	int	namp = 15000;	/* note event amplitude; user may change */</font><font face="Courier New">	int	ptype = 0; 	/* alagorithmic process types */</font><font face="Courier New">	int	ampf = 0;	/* amplitude increment/decrement factor */</font><font face="Courier New">	double	startf = 1;	/* f &amp; i start time shaping factor */</font><font face="Courier New">	double	durf = 1;	/* note event duration shaping factor */</font><font face="Courier New">	double  fstartt = 0;	/* f statement start times - updated */</font><font face="Courier New">	double  nstartt = 0;	/* i (note) event start times - updated  */</font><font face="Courier New">	double	ndur = 1;	/* duration: starts at 1 &amp; goes up/down */</font><font face="Courier New">	double	frequency;	/* note event pitch (in Hz), all ev's same */</font><font face="Courier New">	double	risetime=0.5;	/* note event envelope rise time */</font><font face="Courier New">	double	decaytime=0.5;	/* note event decay time */</font><font face="Courier New">	double	fhp2 = 0;	/* to hold previous p2 for 'f' statements */</font><font face="Courier New">	double	hp2 = 0;	/* to hold previous p2 for 'i' statements */</font><font face="Courier New">	double	hp3 = ndur;	/* to hold previous p3 */</font><font face="Courier New">	double	hp4 = namp;	/* to hold previous p4 */</font><font face="Courier New">	static double	str[10][10] = {</font><font face="Courier New">				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55, 0, 0, 0, 0, 0, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6, 0, 0, 0, 0, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65, 0, 0, 0, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65,.7, 0, 0, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65,.7,.75, 0, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65,.7,.75,.8, 0, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65,.7,.75,.8,.85, 0, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65,.7,.75,.8,.85,.9, 0 },</font><font face="Courier New">				{ 1,.55,.6,.65,.7,.75,.8,.85,.9,.95 }</font><font face="Courier New">			};</font><font face="Courier New">		/* two-dimensional array for rel str of the harmonics */</font><font face="Courier New">	char	message[60];	/* space for a comment message */</font><font face="Courier New">	while(argc &gt; 1 &amp;&amp; argv[1][0] == '-' &amp;&amp; argv[1][1] != 0) {</font><font face="Courier New">		switch(argv[1][1]) {</font><font face="Courier New">		case ('n'):</font><font face="Courier New">		     numftab = atoi(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;You have set % f-tables\n&quot;, numftab);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case('s'):</font><font face="Courier New">		     startf = atof(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;\nuser's time factor = %f\n&quot;, startf);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('d'):</font><font face="Courier New">		     durf = atof(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;user's duration factor = %f\n&quot;, durf);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('a'):</font><font face="Courier New">		     namp = atoi(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;initial amplitude level = %d\n&quot;, namp);</font><font face="Courier New">		     st_amp = namp;</font><font face="Courier New">		     hp4 = namp;</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('v'):</font><font face="Courier New">		     ampf = atoi(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;user's ampl factor = %d\n&quot;, ampf);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('f'):</font><font face="Courier New">		     frequency = atof(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;all notes are at = %fHz\n&quot;, frequency);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('b'):</font><font face="Courier New">		     risetime = atof(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;envelope rise time = %f\n&quot;, risetime);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('e'):</font><font face="Courier New">		     decaytime = atof(&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;envelope decay time = %f\n&quot;, decaytime);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		case ('t'):</font><font face="Courier New">		     ptype = atoia&amp;argv[1][2]);</font><font face="Courier New">		     printf(&quot;processing type = %d\n&quot;, ptype);</font><font face="Courier New">		     argc--, argv++;</font><font face="Courier New">		     break;</font><font face="Courier New">		default:</font><font face="Courier New">		     fprintf(stderr,&quot;CS14PTLS:  foxed by '%s'\n&quot;, argv[1]);</font><font face="Courier New">		     phelp();</font><font face="Courier New">		     exit(1);</font><font face="Courier New">		}</font><font face="Courier New">	}</font><font face="Courier New">	initial(argc, argv);	/* enable reading the command line */</font><font face="Courier New">	if(argc &lt; 2) {		/* Test that user's commandline is ok */</font><font face="Courier New">		phelp();</font><font face="Courier New">		exit(1);</font><font face="Courier New">	}</font><font face="Courier New">	/* CREATE F-STATEMENTS */</font><font face="Courier New">	a = lcreat(numftab*2);	/* create numftab function statements */</font><font face="Courier New">	sprintf(message, &quot;;CS14PTLS - controlled unfolding of partials\n&quot;);</font><font face="Courier New">	putstr(message);	/* write this comment to the score */</font><font face="Courier New">	</font><font face="Courier New">	/* CREATE F-STATEMENTS */</font><font face="Courier New">	for(i = 0; i &lt;= numftab-1; i++) {</font><font face="Courier New">		e = createv(FPFIELDS);	/* create pfields for each f s'ment */</font><font face="Courier New">		e-&gt;op = 'f';		/* identifies function statement */</font><font face="Courier New">		e-&gt;p[1] = fnum;		/* f statement number, begins at 1 */</font><font face="Courier New">		e-&gt;p[2] = fstartt;	/* start time for f s'ment, start = 0 */</font><font face="Courier New">		e-&gt;p[3] = 257;		/* table size w. explicit guard point */</font><font face="Courier New">		e-&gt;p[4] = 10;		/* GEN10: sine with weighted harm's */</font><font face="Courier New">		e-&gt;p[5] = str[i][0];	/* relative strength of harmonic 1 */</font><font face="Courier New">		e-&gt;p[6] = str[i][1];	/* relative strength of harmonic 2 */</font><font face="Courier New">		e-&gt;p[7] = str[i][2];	/* relative strength of harmonic 3 */</font><font face="Courier New">		e-&gt;p[8] = str[i][3];	/* relative strength of harmonic 4 */</font><font face="Courier New">		e-&gt;p[9] = str[i][4];	/* relative strength of harmonic 5 */</font><font face="Courier New">		e-&gt;p[10] = str[i][5];	/* relative strength of harmonic 6 */</font><font face="Courier New">		e-&gt;p[11] = str[i][6];	/* relative strength of harmonic 7 */</font><font face="Courier New">		e-&gt;p[12] = str[i][7];	/* relative strength of harmonic 8 */</font><font face="Courier New">		e-&gt;p[13] = str[i][8];	/* relative strength of harmonic 9 */</font><font face="Courier New">		e-&gt;p[14] = str[i][9];	/* relative strength of harmonic 10 */</font><font face="Courier New">		a = lappev(a,e);</font><font face="Courier New">		/* DO PROCESSING TO CALCULATE NEXT F-STATEMENT */</font><font face="Courier New">		fnum++;</font><font face="Courier New">		if(i &lt; (numftab-1)/2) {		/* 1st half: expand values */</font><font face="Courier New">			fstartt = stt_up(fstartt, fhp2, startf, ptype, i+1);</font><font face="Courier New">		} else {			/* 2nd half: keep expand'g! */</font><font face="Courier New">			fstartt = stt_up(fstartt, fhp2, startf, ptype, i+1);</font><font face="Courier New">		}</font><font face="Courier New">		fhp2 = fstartt;	/* hold current p2 value for 'f' statements */</font><font face="Courier New">	}</font><font face="Courier New">	/* INSERT A TEMPO STATEMENT */</font><font face="Courier New">	e = defev(&quot;\n&quot;);	/* write blank line to score */</font><font face="Courier New">	lappev(a,e);		/* write this newline into list 'a' */</font><font face="Courier New">	e = defev(&quot;t 0 76&quot;);	/* write tempo statement */</font><font face="Courier New">	lappev(a,e);		/* write this tempo statement into list 'a' */</font><font face="Courier New">/* We now want 'numftab' note events, one for each f-statement, appending */</font><font face="Courier New">/*   them to list 'a' as we go */</font><font face="Courier New">	/* CREATE I-STATEMENTS */</font><font face="Courier New">	for(j = 0; j &lt;= numftab-1; j++) {</font><font face="Courier New">		e = createv(EPFIELDS);	/* EPFIELDS note event pfields */</font><font face="Courier New">		e-&gt;op = 'i';		/* 'i' identifies note event */</font><font face="Courier New">		e-&gt;p[1] = instrnum;	/* instr number for note events */</font><font face="Courier New">		e-&gt;p[2] = nstartt;	/* note event start time, start = 0 */</font><font face="Courier New">		e-&gt;p[3] = ndur;		/* note event duration, Default = 1 */</font><font face="Courier New">		e-&gt;p[4] = namp;		/* note event amp, Default = 15000 */</font><font face="Courier New">		e-&gt;p[5] = frequency;	/* note event pitch in Hz */</font><font face="Courier New">		e-&gt;p[6] = risetime;	/* envelope rise time, Default = 0.5 */</font><font face="Courier New">		e-&gt;p[7] = decaytime;	/* envelope decay time, Default = 0.5 */</font><font face="Courier New">		e-&gt;p[8] = ftabnum;	/* ftable number for this event */</font><font face="Courier New">		a = lappev(a,e);</font><font face="Courier New">		/* DO PROCESSING TO CALCULATE NEXT I-STATEMENT */</font><font face="Courier New">		ftabnum += 1;</font><font face="Courier New">/*		if(ptype == 1) {  re random f-statement selection */</font><font face="Courier New">/*			ftabnum = (int)((rand()*numftab)+1); */</font><font face="Courier New">/*			if(ftabnum &gt;= numftab) { */ /* must be numftab-1 max */</font><font face="Courier New">/*				ftabnum -= 1; */</font><font face="Courier New">/*			}	*/</font><font face="Courier New">/*		}	/* /* commented out because causes gaps in output */</font><font face="Courier New">		if(j &lt; (numftab-1)/2) {		/* 1st half: expand values */</font><font face="Courier New">			nstartt = stt_up(nstartt, hp2, startf, ptype, j+1);</font><font face="Courier New">			ndur = dur_up(ndur, hp3, durf, ptype, j+1);</font><font face="Courier New">			namp = amp_up(namp, hp4, ampf, ptype, j+1);</font><font face="Courier New">			hp2 = nstartt;	/* hold current p2 value */</font><font face="Courier New">			hp3 = ndur;	/* hold current p3 value */</font><font face="Courier New">			hp4 = namp;</font><font face="Courier New">			holddur = ndur;	/* ends up at highest dur - global! */</font><font face="Courier New">			holdamp = namp;	/* ends up at highest amp - global! */</font><font face="Courier New">		} else {			/* 2nd half: compress values */</font><font face="Courier New">			nstartt = stt_up(nstartt, hp2, startf, ptype, j+1);</font><font face="Courier New">			ndur = dur_dwn(ndur, hp3, durf, ptype, k);</font><font face="Courier New">			namp = amp_dwn(namp, hp4, ampf, ptype, k);</font><font face="Courier New">			hp2 = nstartt;</font><font face="Courier New">			hp3 = ndur;</font><font face="Courier New">			hp4 = namp;</font><font face="Courier New">			k++;</font><font face="Courier New">		}</font><font face="Courier New">	}</font><font face="Courier New">	</font><font face="Courier New">	lput(a);		/* now write whole list of events to outscore */</font><font face="Courier New">	lrelev(a);		/* release memory space for list 'a' */</font><font face="Courier New">	putstr(&quot;e&quot;);		/* add end of score marker */</font><font face="Courier New">}	/* end of main */</font><font face="Courier New">double </font><font face="Courier New">stt_up(double p2, double pp2, double sf, int typeflag, int counter)</font><font face="Courier New">/* double  p2;		current start time (both 'f' and 'i' events */</font><font face="Courier New">/* double  pp2;		previous p2 value */</font><font face="Courier New">/* double  sf;		start time change factor */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	counter;	number of loop in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED) {				/* type 0 */</font><font face="Courier New">		p2 = st_nfst + (counter * sf);	/* adds to same start val */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND) {				/* type 1 */</font><font face="Courier New">		p2 = p2 + (rand() * counter * sf);	</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES) {			/* type 2 */</font><font face="Courier New">		p2 = pp2 + (counter * sf);	/* uses previous p2 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES) {			/* type 3 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES) {			/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p2);</font><font face="Courier New">}</font><font face="Courier New">double		/* this function not debugged &amp; implemented (not used) */</font><font face="Courier New">stt_dwn(double p2, double pp2, double sf, int typeflag, int counter)</font><font face="Courier New">/* double  p2;		current start time (both 'f' and 'i' events */</font><font face="Courier New">/* double  pp2;		previous p2 value */</font><font face="Courier New">/* double  sf;		start time change factor */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	counter;	number of loop in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED) {				/* type 0 */</font><font face="Courier New">		p2 = p2 - (counter * sf);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND) {				/* type 1 */</font><font face="Courier New">		p2 = p2 - (rand() * counter * sf);	</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES) {			/* type 2 */</font><font face="Courier New">		p2 = pp2 - (counter * sf);	/* uses previous p2 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES) {			/* type 3 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES) {			/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p2);</font><font face="Courier New">}</font><font face="Courier New">double</font><font face="Courier New">dur_up(double p3, double pp3, double df, int typeflag, int counter)</font><font face="Courier New">/* double  p3;		current p3 value */</font><font face="Courier New">/* double  pp3;		previous p3 value */</font><font face="Courier New">/* double  df;		user's duration factor value */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	counter;	event loop count in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED) {				/* type 0 */</font><font face="Courier New">		p3 = st_dur + (counter * df);	/* adds to same start val */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND) {				/* type 1 */</font><font face="Courier New">		p3 = p3 + (rand() * counter * df);	</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES) {			/* type 2 */</font><font face="Courier New">		p3 = pp3 + (counter * df);	/* uses previous p3 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES) {			/* type 3 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES) {			/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p3);</font><font face="Courier New">}</font><font face="Courier New">double </font><font face="Courier New">dur_dwn(double p3, double pp3, double df, int typeflag, int counter)</font><font face="Courier New">/* double  p3;		current p3 value */</font><font face="Courier New">/* double  pp3;		previous p3 value */</font><font face="Courier New">/* double  df;		user's duration factor value */</font><font face="Courier New">/* int	typeflag;	process type flag */</font><font face="Courier New">/* int	counter;	loop count in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED) {				/* type 0 */</font><font face="Courier New">		p3 = holddur - (counter * df);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND) {				/* type 1 */</font><font face="Courier New">		p3 = holddur - (rand() * counter * df);	</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES) {			/* type 2 */</font><font face="Courier New">		p3 = pp3 - (counter * df);	/* uses previous p3 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES) {			/* type 3 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES) {			/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p3);</font><font face="Courier New">}</font><font face="Courier New">int </font><font face="Courier New">amp_up(int p4, int pp4, int af, int typeflag, int counter)</font><font face="Courier New">/* int	p4;		current p4 value */</font><font face="Courier New">/* int	pp4;		previous p4 value */</font><font face="Courier New">/* int	af;		user's amplitude change factor */</font><font face="Courier New">/* int	typeflag;	type flag */</font><font face="Courier New">/* int	counter;	loop count in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED) {				/* type 0 */</font><font face="Courier New">		p4 = st_amp + (counter * af);	/* adds to same start val */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND) {				/* type 1 */</font><font face="Courier New">		p4 = p4 + (rand() * counter * af);	</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES) {			/* type 2 */</font><font face="Courier New">		p4 = pp4 + (counter * af);	/* uses previous p4 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES) {			/* type 3 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES) {			/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p4);</font><font face="Courier New">}</font><font face="Courier New">int </font><font face="Courier New">amp_dwn(int p4, int pp4, int af, int typeflag, int counter)</font><font face="Courier New">/* int	p4;		current p4 value */</font><font face="Courier New">/* int	pp4;		previous p4 value */</font><font face="Courier New">/* int	af;		user's amplitude change factor */</font><font face="Courier New">/* int	typeflag;	type flag */</font><font face="Courier New">/* int	counter;	loop count in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED) {				/* type 0 */</font><font face="Courier New">		p4 = holdamp - (counter * af);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND) {				/* type 1 */</font><font face="Courier New">		p4 = holdamp - (rand() * counter * af);	</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES) {			/* type 2 */</font><font face="Courier New">		p4 = pp4 - (counter * af);	/* uses previous p4 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES) {			/* type 3 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES) {			/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p4);</font><font face="Courier New">}</font><font face="Times New Roman">	</font></pre>		<p>	</body>	</body></html>