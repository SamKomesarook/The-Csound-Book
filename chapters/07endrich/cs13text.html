<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>CSCORE EXAMPLE: CS13TEXT.C</title>	</head>	<body bgcolor="white">		<pre><font face="Courier New">/* 24 Dec 1997 - Atari drand48() replaced by rand() for use on PC's */</font><font face="Courier New">/* CS13TEXT.C - create a sound texture, with user inputs &amp; processing options</font><font face="Courier New"> * 		CS13TEXT  V0.7TT, a Cscore program by A Endrich 17 Aug 1995</font><font face="Courier New"> * </font><font face="Courier New"> * Program to build a controlled texture of note events with expand-compress.</font><font face="Courier New"> * This version uses four change factors for four parameters (start time,</font><font face="Courier New"> *	duration, amplitude and pitch), though with appropriately different</font><font face="Courier New"> *	functions for each.</font><font face="Courier New"> * The pitch change factor is a frequency in Hz;  NB - it is NOT a ratio.</font><font face="Courier New"> * Starting point is an inscore.sc.:</font><font face="Courier New"> *	number of events is read from the inscore.sc;  there can be 2 types: </font><font face="Courier New"> *	  type 0: an inscore with all = values for each of the 4 key params;</font><font face="Courier New"> *		start times are usually all 0;</font><font face="Courier New"> *	  	values expand &amp; compress from these starting values;</font><font face="Courier New"> *		note that low values &amp; high change factors may go below</font><font face="Courier New"> *		    zero;  the program doesn't prevent this: check the score!</font><font face="Courier New"> *	  type 1: an inscore with different values;  same warnings as above</font><font face="Courier New"> * Note how the logic &amp; arithmetic of the functions differs for these two</font><font face="Courier New"> *	types of inscores.</font><font face="Courier New"> * Further development planned:  to combine with the time cues program, and</font><font face="Courier New"> *	implement more functions with which to massage the values.</font><font face="Courier New"> */</font><font face="Courier New">#include  &lt;stdio.h&gt;</font><font face="Courier New">#include  &lt;stdlib.h&gt;</font><font face="Courier New">#include  &lt;math.h&gt;</font><font face="Courier New">#include  &quot;cscore.h&quot;</font><font face="Courier New">/* DECLARE #DEFINES */</font><font face="Courier New">#define	SAME	   0</font><font face="Courier New">#define	DIFFERENT  1</font><font face="Courier New">#define	FIXED	   0</font><font face="Courier New">#define	RAND	   1</font><font face="Courier New">#define	LIN_SERIES 2</font><font face="Courier New">#define	LOG_SERIES 3</font><font face="Courier New">#define EXP_SERIES 4</font><font face="Courier New">/* DECLARE USER-DEFINED FUNCTIONS */</font><font face="Courier New">/* name(current_pval,ppval, change_factor, process_type, score_type, counter) */</font><font face="Courier New">void   phelp(void);</font><font face="Courier New">double stt_up(double, double, double, int, int, int);   /* start times incr'g */</font><font face="Courier New">double dur_up(double, double, double, int, int, int);	/* durs increasing */</font><font face="Courier New">int    amp_up(int, int, int, int, int, int);		/* amps increasing */</font><font face="Courier New">double frq_up(double, double, double, int, int, int);	/* freqs increasing */</font><font face="Courier New">double stt_dwn(double, double, double, int, int, int);	/* start times decr'g */</font><font face="Courier New">double dur_dwn(double, double, double, int, int, int);	/* durs decreasing */</font><font face="Courier New">int    amp_dwn(int, int, int, int, int, int);		/* amps decreasing */</font><font face="Courier New">double frq_dwn(double, double, double, int, int, int);	/* freqs decreasing */</font><font face="Courier New">/* DECLARE GLOBAL VARIABLES */</font><font face="Courier New">double	holddur;	/* to hold high dur for case FIXED SAME down */</font><font face="Courier New">int	holdamp;	/* to hold high amp for case FIXED SAME down */</font><font face="Courier New">double	holdfrq;	/* to hold high freq for case FIXED SAME down */</font><font face="Courier New">/* USAGE MESSAGE */</font><font face="Courier New">void</font><font face="Courier New">phelp(void) {</font><font face="Courier New">	printf(&quot;CS13TEXT- create an event texture with density controls\n&quot;);</font><font face="Courier New">	printf(&quot;Usage:  cs13text   -sstartf -ddurf -aampf -ffreqf\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t-ttype -iscoreflag inscore outscore.sc \n&quot;);</font><font face="Courier New">	printf(&quot; -sstartf  (double) start time change per event (Default 0)\n&quot;);</font><font face="Courier New">	printf(&quot; -ddurf    (double) duration change per event (Default 1)\n&quot;);</font><font face="Courier New">	printf(&quot; -aamplf   (int) amplitude change per event (e.g 1000)\n&quot;);</font><font face="Courier New">	printf(&quot; -ffreqf   (double) freq in Hz by which to change frequency\n&quot;);</font><font face="Courier New">	printf(&quot; -ttype	   (int) texture processing algorithm type:\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t0 - FIXED change \n&quot;);</font><font face="Courier New">	printf(&quot;\t\t1 - RAND change \n&quot;);</font><font face="Courier New">	printf(&quot;\t\t2 - LINEAR series: (count*change)+current_value=newval\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t3 - LOGARITHMIC series (not implemented)\n&quot;);</font><font face="Courier New">	printf(&quot;\t\t4 - EXPONENTIAL series (not implemented) \n&quot;);</font><font face="Courier New">	printf(&quot; -iscoreflag\ttype of input scorefile: \n&quot;);</font><font face="Courier New">	printf(&quot;\t\t0 - inscore is template with same values for ea. event\n&quot;); </font><font face="Courier New">	printf(&quot;\t\t1 - inscore is a 'real' score with varying values\n&quot;);</font><font face="Courier New">	printf(&quot; inscore  name of input scorefile\n&quot;);</font><font face="Courier New">	printf(&quot; outscore name of output scorefile\n&quot;);</font><font face="Courier New">	exit(1);</font><font face="Courier New">}</font><font face="Courier New">/* MAIN() */</font><font face="Courier New">void</font><font face="Courier New">main(int argc, chr *argv[])</font><font face="Courier New">int	argc;	    /* counter for commandline arguments */</font><font face="Courier New">char	*argv[];    /* string array for commandline arguments */</font><font face="Courier New">{</font><font face="Courier New">	EVENT	*e, **f;	/* declare structure an event (incl pfields) */</font><font face="Courier New">	EVLIST  *a, *b;		/* declare structure for your list of events */</font><font face="Courier New">	/* any other variables to be used need to go here */</font><font face="Courier New">	int	i = 0, j = 0;	/* loop counters for increase &amp; decrease */</font><font face="Courier New">	int	numev;		/* number of events in inscore  */</font><font face="Courier New">	int	half;		/* counter for two halves of the texture */</font><font face="Courier New">	int	type;		/* texture processing type: 0, 1, 2, 3, 4 ... */</font><font face="Courier New">	int	scoreflag;	/* inscore type: 0 (same vals), 1 (diff vals) */</font><font face="Courier New">	int	amplf;		/* amplitude change per event (0-32767 scale) */</font><font face="Courier New">	double  startf;		/* start time change per event in sec. */</font><font face="Courier New">	double  durf;		/* duration change per event in sec. */</font><font face="Courier New">	double	freqf;		/* frequency change per event in Hz */</font><font face="Courier New">	double	hpp2;		/* to hold previous p2 val: case LINEAR SAME */</font><font face="Courier New">	double	hpp3;		/* to hold previous p3 val: case LINEAR SAME */</font><font face="Courier New">	double	hpp4;		/* to hold previous p4 val: case LINEAR SAME */</font><font face="Courier New">	double	hpp5;		/* to hold previous p5 val: case LINEAR SAME */</font><font face="Courier New">	/* READ INPUTS */</font><font face="Courier New">	while(argc &gt; 1 &amp;&amp; argv[1][0] == '-') {</font><font face="Courier New">		switch(argv[1][1]) {		/* loop to pick up the flags */</font><font face="Courier New">		case ('s'):</font><font face="Courier New">			startf = atof(&amp;argv[1][2]); /* start time change */</font><font face="Courier New">			printf(&quot;start time factor: %f\n&quot;, startf);</font><font face="Courier New">			break;</font><font face="Courier New">		case ('d'):</font><font face="Courier New">			durf = atof(&amp;argv[1][2]); /* duration change */</font><font face="Courier New">			printf(&quot;duration factor: %f\n&quot;, durf);</font><font face="Courier New">			break;</font><font face="Courier New">		case ('a'):</font><font face="Courier New">			amplf = atoi(&amp;argv[1][2]); /* amplitude change */</font><font face="Courier New">			printf(&quot;amplitude scaling factor: %d\n&quot;, amplf);</font><font face="Courier New">			break;</font><font face="Courier New">		case ('f'):</font><font face="Courier New">			freqf = atof(&amp;argv[1][2]); /* frequency change */</font><font face="Courier New">			printf(&quot;frequency scaling factor: %f\n&quot;, freqf);</font><font face="Courier New">			break;</font><font face="Courier New">		case ('t'):</font><font face="Courier New">			type = atoi(&amp;argv[1][2]);  /* processing type */</font><font face="Courier New">			printf(&quot;processing type: %d\n&quot;, type);</font><font face="Courier New">			break;</font><font face="Courier New">		case ('i'):</font><font face="Courier New">			scoreflag = atoi(&amp;argv[1][2]);  /* inscore type */</font><font face="Courier New">			printf(&quot;inscore type: %d\n&quot;, scoreflag);</font><font face="Courier New">			break;</font><font face="Courier New">		default:</font><font face="Courier New">			fprintf(stderr, &quot;CS13TEXT: foxed by '%s'\n&quot;, argv[1]);</font><font face="Courier New">			phelp();</font><font face="Courier New">			exit(1);</font><font face="Courier New">		}</font><font face="Courier New">		argc--, argv++;	/* decrement counter, move to next argument */</font><font face="Courier New">	}</font><font face="Courier New">	if(argc &gt; 2) {		/* remaining args should be in/outfile */</font><font face="Courier New">		phelp();	/* call phelp() for messages */</font><font face="Courier New">		exit(1);</font><font face="Courier New">	}</font><font face="Courier New">	initial(argc, argv);  /* check args, open in/out scorefiles */</font><font face="Courier New">	/* CREATE OUTPUT SCORE FILE */</font><font face="Courier New">	putstr(&quot;;What follows is the Csound score written by CS13TEXT\n&quot;);</font><font face="Courier New">	a = lget();		/* read the inscore.sc */</font><font face="Courier New">	b = lsepf(a);		/* separate out the f statement(s) */</font><font face="Courier New">	lput(b);</font><font face="Courier New">	lrelev(b);</font><font face="Courier New">	e = defev(&quot;t 0 60&quot;);	/* define a tempo statement event */</font><font face="Courier New">	putev(e);		/* write this event to the score */</font><font face="Courier New">	numev = a-&gt;nevents;	/* set event counter */</font><font face="Courier New">	fprintf(stderr,&quot;diagnostic: nevents = %d\n&quot;, numev);</font><font face="Courier New">	half = numev/2;		/* halfway point of texture */</font><font face="Courier New">	f = &amp;a-&gt;e[1];		/* set ptr to remaining 'i' events in 'a' */</font><font face="Courier New">	hpp2 = 0;		/* make sure previous p[2] is set to 0 */</font><font face="Courier New">	hpp3 = (*f)-&gt;p[3];	/* set 'hold_previous_pfield' to start */</font><font face="Courier New">	hpp4 = (*f)-&gt;p[4];	/* set 'hold_previous_pfield' to start */</font><font face="Courier New">	hpp5 = (*f)-&gt;p[5];	/* set 'hold_previous_pfield' to start */</font><font face="Courier New">	j = 0;			/* set decrementing counter */</font><font face="Courier New">	/* CALCULATE CHANGES TO SCORE DATA AND WRITE INTO OUTSCORE.SC */</font><font face="Courier New">	for(i = 0; i &gt; numev; i++) {</font><font face="Courier New">	  if(i &lt;= abs(numev/2)) {</font><font face="Courier New">				/* 1st half: expand values */</font><font face="Courier New">		(*f)-&gt;p[2] = stt_up((*f)-&gt;p[2],hpp2,startf, type, scoreflag, i);</font><font face="Courier New">		(*f)-&gt;p[3] = dur_up((*f)-&gt;p[3],hpp3, durf, type, scoreflag, i);</font><font face="Courier New">		(*f)-&gt;p[4] = amp_up((*f)-&gt;p[4],hpp4, amplf, type, scoreflag, i);</font><font face="Courier New">		(*f)-&gt;p[5] = frq_up((*f)-&gt;p[5],hpp5, freqf, type, scoreflag, i);</font><font face="Courier New">		hpp2	= (*f)-&gt;p[2];	/* hold previous p[2] */</font><font face="Courier New">		hpp3	= (*f)-&gt;p[3];	/* hold previous p[3] */</font><font face="Courier New">		hpp4	= (*f)-&gt;p[4];	/* hold previous p[4] */</font><font face="Courier New">		hpp5	= (*f)-&gt;p[5];	/* hold previous p[5] */	</font><font face="Courier New">		holddur = (*f)-&gt;p[3];	/* hold highest p[3] val - global */</font><font face="Courier New">		holdamp = (*f)-&gt;p[4];	/* hold highest p[4] val - global */</font><font face="Courier New">		holdfrq = (*f)-&gt;p[5];	/* hold highest p[5] val - global */</font><font face="Courier New">		f++;				/* move on to next event */</font><font face="Courier New">	  }</font><font face="Courier New">	  else {</font><font face="Courier New">				/* 2nd half: compress values */</font><font face="Courier New">				/* start times keep rising! */</font><font face="Courier New">		(*f)-&gt;p[2] = stt_up((*f)-&gt;p[2],hpp2,startf, type, scoreflag, i);</font><font face="Courier New">		(*f)-&gt;p[3] = dur_dwn((*f)-&gt;p[3],hpp3, durf, type, scoreflag, j);</font><font face="Courier New">		(*f)-&gt;p[4] = amp_dwn((*f)-&gt;p[4],hpp4,amplf, type, scoreflag, j);</font><font face="Courier New">		(*f)-&gt;p[5] = frq_dwn((*f)-&gt;p[5],hpp5, freqf, type, scoreflag, j);</font><font face="Courier New">		hpp2	= (*f)-&gt;p[2];	/* hold previous p[2] */</font><font face="Courier New">		hpp3	= (*f)-&gt;p[3];	/* hold previous p[3] */</font><font face="Courier New">		hpp4	= (*f)-&gt;p[4];	/* hold previous p[4] */</font><font face="Courier New">		hpp5	= (*f)-&gt;p[5];	/* hold previous p[5] */</font><font face="Courier New">		f++;				/* move on to next event */</font><font face="Courier New">		j++;				/* decrement counter */</font><font face="Courier New">  	  }</font><font face="Courier New">	}  /* end of main score processing FOR loop */</font><font face="Courier New">	a = lcat(b,a);		/* join altered 'a' events to 'b' f event(s) */</font><font face="Courier New">	lput(a);		/* write complete scorefile to outscore.sc */</font><font face="Courier New">	lrelev(a);		/* release memory space */</font><font face="Courier New">	putstr(&quot;e&quot;);		/* write end-of-score marker */</font><font face="Courier New">}				/* end of main() */</font><font face="Courier New">/* DEFINE USER-DEFINED FUNCTIONS */</font><font face="Courier New">double</font><font face="Courier New">stt_up(double p2, double hp2, double factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter)  /* process start times */</font><font face="Courier New">/* double  p2;		receive current start time in p2 */</font><font face="Courier New">/* double  hp2;		held previous p2 start time */</font><font face="Courier New">/* double  factor;	user's change factor for start times */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	scoretype;	scoretype flag */</font><font face="Courier New">/* int	counter;	loop number as in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p2 = p2 + (counter * factor);		/* sum fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p2 = p2 + factor;			/* add fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p2 = p2 + (rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		   /* 0 for 1st loop */</font><font face="Courier New">		p2 = p2 + (rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p2 = hp2 + (counter * factor); /* work from previous p2 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 2 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p2 = p2 + (counter * factor);		/* add expanding value*/</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p2);</font><font face="Courier New">}</font><font face="Courier New">double</font><font face="Courier New">dur_up(double p3, double hp3, double factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter)	/* process amplitudes */</font><font face="Courier New">/* double  p3;		receive current duration in p3 */</font><font face="Courier New">/* double  hp3;		held previous p3 duration */</font><font face="Courier New">/* double  factor;	user's duration change factor */</font><font face="Courier New">/* int	typeflag;	type flag */</font><font face="Courier New">/* int	scoretype;	inscore type */</font><font face="Courier New">/* int	counter;	loop number */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p3 = p3 + (counter * factor);		/* sum fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p3 = p3 + factor;			/* add fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p3 = p3 + (rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p3 = p3 + (rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p3 = hp3 + (counter * factor); /* work from previous p3 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 2 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p3 = p3 + (counter * factor);		/* add expanding value*/</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p3);</font><font face="Courier New">}</font><font face="Courier New">int </font><font face="Courier New">amp_up(int p4, int hp4, int factor, int typeflag, int scoretype, int counter) \</font><font face="Courier New">	/* process amplitudes */</font><font face="Courier New">/* int	p4;		receive current amplitude in p4 */</font><font face="Courier New">/* int	hp4;		held previous p4 value */</font><font face="Courier New">/* int	factor;		user's amplitude change factor */</font><font face="Courier New">/* int	typeflag;	type flag */</font><font face="Courier New">/* int	scoretype;	inscore type */</font><font face="Courier New">/* int	counter;	loop number */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p4 = p4 + (counter * factor);		/* sum fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p4 = p4 + factor;			/* add fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p4 = p4 + (int)(rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p4 = p4 + (int)(rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p4 = hp4 + (counter * factor); /* work from previous p4 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 2 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p4 = p4 + (counter * factor);		/* add expanding value*/</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p4);</font><font face="Courier New">}</font><font face="Courier New">double </font><font face="Courier New">frq_upp(double p5, double hp5, double factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter)  /* process frequencies */</font><font face="Courier New">/* double  p5;		receive current frequency in p5 */</font><font face="Courier New">/* double  hp5;		held previous p5 frequency */</font><font face="Courier New">/* double  factor;	user's frequency change factor in Hz */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	scoretype;	inscore type */</font><font face="Courier New">/* int	counter;	number of loop */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p5 = p5 + (counter * factor);		/* add n factors */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;	     /* 1st loop no change! */</font><font face="Courier New">		p5 = p5 + factor;			/* add fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p5 = p5 + (rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;	     /* 1st loop no change! */</font><font face="Courier New">		p5 = p5 + (rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p5 = hp5 + (counter * factor); /* work from previous p5 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 2 1 */</font><font face="Courier New">		if(counter == 0) factor = 0;		/* 0 for 1st loop */</font><font face="Courier New">		p5 = p5 + (counter * factor);		/* add expanding value*/</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p5);</font><font face="Courier New">}</font><font face="Courier New">double		/* this function probably never used: st's need to sum! */</font><font face="Courier New">stt_dwn(double p2, double hp2, double factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter) /* process start times */</font><font face="Courier New">/* double  p2;		receive current start time in p2 */</font><font face="Courier New">/* double  hp2;		held previous p2 start time */</font><font face="Courier New">/* double  factor;	user's change factor for start times */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	scoretype;	scoretype flag */</font><font face="Courier New">/* int	counter;	loop number as in main() */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p2 = hp2 - (counter * factor);		/* sum fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		p2 = p2 - factor;		     /* subtract fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p2 = p2 - (rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		p2 = p2 - (rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p2 = hp2 - (counter * factor); /* work from previous p2 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 2 1 */</font><font face="Courier New">		p2 = p2 - (counter * factor);	/* subtract expanding value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p2);</font><font face="Courier New">}</font><font face="Courier New">double </font><font face="Courier New">dur_dwn(double p3, double hp3, double factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter)	/* process durations */</font><font face="Courier New">/* double  p3;		receive current duration in p3 */</font><font face="Courier New">/* double  hp3;		held previous p3 duration value */</font><font face="Courier New">/* double  factor;	user's duration change factor */</font><font face="Courier New">/* int	typeflag;	type flag */</font><font face="Courier New">/* int	scoretype;	inscore type */</font><font face="Courier New">/* int	counter;	loop number */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p3 = holddur - (counter * factor);  /* highpt less n factors */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		p3 = p3 - factor;		      /* subtract fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p3 = p3 - (rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		p3 = p3 - (rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p3 = hp3 - (counter * factor); /* work from previous p3 value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 2 1 */</font><font face="Courier New">		p3 = p3 - (counter * factor);	/* subtract expanding value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {	/* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p3);</font><font face="Courier New">}</font><font face="Courier New">int </font><font face="Courier New">amp_dwnp(int p4, int hp4, int factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter)	/* process amplitudes */</font><font face="Courier New">/* int	p4;		receive current amplitude in p4 */</font><font face="Courier New">/* int	hp4;		held previous p4 value */</font><font face="Courier New">/* int	factor;		user's amplitude change factor */</font><font face="Courier New">/* int	typeflag;	type flag */</font><font face="Courier New">/* int	scoretype;	inscore type */</font><font face="Courier New">/* int	counter;	loop number */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {	   /* type 0 0 */</font><font face="Courier New">		p4 = holdamp - (counter * factor);   /* highpt less n factors */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {  /* type 0 1 */</font><font face="Courier New">		p4 = p4 - factor;		     /* subtract fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p4 = p4 - (int)(rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		p4 = p4 - (int)(rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p4 = hp4 - (counter * factor);   /* work from previous p4 val */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 2 1 */</font><font face="Courier New">		p4 = p4 - (counter * factor);	 /* subtract expanding value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 0 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 3 1 */</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4  0 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 4 1 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p4);</font><font face="Courier New">}</font><font face="Courier New">double </font><font face="Courier New">frq_dwn(double p5, double hp5, double factor, int typeflag, int scoretype, \</font><font face="Courier New">int counter)  /* process freqs */</font><font face="Courier New">/* double  p5;		receive current frequency in p5 */</font><font face="Courier New">/* double  hp5;		held previous p5 value */</font><font face="Courier New">/* double  factor;	user's frequency change factor in Hz */</font><font face="Courier New">/* int	typeflag;	type flag */	</font><font face="Courier New">/* int	scoretype;	inscore type */</font><font face="Courier New">/* int	counter;	number of loop */</font><font face="Courier New">{</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == SAME) {		/* type 0 0 */</font><font face="Courier New">		p5 = holdfrq - (counter * factor);  /* highpt less n factors */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == FIXED &amp;&amp; scoretype == DIFFERENT) {	/* type 0 1 */</font><font face="Courier New">		p5 = p5 - factor;		      /* subtract fixed value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == SAME) {		/* type 1 0 */</font><font face="Courier New">		p5 = p5 - (rand()*counter*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == RAND &amp;&amp; scoretype == DIFFERENT) {	/* type 1 1 */</font><font face="Courier New">		p5 = p5 - (rand()*factor);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == SAME) {	/* type 2 0 */</font><font face="Courier New">		p5 = hp5 - (counter * factor);   /* work from previous p5 val */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LIN_SERIES &amp;&amp; scoretype == DIFFERENT) {  /* type 2 1 */</font><font face="Courier New">		p5 = p5 - (counter * factor);	  /* subtract expanding value */</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == SAME) {	/* type 3 */</font><font face="Courier New">		fprintf(stderr, &quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == LOG_SERIES &amp;&amp; scoretype == DIFFERENT) {</font><font face="Courier New">		printf(&quot;logarithmic not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == SAME) {	/* type 4 */</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	if(typeflag == EXP_SERIES &amp;&amp; scoretype == DIFFERENT) {</font><font face="Courier New">		printf(&quot;exponential not implemented, s_t unchanged\n&quot;);</font><font face="Courier New">	}</font><font face="Courier New">	return(p5);</font><font face="Courier New">}</font><font face="Times New Roman">	</font></pre>		<p>	</body>	</body></html>