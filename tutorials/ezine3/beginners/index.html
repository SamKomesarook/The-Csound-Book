<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>index</title>		<meta name="Template" content="C:\PROGRAM FILES\MICROSOFT OFFICE\OFFICE\html.dot">	</head>	<body bgcolor="white" text="black" link="#203939" vlink="#518e8e" alink="#9f0050">		<table border="0">			<tr>				<td valign="top" colspan="2"><a href="../index.html"><img src="../logosm.gif" alt="Csound Magazine Summer 1999" border="0" width="296" height="27"></a></td>			</tr>			<tr>				<td valign="top"><font size="2"><strong>Columns</strong></font>					<p><font size="2">Beginners</font></p>					<p><a href="../synthesis/index.html"><font size="2">Synthesis</font></a></p>					<p><a href="../processing/index.html"><font size="2">Processing</font></a></p>					<p><a href="../realtime/index.html"><font size="2">Real-Time</font></a></p>					<p><font size="2"><strong>Features</strong></font></p>					<p><a href="../axcsound.html"><font size="2">AXCsound</font></a></p>					<p><a href="../composing/index.html"><font size="2">Composing</font></a></p>					<p><a href="../ecocmask.html"><font size="2">Ecological Modeling</font></a></p>					<p><font size="2"><strong>Departments</strong></font></p>					<p><a href="../links.html"><font size="2">Links</font></a></p>					<p><a href="../editorial.html"><font size="2">Editorial</font></a></td>				<td valign="top">					<h2>Envelopes</h2>					<p><font size="2"><i>Hans Mikelson</i></font></p>					<p><a href="mailto:hljmm@werewolf.net"><font size="2">hljmm@werewolf.net</font></a></p>					<p><a href="envelop.orc"><font size="2">envelop.orc</font></a><font size="2"> </font><a href="envelop.sco"><font size="2">envelop.sco</font></a></p>					<p><font size="2"><b>Introduction</b></font></p>					<p><font size="2">Envelopes are used to control how a sound changes over time. One of the most common envelopes is the amplitude envelope. The amplitude envelope shapes the volume of the sound over time. Envelopes can be used to change other aspects of the sound such as pitch and the amount of filtering.</font></p>					<p><font size="2"><b>Attack, decay, sustain and release</b></font></p>					<p><font size="2">The first part of the envelope is called the attack. For an amplitude envelope this would be how long it takes to go from silence to the maximum volume. A drum and a piano usually have short attack times. The next section is called decay. During the decay section the amplitude would decrease from the maximum level to some constant level. Drums have short decay times, a piano might have a slightly longer decay time and a horn longer still. The sustain level is a constant level that the sound maintains during the middle part of the sound. The final part of the envelope is called the release. The release time is the time it takes the sound to fade from the sustain level to silence.</font></p>					<p><img src="image98.gif" width="314" height="176"></p>					<pre><b>Figure 1</b>The parts of a typical ADSR envelope.</pre>					<p><font size="2"><b>Linear and exponential</b></font></p>					<p><font size="2">Csound has two basic envelope types, linear and exponential. The points of linear envelopes are connected by straight lines. The points of exponential envelopes are connected by curved lines. In Csound linear envelopes can be defined using <b>linseg</b> and exponential envelopes can be defined using <b>expseg</b>. The points of an exponential envelope must all be either positive or negative. The points of an exponential envelope must not be zero or go from positive to negative values.</font></p>					<p><font size="2"><b>Amplitude envelopes</b></font></p>					<p><font size="2">Instrument 1 illustrates how to implement an ADSR amplitude envelope using <b>linseg</b>.</font></p>					<pre>       instr  1idur   =      p3               ; Durationiamp   =      p4               ; Amplitudeifqc   =      cpspch(p5)       ; Convert pitch to frequencyitable =      p6               ; Waveform tableiatt   =      p7               ; Attack timeidec   =      p8               ; Decay timeisus   =      p9               ; Sustain levelirel   =      p10              ; Release time; The following code defines the amplitude envelopeaenv   linseg 0, iatt, 1, idec, isus, idur-iatt-idec-irel, isus, irel, 0asig   oscil  aenv*iamp, ifqc, itable ; Generate the audio signal       outs   asig, asig         ; Output the result       endin</pre>					<p><font size="2">The <b>linseg</b> opcode takes an odd number of parameters which list a sequence of levels and the times it takes to go from one level to another. In this case the envelope starts at 0 and takes <i>iatt</i> seconds to reach the maximum amplitude. The sound then decays over <i>idec</i> seconds to the level <i>isus</i>. The sustain portion lasts for the duration of the note minus the attack time, decay time and release times. The ending sustain level is again <i>isus</i>. Finally the sound decays to zero over <i>irel</i> seconds. Most synthesizers would define the release time to be after the sound ends. This can be accomplished by adding the following lines before the <b>linseg</b> statement:</font></p>					<pre>p3      =      p3   + irelidur    =      idur + irel</pre>					<p><font size="2">This is demonstrated in instrument 2.</font></p>					<p><font size="2">An amplitude envelope with a very short attack and decay time and a constant sustain envelope is often called a de-click envelope and is used to prevent clicks and pops associated with sudden changes in amplitudes.</font></p>					<pre>adeclick linseg 0, .002, 1, idur-.004, 1, .002, 0</pre>					<p><font size="2">The signal is then multiplied by the de-click envelope before final output.</font></p>					<pre>         outs    asig*adeclick, asig*adeclick</pre>					<p><font size="2">Csound's <b>linseg</b> opcode is not limited to the ADSR segments found on most synthesizers. Csound envelopes can be made of an arbitrary number of line segments.</font></p>					<p><font size="2"><b>Other Envelopes</b></font></p>					<p><font size="2">Envelopes are often applied to pitch and filter cut off frequency. Instrument 4 demonstrates applying a pitch envelope and instrument 5 demonstrates applying an envelope to the cut-off frequency of a resonant low pass filter. In this case <b>expseg</b> is used. Exponential envelopes are often used with frequencies.</font></p>					<p><font size="2"><b>Conclusion</b></font></p>					<p><font size="2">Csound has several other envelopes available which will not be discussed here. Some other possible uses of envelopes are for fading in a vibrato effect, cross fading between different wave forms or panning the signal from left to right and others. Csound's envelope opcodes offer the ability to create complex multi-segment envelopes which can really bring your sounds to life.</font></td>			</tr>		</table>	</body></html>