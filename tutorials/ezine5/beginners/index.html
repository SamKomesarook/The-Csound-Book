<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Csound Magazine</title>		<meta name="author" content="Hans Mikelson">		<meta name="summary" content="On-line magazine with articles on Csound for synthesis, signal processing, real-time performance, composing and programming.">		<meta name="keywords" content="csound, Csound, computer music, software synthesizer, software synth, digital signal processing, DSP, dsp, algorithmic composition, fractal music, electro-acoustic, electronica, signal processing, synthesis, sound design, audio programming">		<meta name="keywords" content="csound, Csound, computer music, software synthesizer, software synth, digital signal processing, DSP, dsp, algorithmic composition, fractal music, electro-acoustic, electronica, signal processing, synthesis, sound design, audio programming">	</head>	<body bgcolor="white" text="black" link="#000040" vlink="#264624" alink="#e9ca18">		<table border="0">			<tr>				<td valign="top" colspan="5"><a href="../index.html"><img src="../figures/logosm.jpg" border="0" width="291" height="29"></a></td>			</tr>			<tr>				<td valign="top" rowspan="12"><strong>Columns</strong>					<p><a href="../weekly/index.html">Weekly</a></p>					<p>Beginners</p>					<p><a href="../synthesis/index.html">Synthesis</a></p>					<p><a href="../processing/index.html">Processing</a></p>					<p><a href="../realtime/index.html">Real-Time</a></p>					<p><strong>Features</strong></p>					<p><a href="../internals/index.html">Internals</a></p>					<p><a href="../composition/index.html">Composition</a></p>					<p><strong>Departments</strong></p>					<p><a href="../links.html">Links</a></p>					<p><a href="../editorial.html">Editorial</a></p>					<p><a href="../contribute.html">Contribute</a></p>					<p><a href="../past.html">Back Issues</a></p>					<p><a href="http://www.csounds.com/"><img src="../figures/csounds1.gif" border="0" width="88" height="31"></a></td>				<td valign="top" colspan="4">					<h2>Filtering</h2>					<p><i>Hans Mikelson</i></p>					<p><a href="mailto:hans@csounds.com">hans@csounds.com</a></p>					<p><a href="filter.orc">filter.orc</a> <a href="filter.sco">filter.sco</a> <a href="http://csounds.com/ezine/limit.wav">limit.wav</a></p>					<p><strong>Introduction</strong></p>					<p>Filters are used to separate mixtures into different components. A complex sound can be considered a mixture of sounds of different frequencies. Audio filters can be used to separate high frequency sounds from low frequency sounds. Usually this means allowing sounds of certain frequencies to pass unaltered while blocking sounds of other frequencies. Certain filters can be used to amplify or boost certain frequencies. This article will only describe a few of the most commonly used filters: the low pass filter, the high pass filter and the band pass filter.</p>					<p><strong>The low pass filter</strong></p>					<p>A low pass filter is designed to allow all frequencies below a cut off frequency to pass while preventing all frequencies above the cut off frequency from passing. Figure 1 shows a frequency response from a low pass filter. Notice that the transition is not an abrupt vertical line but instead a sloping line which is rounded at the top and bottom. This means that the filter allows some high frequencies through and reduces some of the frequencies below the filter cut off frequency. The cut off frequency is defined as the point where the curve has dropped to about .707 or 1/sqrt(2).</p>					<p><img src="lowpass.jpg" width="398" height="226"></p>					<pre><strong>Figure 1.</strong>Frequency response of a low pass filter.</pre>					<p>A good way to understand the effect of a filter is to apply the filter to white noise and listen to the result. The following Csound code implements this:</p>					<pre>arnd   rand      1                          ; White noiseaout   butterlp  arnd, kfco                 ; Low pass filter</pre>					<pre>;    Sta   Dur  Amp    Fco1  Fco2i10  0     10   30000  5000  100</pre>					<p>In the above example the filter is swept from 5000 Hz to 100 Hz. Instrument 20 applies a low pass filter to a spoken phrase.</p>					<p><strong>The high pass filter</strong></p>					<p>The high pass filter is the opposite of the low pass filter blocking low frequencies but allowing high frequencies to pass.</p>					<p><img src="hipass.jpg" width="398" height="226"></p>					<pre><strong>Figure 2.</strong>Frequency response of a high pass filter.</pre>					<p>High pass filters have many different uses. A high pass filter with a very low cut off frequency (~20 Hz) can be used to remove DC from a signal. A high pass filter with a moderately high cut off frequency (~1500 Hz) can be used to simulate the flared end of a clarinet or horn in a waveguide model. A high pass filter can create a sort of &quot;radio voice&quot; sound effect when applied to vocals as in the following example.</p>					<pre>asig   diskin    isamp, 1                   ; Read sample from diskaout   butterhp  asig, ifc                  ; High pass filteraout   =         aout*iamp*kdclk            ; Amplify</pre>					<pre>;    Sta   Dur   Amp  Sample       Fci21  5     4.63  1    &quot;limit.wav&quot;  2000</pre>					<p>High pass filters can be used to isolate the high's for additional processing as in a de-esser. High pass filters are useful when synthesizing certain percussion instruments such as cymbals.</p>					<p><strong>The band pass filter</strong></p>					<p>The band pass filter only allows frequencies within a certain range of the center frequency to pass. Band pass filters are useful for creating formants or simulating the resonances of acoustic resonators like a guitar or violin body. The following example processes the sound as if it had been produced inside a particular resonating body</p>					<pre>af1    butterbp  asig, if1, if1/8           ; Band pass filteraf2    butterbp  asig, if2, if2/8           ; Band pass filteraf3    butterbp  asig, if3, if3/8           ; Band pass filteraout   =         (af1+af2+af3)*iamp*kdclk   ; Amplify</pre>					<pre>;    Sta   Dur   Amp  Sample       F1  F2  F3i22  10    4.63  1    &quot;limit.wav&quot;  116 422 849</pre>					<p>Band pass filters are used to isolate certain frequency bands for further processing.</p>					<p><strong>Filter types</strong></p>					<p>Csound has many different types of filters. Below is a table listing most of Csounds filters categorized by the type of frequency response:</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea"><strong>Filter Name</strong></td>				<td valign="top" bgcolor="#e6f7ff"><strong>Description</strong></td>				<td valign="top" bgcolor="#f4edec"><strong>Opcodes</strong></td>				<td valign="top" bgcolor="#ecf4ec"><strong>Example</strong></td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">Low pass filter</td>				<td valign="top" bgcolor="#e6f7ff">Allows low frequencies to pass. Attenuates high frequencies.</td>				<td valign="top" bgcolor="#f4edec">tone, tonek, tonex, butterlp, rezzy, moogvcf, svfilter, lowres, lowresx, vlowres, lowpass2, port, portk</td>				<td valign="top" bgcolor="#ecf4ec">Hiss reduction, most common synthesizer filter, darkness</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">High pass filter</td>				<td valign="top" bgcolor="#e6f7ff">Allows high frequencies to pass. Attenuates low frequencies.</td>				<td valign="top" bgcolor="#f4edec">atone, atonek, atonex, butterhp, rezzy, svfilter, dcblock</td>				<td valign="top" bgcolor="#ecf4ec">Cross-over, some synthesizer filters, radio voice</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">Band pass filter</td>				<td valign="top" bgcolor="#e6f7ff">A center frequency and a bandwidth is specified. Frequencies within a frequency band of the center frequency are allowed to pass. Other frequencies are blocked.</td>				<td valign="top" bgcolor="#f4edec">reson, resonk, resonx, resonr, resonz, butterbp, svfilter</td>				<td valign="top" bgcolor="#ecf4ec">Fomants, acoustic body simulations</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">Band reject filter or notch filter</td>				<td valign="top" bgcolor="#e6f7ff">The opposite of the band pass filter. A center frequency and band width are specified. Frequencies within the specified bandwidth are blocked while higher and lower frequencies are allowed to pass.</td>				<td valign="top" bgcolor="#f4edec">areson, aresonk, butterbr</td>				<td valign="top" bgcolor="#ecf4ec">60 Hz hum eliminator</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">Parametric boost/cut filter</td>				<td valign="top" bgcolor="#e6f7ff">Similar to both band pass and band reject filters. Able to boost or cut a certain frequency band.</td>				<td valign="top" bgcolor="#f4edec">pareq</td>				<td valign="top" bgcolor="#ecf4ec">Parametric equalizer</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">High shelf filter</td>				<td valign="top" bgcolor="#e6f7ff">Can amplify or attenuate high frequencies.</td>				<td valign="top" bgcolor="#f4edec">pareq</td>				<td valign="top" bgcolor="#ecf4ec">Home stereo treble control, mixing console high shelf filter.</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">Low shelf filter</td>				<td valign="top" bgcolor="#e6f7ff">Can amplify or attenuate low frequencies.</td>				<td valign="top" bgcolor="#f4edec">pareq</td>				<td valign="top" bgcolor="#ecf4ec">Home stereo bass control, mixing console low shelf filter.</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">General digital filters</td>				<td valign="top" bgcolor="#e6f7ff">Can be used to construct many different types of filters.</td>				<td valign="top" bgcolor="#f4edec">biquad, filter2, zfilter2, nlfilt</td>				<td valign="top" bgcolor="#ecf4ec">&nbsp;</td>			</tr>			<tr>				<td valign="top" bgcolor="#fff9ea">Other filters</td>				<td valign="top" bgcolor="#e6f7ff">These typically involve delay lines with feedback.</td>				<td valign="top" bgcolor="#f4edec">comb, alpass, nestedap, streson</td>				<td valign="top" bgcolor="#ecf4ec">Reverbs and digital waveguides.</td>			</tr>			<tr>				<td valign="top" colspan="4">If I want a simple solid filter solution I usually use the butterworth filters: <strong>butterlp</strong>, <strong>butterhp</strong>, <strong>butterbr</strong> and <strong>butterbp</strong>. These are very reliable over a wide range of conditions. If I want a musical analog sounding filter I usually use <strong>rezzy</strong> or <strong>moogvcf</strong>. <strong>Svfilter</strong> has been recommended to me as well. For an equalizer or a shelf filter <strong>pareq</strong> is the only choice. Experiment with different filters until you find some that work for you. Sometimes I will try one filter while I am working on a sound and then substitute different one to see if it sounds better.					<p><strong>Links</strong></p>					<p><a href="http://www.student.oulu.fi/~oniemita/DSP/INDEX.HTM">http://www.student.oulu.fi/~oniemita/DSP/INDEX.HTM</a> Yehar's sound DSP tutorial for the braindead. This is an excellent introduction to digital filter theory.</p>					<p><a href="http://www.physics.uq.oz.au/people/jones/ph360/lectures/topic4/l4/l4.html">http://www.physics.uq.oz.au/people/jones/ph360/lectures/topic4/l4/l4.html</a> Frequency Response of Discreet Systems. Some lecture notes on filters.</td>			</tr>		</table>	</body></html>