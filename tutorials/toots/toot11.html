<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Toots</title>	</head>	<body bgcolor="white">		<hr size="1">		<font size="5"><b><img height="30" width="290" src="titles/toot11.gif"></b></font>		<hr size="1">		<div align="justify">			<p><a href="instruments/toot11.orc">toot11.orc</a><br>			<a href="instruments/toot11.sco">toot11.sco</a></p>			<p>We now use a plucked string instrument to explore some of Csound's score preprocessing capabilities. Since the focus here is on the score, the instrument is presented without explanation.</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td><b>instr</b> 11</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td></td>					<td>asig1</td>					<td><a href="../../references/manual_html/siggen/pluck.htm"><b>pluck</b></a></td>					<td>ampdb(p4)/2, p5, p5, 0, 1</td>				</tr>				<tr>					<td></td>					<td>asig2</td>					<td><a href="../../references/manual_html/siggen/rand.htm"><b>rand</b></a></td>					<td>ampdb(p4)/2, p5 * 1.003, p5 * 1.003, 0, 1</td>				</tr>				<tr>					<td></td>					<td><a href="../../references/manual_html/sigio/in.htm"><b>out</b></a></td>					<td colspan="2">asig1+asig2</td>				</tr>				<tr>					<td><b>endin</b></td>					<td></td>					<td></td>					<td></td>				</tr>			</table>			</b></p>			<p>The score can be divided into time-ordered sections by the <a href="../../references/manual_html/score/s.htm"><b>s</b> statement</a><b>.</b> Prior to performance, each section is processed by three routines: <a href="../../references/manual_html/score/top.htm"><b>Carry</b></a>, <a href="../../references/manual_html/score/top.htm"><b>Tempo</b></a>, and <a href="../../references/manual_html/score/top.htm"><b>Sort</b></a>. The score <font face="Courier New" size="3">toot11.sco</font> has multiple sections containing each of the examples below, in both of the forms listed.</p>			<p><font size="4"><b>Carry</b></font></p>			<p>The carry feature allows a dot (&quot;.&quot; ) in a p-field to indicate that the value is the same as above, provided the instrument is the same. Thus the following two examples are identical:</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td>|</td>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>					<td>|</td>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>				</tr>				<tr>					<td>i11</td>					<td>1</td>					<td>.</td>					<td>.</td>					<td>300</td>					<td>|</td>					<td>i11</td>					<td>1</td>					<td>1</td>					<td>90</td>					<td>300</td>				</tr>				<tr>					<td>i11</td>					<td>2</td>					<td>.</td>					<td>.</td>					<td>400</td>					<td>|</td>					<td>i11</td>					<td>2</td>					<td>1</td>					<td>90</td>					<td>400</td>				</tr>			</table>			</b><br>			A special form of the carry feature applies to p2 only. A &quot;+&quot; in p2 will be given the value of p2+p3 from the previous <b>i</b> statement. The &quot;+&quot; can also be carried with a dot:<br>			<b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td>|</td>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>					<td>|</td>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>				</tr>				<tr>					<td>i.</td>					<td>+</td>					<td>.</td>					<td>.</td>					<td>300</td>					<td>|</td>					<td>i11</td>					<td>1</td>					<td>1</td>					<td>90</td>					<td>300</td>				</tr>				<tr>					<td>i.</td>					<td>.</td>					<td>.</td>					<td>.</td>					<td>500</td>					<td>|</td>					<td>i11</td>					<td>2</td>					<td>1</td>					<td>90</td>					<td>500</td>				</tr>			</table>			</b><br>			The carrying dot may be omitted when there are no more explicit pfields on that line:<br>			<b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td>|</td>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>					<td>|</td>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>				</tr>				<tr>					<td>i11</td>					<td>+</td>					<td>2</td>					<td></td>					<td></td>					<td>|</td>					<td>i11</td>					<td>1</td>					<td>2</td>					<td>90</td>					<td>200</td>				</tr>				<tr>					<td>i11</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td>|</td>					<td>i11</td>					<td>3</td>					<td>2</td>					<td>90</td>					<td>200</td>				</tr>			</table>			<font size="4"><br>			Ramping</font></b></p>			<p>A variant of the carry feature is ramping, which substitutes a sequence of linearly interpolated values for a ramp symbol ( &lt; ) spanning any two values of a pfield. Ramps work only on consecutive calls to the same instrument, and they cannot be applied to the first three p-fields.</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td>|</td>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>					<td>|</td>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>				</tr>				<tr>					<td>i .</td>					<td>+</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td>|</td>					<td>i11</td>					<td>1</td>					<td>1</td>					<td>85</td>					<td>300</td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>400</td>					<td>|</td>					<td>i11</td>					<td>2</td>					<td>1</td>					<td>80</td>					<td>400</td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td>|</td>					<td>i11</td>					<td>3</td>					<td>1</td>					<td>75</td>					<td>300</td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>4</td>					<td>70</td>					<td>200</td>					<td>|</td>					<td>i11</td>					<td>4</td>					<td>4</td>					<td>70</td>					<td>200</td>				</tr>			</table>			<br>			<font size="4">Tempo</font></b></p>			<p>The unit of time in a Csound score is the beat - normally one beat per second. This can be modified by a tempo statement which enables the score to be arbitrarily time-warped. Beats are converted to their equivalent in seconds during score pre-processing of each Section. In the absence of a Tempo statement in any Section, the following tempo statement is inserted:</p>		</div>		<p>t 0 60</p>		<div align="justify">			<p>It means that at beat 0 the tempo of the Csound beat is 60 (1 beat per second). To hear the Section at twice the speed, we have two options: 1) cut all p2 and p3 in half and adjust the start times, or 2) insert the statement <font face="Courier New" size="3">t 0 120</font> within the Section.</p>			<p>The tempo statement can also be used to move between different tempi during the score, thus enabling ritardandi and accelerandi. Changes are linear by beat size. The following statement will cause the score to begin at tempo 120, slow to tempo 80 by beat 4, then accelerate to 220 by beat 7:</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>t</td>					<td>0</td>					<td>120</td>					<td>4</td>					<td>80</td>					<td>7</td>					<td width="36%">220</td>				</tr>			</table>			</b></p>		</div>		<div align="justify">			<p>The following will produce identical sound files:</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>t</td>					<td>0</td>					<td>120</td>					<td colspan="8">; Double-time via Tempo</td>				</tr>				<tr>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td>|</td>					<td>;ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>.5</td>					<td>90</td>					<td>200</td>					<td>|</td>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>200</td>				</tr>				<tr>					<td>i .</td>					<td>+</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td>|</td>					<td>i .</td>					<td>+</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>400</td>					<td>|</td>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>400</td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td>|</td>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>2</td>					<td>70</td>					<td>200</td>					<td>|</td>					<td>i .</td>					<td>.</td>					<td>4</td>					<td>70</td>					<td>200</td>				</tr>			</table>			</b><br>			</p>			<p>The following includes an accelerando and ritard. It should be noted, however, that the ramping feature is applied <i>after</i> time-warping, and is thus proportional to elapsed chronological time. While this is perfect for amplitude ramps, frequency ramps will not result in harmonically related pitches during tempo changes. The frequencies needed here are thus made explicit.</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>t</td>					<td>0</td>					<td>60</td>					<td>4</td>					<td>400</td>					<td>8</td>					<td>60</td>					<td>; Time-warping via Tempo</td>				</tr>				<tr>					<td>; ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>70</td>					<td>200</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>+</td>					<td>.</td>					<td>&lt;</td>					<td>500</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>90</td>					<td>800</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>500</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>70</td>					<td>200</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>90</td>					<td>1000</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>600</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>70</td>					<td>200</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>8</td>					<td>90</td>					<td>100</td>					<td></td>					<td></td>					<td></td>				</tr>			</table>			</b><br>			</p>			<p><font size="4"><b>Score Sections</b></font></p>			<p>Three additional score features are extremely useful in Csound. The <a href="../../references/manual_html/score/s.htm"><b>s</b> statement</a> was used above to divide a score into Sections for individual pre-processing. Since each s statement establishes a new relative time of 0, and all actions within a section are relative to that, it is convenient to develop the score one section at a time, then link the sections into a whole later.</p>			<p>Suppose we wish to combine the six above examples (call them <font face="Courier New" size="3">toot11a - toot11f</font>) into one score. One way is to start with <font face="Courier New" size="3">toot11a.sco</font>, calculate its total duration and add that value to every starting time of <font face="Courier New" size="3">toot11b.sco</font>, then add the composite duration to the start times of <font face="Courier New" size="3">toot11c.sco</font>, etc. Alternatively, we could insert an <b>s</b> statement between each of the sections and run the entire score. The file <font face="Courier New" size="3">toot11.sco</font>, which contains a sequence of all of the above score examples, did just that.</p>			<p><font size="4"><b>Adding Extra Time</b></font></p>			<p>The <a href="../../references/manual_html/score/f.htm"><b>f0 </b>statement</a>, which creates an &quot;action time&quot; with no associated action, is useful in extending the duration of a section. Two seconds of silence are added to the first two sections below.</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>; ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td>; toot11g.sco</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>2</td>					<td>90</td>					<td>100</td>					<td></td>				</tr>				<tr>					<td>f</td>					<td>0</td>					<td>4</td>					<td></td>					<td></td>					<td>; The f0 Statement</td>				</tr>				<tr>					<td>s</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td>; The Section Statement</td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>90</td>					<td>800</td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>+</td>					<td>.</td>					<td>.</td>					<td>400</td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>.</td>					<td>100</td>					<td></td>				</tr>				<tr>					<td>f</td>					<td>0</td>					<td>5</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>s</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>4</td>					<td>90</td>					<td>50</td>					<td></td>				</tr>				<tr>					<td>e</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>			</table>			<font size="4"><br>			Sort</font></b></p>			<p>During preprocessing of a score section, all action-time statements are sorted into chronological order by p2 value. This means that notes can be entered in any order, that you can merge files, or work on instruments as temporarily separate sections, then have them sorted automatically when you run Csound on the file.</p>			<p>The file below contains excerpts from this section of the rehearsal chapter and from instr6 of the tutorial, and combines them as follows:</p>			<p><b>			<table border="0" cellpadding="1" cellspacing="0" width="100%">				<tr>					<td>; ins</td>					<td>start</td>					<td>dur</td>					<td>amp</td>					<td>freq</td>					<td colspan="6">; toot11h.sco</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i11</td>					<td>0</td>					<td>1</td>					<td>70</td>					<td>100</td>					<td colspan="6">; Score Sorting</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>+</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>90</td>					<td>800</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>70</td>					<td>100</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>90</td>					<td>1000</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i.</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>&lt;</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>.</td>					<td>70</td>					<td>&lt;</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i .</td>					<td>.</td>					<td>8</td>					<td>90</td>					<td>50</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>f1</td>					<td>0</td>					<td>2048</td>					<td>10</td>					<td>1</td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td></td>					<td>; Sine</td>				</tr>				<tr>					<td>f2</td>					<td>0</td>					<td>2048</td>					<td>10</td>					<td>1</td>					<td>.5</td>					<td>.3</td>					<td>.25</td>					<td>.2</td>					<td>.167</td>					<td>.14</td>					<td>.125</td>					<td>.111</td>					<td>; Sawtooth</td>				</tr>				<tr>					<td>f3</td>					<td>0</td>					<td>2048</td>					<td>10</td>					<td>1</td>					<td>0</td>					<td>.3</td>					<td>0</td>					<td>.2</td>					<td>0</td>					<td>.14</td>					<td>0</td>					<td>.111</td>					<td>; Square</td>				</tr>				<tr>					<td>f4</td>					<td>0</td>					<td>2048</td>					<td>10</td>					<td>1</td>					<td>1</td>					<td>1</td>					<td>1</td>					<td>.7</td>					<td>.5</td>					<td>.3</td>					<td>.1</td>					<td></td>					<td>; Pulse</td>				</tr>				<tr>					<td>; ins</td>					<td>strt</td>					<td>dur</td>					<td>amp</td>					<td>frq</td>					<td>atk</td>					<td>rel</td>					<td>vibr</td>					<td>vibdpth</td>					<td>vibdel</td>					<td colspan="3">waveform</td>					<td></td>				</tr>				<tr>					<td>i6</td>					<td>0</td>					<td>2</td>					<td>86</td>					<td>9.00</td>					<td>.03</td>					<td>.1</td>					<td>6</td>					<td>5</td>					<td>.4</td>					<td>1</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i6</td>					<td>2</td>					<td>2</td>					<td>86</td>					<td>9.02</td>					<td>.03</td>					<td>.1</td>					<td>6</td>					<td>5</td>					<td>.4</td>					<td>2</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i6</td>					<td>4</td>					<td>2</td>					<td>86</td>					<td>9.04</td>					<td>.03</td>					<td>.1</td>					<td>6</td>					<td>5</td>					<td>.4</td>					<td>3</td>					<td></td>					<td></td>					<td></td>				</tr>				<tr>					<td>i6</td>					<td>6</td>					<td>4</td>					<td>86</td>					<td>9.05</td>					<td>.05</td>					<td>.1</td>					<td>6</td>					<td>5</td>					<td>.4</td>					<td>4</td>					<td></td>					<td></td>					<td></td>				</tr>			</table>			</b></p>		</div>		<center>			<p><img src="figures/toot11.gif" width="373" height="251"></p>			<p>Toot 11: Carry, Tempo, and Sort</p>		</center>		<div align="left">			<p><img height="40" width="180" src="figures/button.gif" usemap="#toot_buttonb3354472" border="0"><map name="toot_buttonb3354472"><area href="toot10.html" coords="60,10,60,10,60,30,10,19" shape="polygon"><area href="toot12.html" coords="121,10,121,10,120,30,169,20" shape="polygon"><area href="index.html" coords="60,10,119,29" shape="rect"></map></div>	</body></html>