<html>	<head>		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">		<meta name="author" content="Hans Mikelson">		<meta name="summary" content="On-line magazine with articles on Csound for synthesis, signal processing, real-time performance, composing and programming.">		<meta name="keywords" content="csound, Csound, computer music, software synthesizer, software synth, digital signal processing, DSP, dsp, algorithmic composition, fractal music, electro-acoustic, electronica, signal processing, synthesis, sound design, audio programming">		<meta name="KeyWords" content="csound, Csound, computer music, software synthesizer, software synth, digital signal processing, DSP, dsp, algorithmic composition, fractal music, electro-acoustic, electronica, signal processing, synthesis, sound design, audio programming">		<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">		<title>Csound Magazine</title>	</head>	<body bgcolor="#000000" link="#FF0000" vlink="#B00000" alink="#F38181">		<table border="0" cellspacing="0">			<tr>				<td colspan="3" bgcolor="#000000"><a href="../index.html"><img src="../figures/logosm.gif" border="0" width="295" height="28"></a></td>				<td bgcolor="#000000">&nbsp;</td>			</tr>			<tr>				<td bgcolor="#000000">&nbsp;</td>				<td width="21" background="../bg1.jpg" height="22">&nbsp;</td>				<td background="../bg2.jpg">&nbsp;</td>				<td width="21" background="../bg6.jpg" height="22">&nbsp;</td>			</tr>			<tr>				<td valign="top" bgcolor="#000000"><font color="#FFFF00"><strong>Columns</strong> </font>					<p><a href="index.html">News</a></p>					<p><a href="../beginners/index.html">Beginners</a></p>					<p><a href="../internals/index.html">Internals</a></p>					<p><a href="../processing/index.html">Processing</a></p>					<p><font color="#FFFF00"><strong>Departments</strong></font></p>					<p><a href="../links.html">Links</a></p>					<p><a href="../editorial.html">Editorial</a></p>					<p><a href="../contribute.html">Contribute</a></p>					<p><a href="../past.html">Back Issues</a></p>					<p><a href="http://www.csounds.com/"><img src="../figures/csounds1.gif" border="0" width="88" height="31"></a></p>				</td>				<td background="../bg5.jpg">&nbsp;</td>				<td valign="top" bgcolor="#FFFFFF">					<h2>News</h2>					<p><i>Hans Mikelson</i></p>					<p><a href="mailto:hans@csounds.com">hans@csounds.com</a></p>					<p><strong>AutoScale</strong></p>					<p>Some people have wished for the ability to generate normalized output from a Csound file. I believe the following Perl program accomplishes this. I set this up in its own directory with the files I wanted to convert. This requires a console version of Csound to be running which I placed in the same directory. The program creates a modified orchestra derived from the input orchestra then runs it with the original score. This could probably be modified to process an entire directory of orc/sco pairs. One problem that I know of is if the numbers are so large that the console output text gets messed up then only the left side will end up being normalized. This program has no warranty expressed or implied and should be used at your own risk.</p>					<pre># Autoscale script# This should be run with a command line version of Csound# such as consound.$inorc = &quot;julia.orc&quot;; # Put your orc name here$insco = &quot;julia.sco&quot;; # Put your sco name here# The following line runs Csound and saves the console output# to autoscl.out for stdout and autoscl.err for std.errorsystem(&quot;csound.exe -d -W -otest.wav $inorc $insco 1&gt;autoscl.out 2&gt;autoscl.err&quot;);open(INFO, &quot;autoscl.out&quot;); # Open the file with the score amp values.@LINES=&lt;INFO&gt;;             # Read all of the lines in the file into @LINESclose(INFO);               # Close the fileforeach $LINE (@LINES)     # For each line of the file. {  # The next line matches the end of score maximum amplitudes.  if ($LINE =~ /end of score.\s+overall amps:\s*(\S+)\s*(\S*)/)   {    $maxleft  = $1;        # Get the maximum value for the left side    $maxright = $2;        # Get the maximum value for the right side   } }$max = $maxleft&gt;$maxright ? $maxleft : $maxright; # Is left or right bigger?print &quot;Max = $max\n&quot;;$maxval = 32767/$max;      # Find the scaling factoropen(INORC, $inorc);       # Open the offending orchestra@ORCLINES = &lt;INORC&gt;;       # Put it in @ORCLINESclose(INORC);              # Close the fileopen(OUTORC, &quot;&gt;autoscl.orc&quot;); # Create a new orc called autoscl.orc                              # you could put $inorc here if you wanted to                              # modify your actual orchestra.foreach $INOLINE (@ORCLINES)  # Scan each line of the orchestra {  # Search for the outs opcode  if ($INOLINE =~ /\s*outs\s+(\S+)\s*,\s*(\S+)\s*;*/)   {    $op1 = $1;             # Save the outs aout1, aout2 values    $op2 = $2;             # in op1 and op2    $INOLINE = &quot;outs $op1*$maxval,$op2*$maxval&quot;; # Modify the outs line   }  print OUTORC $INOLINE;   # Print the line to the new file }close(OUTORC);             # Close the new file# The next line runs the score with the modified orchestrasystem(&quot;csound.exe -d -W -otest.wav autoscl.orc $insco 1&gt;autoscl.out 2&gt;autoscl.err&quot;);</pre>					<p><strong>Introduction</strong></p>					<p>I have decided to rename the weekly section news since I am not able to contribute weekly. I thought that might be a better name for this section. I will try to contribute an orchestra and score or some other snippet of code here approximately once a month.</p>				</td>				<td background="../bg8.jpg">&nbsp;</td>			</tr>			<tr>				<td bgcolor="#000000">&nbsp;</td>				<td width="21" background="../bg4.jpg" height="22">&nbsp;</td>				<td background="../bg3.jpg">&nbsp;</td>				<td width="21" background="../bg7.jpg" height="22">&nbsp;</td>			</tr>		</table>	</body></html>