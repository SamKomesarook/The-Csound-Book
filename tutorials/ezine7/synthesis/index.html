<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Csound Magazine</title>		<meta name="author" content="Hans Mikelson">		<meta name="summary" content="On-line magazine with articles on Csound for synthesis, signal processing, real-time performance, composing and programming.">		<meta name="keywords" content="csound, Csound, computer music, software synthesizer, software synth, digital signal processing, DSP, dsp, algorithmic composition, fractal music, electro-acoustic, electronica, signal processing, synthesis, sound design, audio programming">		<meta name="keywords" content="csound, Csound, computer music, software synthesizer, software synth, digital signal processing, DSP, dsp, algorithmic composition, fractal music, electro-acoustic, electronica, signal processing, synthesis, sound design, audio programming">	</head>	<body bgcolor="white" text="black" link="#000040" vlink="#0000a4" alink="#b5005a">		<table border="0">			<tr>				<td valign="top" colspan="2"><a href="../index.html"><img src="../figures/logosm.jpg" border="0" width="283" height="25"></a></td>			</tr>			<tr>				<td valign="top"><font size="2"><strong>Columns</strong></font>					<p><a href="../beginners/index.html"><font size="2">Beginners</font></a></p>					<p><font size="2">Synthesis</font></p>					<p><a href="../processing/index.html"><font size="2">Processing</font></a></p>					<p><a href="../realtime/index.html"><font size="2">Real-Time</font></a></p>					<p><font size="2"><strong>Departments</strong></font></p>					<p><a href="../links.html"><font size="2">Links</font></a></p>					<p><a href="../editorial.html"><font size="2">Editorial</font></a></p>					<p><a href="../contribute.html"><font size="2">Contribute</font></a></p>					<p><a href="../past.html"><font size="2">Back Issues</font></a></p>					<p><a href="http://www.csounds.com/"><font size="2"><img src="../figures/csounds1.gif" border="0" width="88" height="31"></font></a></td>				<td valign="top">					<h2>Granular Synthesis</h2>					<p><img src="grainular.jpg" width="321" height="169"></p>					<p><font size="2"><i>Hans Mikelson</i></font></p>					<p><a href="mailto:hans@csounds.com"><font size="2">hans@csounds.com</font></a></p>					<p><a href="granula.orc"><font size="2">granula.orc</font></a><font size="2"> </font><a href="granula.sco"><font size="2">granula.sco</font></a><font size="2"> </font><a href="../audio/limit.wav"><font size="2">limit.wav</font></a><font size="2"> (398K)</font></p>					<p><font size="2"><strong>Like a Field of Crickets</strong></font></p>					<p><font size="2">This article describes how to do simple granular synthesis with Csound. The idea that sounds can be made up of a large number of sound particles is one of the key concepts of granular synthesis. Some examples of granular sounds are the chirping of a chorus of crickets, the rustling of leaves in the wind, a flowing stream of water, traffic on a busy highway and a room full of people talking. In these examples the individual sounds seem to become merged into a single continuous sound.</font></p>					<p><font size="2"><strong>Between Sine and Noise</strong></font></p>					<p><font size="2">In Csound granular synthesis is accomplished by generating a large number of sound events. Each sound event is a pulse of sound which has been shaped by a short envelope. One can think of a pure sine wave as having an infinite envelope and a single frequency. As the envelope becomes smaller the frequency of the sound becomes broader until an infinitesimal envelope yields all frequencies or noise. Granular synthesis is typically considered as the region somewhere between the two extremes where the broadening of the frequency band becomes noticable to the listener. </font></p>					<p><img src="hanning.jpg" width="215" height="107"></p>					<pre><strong>Figure 1.</strong>A typical grain envelope.</pre>					<p><font size="2">Figure 1 shows a typical grain envelope in this case a hanning window. This can be easily generated using <strong>GEN 20</strong>. The duration of each grain is typically between .005 to .1 seconds. Interesting results can be obtained with a sine wave although any waveform may be used.</font></p>					<p><font size="2">The Csound opcode <strong>grain</strong> allows for a random amplitude and pitch to be selected for each grain based on a base amplitude and frequency. The envelope duration and grain density are also specified.</font></p>					<p><font size="2"><img src="grains.jpg" width="459" height="337"></font></p>					<pre><strong>Figure 2.</strong>Some typical grains generated with <strong>grain</strong>.</pre>					<p><font size="2"><strong>Granular Sounds</strong></font></p>					<p><font size="2">The first example score section demonstrates several different envelope durations. The final event uses a different waveform.</font></p>					<pre>f1 0 65536 10 1                   ; Sine wavef2 0 65536 20 2                   ; Hanning envelopef3 0 65536 10 1 .1 .2 .4 .1       ; Waveform 1;  Sta Dur Amp   Pitch Arnd  PRnd Dns Fn RmpIn RmpOut GrnDuri1 0   1   16000 8.00  0     13   10  1  .1    .1     20i1 +   1   16000 8.00  0     13   20  1  .1    .1     22i1 .   1   16000 8.00  0     13   80  1  .1    .1     23i1 .   1   16000 8.00  .0001 10   10  3  .1    .1     20</pre>					<p><font size="2">The second example score section is a short composition using only instrument 1. The granular sounds fade in and out slowly using a variety of waveforms. This results in a series of rich evolving pads.</font></p>					<p><font size="2"><strong>Granular Samples</strong></font></p>					<p><font size="2">Samples can also be used as waveforms. The second instrument in the example orchestra generates granular sounds based on input samples. When I first tried to use samples as waveforms I was confused at the high pitched noisy result. The problem was that I had specified audio frequencies such as 440 hz for the grain base frequency. The <strong>grain</strong> opcode would then loop through the entire table 440 times each second rather than once over the duration of the sample. The following equation can be used to calculate the frequency to use for <strong>grain</strong> if you want the frequency of the sample to remain unchanged.</font></p>					<pre>i1 = sr/ftlen(ifn)</pre>					<p><font size="2">Sometimes it really pays to read the manual.</font></p>					<p><font size="2"><strong>Bugs? In Csound?</strong></font></p>					<p><font size="2">Unfortunately grain has a problem that can result in high pitched noise under certain conditions. This can be fixed by setting <strong>sr=kr</strong> but since the <strong>grain</strong> opcode is already very computationally intensive this is a painful solution. This may be fixed in an upcoming release of Csound.</font></p>					<p><font size="2"><strong>Just Getting Started</strong></font></p>					<p><font size="2">There are several other opcodes in Csound for granular synthesis including <strong>fog</strong> and <strong>granule</strong>. In addition programs can be written to generate granular scores. Besides pitch and amplitude other instrument parameters can be varied such as filter cut-off frequency, resonance, frequency modulation depth and waveform. Chaotic or fractal equations can be used to vary the instrument parameters by using score generating programs.</font></p>					<p><font size="2"><strong>Links and Further Reading</strong></font></p>					<p><font size="2">Duesenberry, John. November 1999. &quot;Square One: A World in a Grain of Sound.&quot; <em>Electronic Musician.</em> Intertec Publishing.</font></p>					<p><font size="2">Roads, Curtis. June 1997. &quot;Granular Synthesis.&quot; <em>Keyboard.</em> Miller Freeman.</font></p>					<p><a href="http://www.academy.qut.edu.au/music/newmedia/Granular_Synthesis/granSynth.htm"><font size="2">http://www.academy.qut.edu.au/music/newmedia/Granular_Synthesis/granSynth.htm</font></a><font size="2"> Granular synthesis tutorial by Leon Zadorin.</font></p>					<p><a href="http://www.academy.qut.edu.au/music/newmedia/Granular_Synthesis/CompGran.htm"><font size="2">http://www.academy.qut.edu.au/music/newmedia/Granular_Synthesis/CompGran.htm</font></a><font size="2"> Composing with Granular Synthesis by Leon Zadorin.</font></p>					<p><a href="http://roaring.ccm.uc.edu/mara/papers/"><font size="2">http://roaring.ccm.uc.edu/mara/papers/</font></a><font size="2"> Some links to papers on granular synthesis can be found here.</font></p>					<p><a href="http://wwwvms.utexas.edu/~fredrics/granular.html"><font size="2">http://wwwvms.utexas.edu/~fredrics/granular.html</font></a><font size="2"> Granular synthesis Csound example by Howard Fredrics</font></td>			</tr>		</table>	</body></html>