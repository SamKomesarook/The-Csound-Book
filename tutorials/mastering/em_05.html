<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>cSounds.com - Mastering Csound</title>		<script language="JavaScript"><!--function newImage(arg) {	if (document.images) {		rslt = new Image();		rslt.src = arg;		return rslt;	}}function changeImages() {	if (document.images && (preloadFlag == true)) {		for (var i=0; i<changeImages.arguments.length; i+=2) {			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];		}	}}var preloadFlag = false;function preloadImages() {	if (document.images) {		mastering01a_05_over = newImage("images/mastering01a_05-over.gif");		preloadFlag = true;	}}// -->		</script>	</head>	<body topmargin="0" leftmargin="0" marginwidth="0" marginheight="0" bgcolor="white" text="#333333" link="#333366" vlink="#333366" alink="#999999" onload="preloadImages();">		<font face="Geneva,Verdana,Helvetica,Arial" size="2">		<table border="0" cellpadding="0" cellspacing="0">			<tr>				<td colspan="2"><img src="figures/mastering01a_01.gif" width="202" height="61"></td>				<td rowspan="5"><img src="figures/mastering01a_02.gif" width="65" height="111"></td>				<td rowspan="2"><img src="figures/mastering01a_03.gif" width="333" height="67"></td>				<td><img src="figures/spacer.gif" width="1" height="61"></td>			</tr>			<tr>				<td rowspan="3"><img src="figures/mastering01a_04.gif" width="98" height="32"></td>				<td rowspan="2"><a href="http://www.csounds.com/mastering/" onmouseover="window.status='cSounds.com - Mastering Csound'; changeImages('mastering01a_05', 'images/mastering01a_05-over.gif'); return true;" onmouseout="window.status=' '; changeImages('mastering01a_05', 'images/mastering01a_05.gif'); return true;"><img name="mastering01a_05" src="figures/mastering01a_05.gif" width="104" height="21" border="0"></a></td>				<td><img src="figures/spacer.gif" width="1" height="6"></td>			</tr>			<tr>				<td rowspan="3"><img src="figures/mastering01a_06.gif" width="333" height="44"></td>				<td><img src="figures/spacer.gif" width="1" height="15"></td>			</tr>			<tr>				<td><img src="figures/mastering01a_07.gif" width="104" height="11"></td>				<td><img src="figures/spacer.gif" width="1" height="11"></td>			</tr>			<tr>				<td colspan="2"><img src="figures/mastering01a_08.gif" width="202" height="18"></td>				<td><img src="figures/spacer.gif" width="1" height="18"></td>			</tr>		</table>		<br>		<table border="0" cellpadding="0" cellspacing="0">			<tr>				<td width="24">&nbsp;</td>				<td valign="top" width="400"><font face="Geneva,Verdana,Helvetica,Arial" size="2"><b>Csound Basics: MIDI Granular</b><br>					<hr size="1" noshade>					</font>					<div align="justify">						<div class="text">							<font face="Geneva,Verdana,Helvetica,Arial" size="2">Since the sonic landscape of granular synthesis is a relatively new and foreign one, it might be more useful to explore this world in real-time. To do this, we will convert our granular synthesizer into a MIDI instrument and replace most of the envelope generators with scaled 7-bit controllers (<i>midic7</i>). Further, we will initialize the controllers to create a &quot;preset&quot; starting timbre using <i>ctrlinit</i>. Figure 8 is the Csound orchestra code for our MIDI Morphing Granular instrument.</font></div>					</div>					<p><font face="Geneva,Verdana,Helvetica,Arial" size="2"><br>					</font></td>				<td width="24">&nbsp;</td>				<td width="152" valign="top"><font face="Geneva,Verdana,Helvetica,Arial" size="1">					<table border="0" width="100%" cellpadding="1" cellspacing="0">						<tr>							<td bgcolor="#ff3300">								<center>									<font face="Geneva,Verdana,Helvetica,Arial" size="1" color="white"><b>Navi</b></font></center>								<p>								<table width="100%" border="0" cellpadding="3" cellspacing="0">									<tr>										<td bgcolor="white" valign="top" align="left">											<center>												<a href="index.html" onmouseover="window.status='Mastering Csound: index';return true" onmouseout="window.status=' ';return true"><font face="Geneva,Verdana,Helvetica,Arial" size="1">[index]</font></a><font face="Geneva,Verdana,Helvetica,Arial" size="1"> <a href="em_04.html" onmouseover="window.status='Csound Basics: Simple Granular';return true" onmouseout="window.status=' ';return true">[prev]</a> <a href="em_06.html" onmouseover="window.status='Csound Basics: Granular Processing';return true" onmouseout="window.status=' ';return true">[next]</a></font></center>										</td>									</tr>								</table>							</td>						</tr>					</table>					<br>					<table border="0" width="100%" cellpadding="2" cellspacing="0">						<tr>							<td bgcolor="#cccccc">								<center>									<font face="Geneva,Verdana,Helvetica,Arial" size="1"><b>cSounds.com</b></font></center>								<p>								<table width="100%" border="0" cellpadding="3" cellspacing="0">									<tr>										<td bgcolor="white" valign="top" align="left"><font color="#999999" face="Geneva,Verdana,Helvetica,Arial" size="1">[+]</font><font face="Geneva,Verdana,Helvetica,Arial" size="1"> <a href="http://www.csounds.com/" onmouseover="window.status='cSounds.com - Home';return true" onmouseout="window.status=' ';return true">Home</a><br>											</font><font color="#999999" face="Geneva,Verdana,Helvetica,Arial" size="1">[+]</font><font face="Geneva,Verdana,Helvetica,Arial" size="1"> <a href="http://www.csounds.com/tutorials/" onmouseover="window.status='cSounds.com - Mastering Csound';return true" onmouseout="window.status=' ';return true">Tutorials</a><br>											</font></td>									</tr>								</table>							</td>						</tr>					</table>					</font></td>			</tr>		</table>		<table border="0" cellpadding="0" cellspacing="0">			<tr>				<td width="24">&nbsp;</td>				<td valign="top"><font face="Geneva,Verdana,Helvetica,Arial" size="1">					<table border="0" width="100%" cellpadding="2" cellspacing="0">						<tr>							<td bgcolor="#cccccc"><font face="Geneva,Verdana,Helvetica,Arial" size="1" color="#333333"><b>Figure 8: Orchestra file for a MIDI version of our morphing granular instrument.</b></font>								<table width="100%" border="0" cellpadding="4" cellspacing="0">									<tr>										<td bgcolor="white" valign="top" align="left"><img src="figures/csfig08.gif"><br>										</td>									</tr>								</table>							</td>						</tr>					</table>					</font></td>			</tr>		</table>		<br>		<table border="0" cellpadding="0" cellspacing="0">			<tr>				<td width="24">&nbsp;</td>				<td valign="top" width="400">					<div align="justify">						<div class="text">							<font face="Geneva,Verdana,Helvetica,Arial" size="2">In this orchestra we have introduced two MIDI &quot;value converters,&quot; <i>cpsmidi</i> and <i>ampmidi</i> because we need some way to convert MIDI note numbers to their Hz (or cps) equivalent as required by the <i>grain</i> opcode. We also need a way of mapping MIDI velocity to maximum linear amplitude. In this case the velocities from 0-127 will be scaled to a range of 0-10000. Controller 80, scaled from a range of 0 to 10000, will be added to the base-frequency derived from the note played on the MIDI keyboard (<i>icps</i> + <i>kcps</i>). The other 4 controllers (16,17,18 and 19) are also scaled to specific ranges and assigned to grain duration, grain density, amplitude and pitch offset.</font></div>					</div>					<p><font face="Geneva,Verdana,Helvetica,Arial" size="2"><br>					</font>					<div align="justify">						<div class="text">							<font face="Geneva,Verdana,Helvetica,Arial" size="2">One of the important considerations of this and every MIDI instrument is reflected in the use of the <i>linenr</i> opcode. In the past, Csound instruments always &quot;knew&quot; the duration of the note when the instrument was initialized. This is because every note statement, in fact, required three parameters to be specified - instrument number (<i>p1</i>), start time (<i>p2</i>), and duration (<i>p3</i>). All other parameters in the score were left up to the sound designer. But in a MIDI instrument, how can you know the duration of the note in advance? The note's duration depends on how long you hold your fingers down on the keys. So, Vercoe had to create a new class of MIDI envelope opcodes that go into a &quot;release phase&quot; when a noteoff is sensed - all of these MIDI-based signal modifiers end with the letter &quot;r&quot; (<i>linenr</i>, <i>linsegr</i>, <i>exponr</i>, <i>etc</i>.).</font></div>					</div>					<p><font face="Geneva,Verdana,Helvetica,Arial" size="2"><br>					</font>					<div align="justify">						<div class="text">							<font face="Geneva,Verdana,Helvetica,Arial" size="2">The score file for our MIDI instrument is unique also because it can contain no notes. Rather, a dummy f-table is used to keep the instrument active for a certain amount of time. In the case of our granular MIDI instrument, the instrument is kept active for 30 seconds - f0 30 as seen in figure 9.</font></div>					</div>					<p><font face="Geneva,Verdana,Helvetica,Arial" size="2"><br>					</font></td>			</tr>		</table>		<table border="0" cellpadding="0" cellspacing="0">			<tr>				<td width="24">&nbsp;</td>				<td valign="top"><font face="Geneva,Verdana,Helvetica,Arial" size="1">					<table border="0" width="100%" cellpadding="2" cellspacing="0">						<tr>							<td bgcolor="#cccccc"><font face="Geneva,Verdana,Helvetica,Arial" size="1" color="#333333"><b>Figure 9: Score file for a MIDI granular instrument with dummy <i>f0</i> statement.</b></font>								<table width="100%" border="0" cellpadding="0" cellspacing="0">									<tr>										<td bgcolor="white" valign="top" align="left"><img src="figures/csfig09.gif"><br>										</td>									</tr>								</table>							</td>						</tr>					</table>					</font></td>			</tr>		</table>		<br>		<table border="0" cellpadding="0" cellspacing="0">			<tr>				<td width="24">&nbsp;</td>				<td valign="top"><a href="em_06.html" onmouseover="window.status='Csound Basics: Granular Processing';return true" onmouseout="window.status=' ';return true"><font face="Geneva,Verdana,Helvetica,Arial" size="1">[next] Csound Basics: Granular Processing</font></a>					<dl>						<dt>						<div class="link">							<font color="#999999" face="Geneva,Verdana,Helvetica,Arial" size="1">[+]</font><font face="Geneva,Verdana,Helvetica,Arial" size="1"> Please let us know any questions, comments or suggestions:<br>							</font></div>						<dd>						<div class="link">							<a href="mailto:support@csounds.com?subject=Mastering Csound" onmouseover="window.status='cSounds.com -  support';return true" onmouseout="window.status=' ';return true"><font face="Geneva,Verdana,Helvetica,Arial" size="1">support@csounds.com</font></a>						</dl>					</div>				</td>			</tr>		</table>		</font>	</body></html>